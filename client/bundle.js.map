{"version":3,"file":"bundle.js","mappings":"mBAAO,MAAMA,UAAaC,OAAOD,KAE/BE,WAAAA,EAAY,KAAEC,EAAI,EAAEC,EAAC,EAAEC,EAAC,KAAEC,EAAI,MAAEC,IAC9BC,MAAML,EAAMC,EAAGC,EAAGC,EAAMC,GACxBE,KAAKC,OAAOC,MAAM,IAElBF,KAAKN,KAAKS,IAAIC,SAASJ,KACzB,EAIK,MAAMK,UAAeb,OAAOa,OAEjCZ,WAAAA,EAAY,KAAEC,EAAI,EAAEC,EAAC,EAAEC,EAAC,MAAEU,EAAK,SAAEC,EAAQ,gBAAEC,EAAe,UAAEC,EAAS,SAAEC,EAAQ,UAAEC,EAAS,QAAEC,IAC1Fb,MAAML,EAAMC,EAAGC,EAAGU,EAAOC,EAAUC,EAAiBC,EAAWC,EAAUC,EAAWC,GACpFZ,KAAKC,OAAOC,MAAM,IAElBF,KAAKN,KAAKS,IAAIC,SAASJ,KACzB,EAIK,MAAMa,UAAmBrB,OAAOa,OAErCZ,WAAAA,EAAY,KAAEC,EAAI,EAAEC,EAAC,EAAEC,EAAC,MAAEU,EAAK,SAAEC,EAAQ,gBAAEC,EAAe,UAAEC,EAAS,SAAEC,EAAQ,UAAEC,EAAS,QAAEC,EAAO,MAAEE,EAAK,MAAEhB,IAC1GC,MAAML,EAAMC,EAAGC,EAAGU,EAAOC,EAAUC,EAAiBC,EAAWC,EAAUC,EAAWC,GACpFZ,KAAKC,OAAOC,MAAM,IAElBF,KAAKH,KAAO,IAAIL,OAAOD,KAAKS,KAAKN,KAAM,EAAG,EAAGoB,EAAOhB,GACpDE,KAAKH,KAAKI,OAAOC,MAAM,IAEvBF,KAAKe,SAASf,KAAKH,MAEnBG,KAAKN,KAAKS,IAAIC,SAASJ,KACzB,CAEAgB,OAAAA,GACEhB,KAAKiB,UAAU,EAAG,GAClBjB,KAAKkB,cAAe,EACpBlB,KAAKmB,MAAMC,eAAgB,CAC7B,CAEAC,MAAAA,GACErB,KAAKiB,UAAU,EAAG,EAAG,GACrBjB,KAAKkB,cAAe,EACpBlB,KAAKmB,MAAMC,eAAgB,CAC7B,EAIK,MAAME,UAAkB9B,OAAO+B,MAEpC9B,WAAAA,EAAY,KAAEC,EAAI,eAAE8B,EAAc,SAAEjB,EAAQ,gBAAEC,EAAe,EAAEb,EAAC,EAAEC,EAAC,MAAEE,IACnEC,MAAML,GAEN,IAGI+B,EAAU7B,EAEd,IAAK,IAAI8B,KAAiBF,EAAgB,CACxC,IAAIG,EAAU,IAAInC,OAAOoC,MAAM5B,KAAKN,KAAMC,EAAG8B,EANzB,iBAOhBI,EAAS,IAAIrC,OAAOa,OAAOL,KAAKN,KAAMiC,EAAQG,MAAQ,IAAK,GAN1C,YAMgEvB,EAASwB,KAAKvB,EAAiB,CAAEwB,QAASN,EAAcO,KAAO,KAAM,EAAG,EAAG,EAAG,GAC/JpC,EAAO,IAAIL,OAAOD,KAAKS,KAAKN,KAAM,GAAI,GAAI,cAAcgC,EAAcQ,OAAQpC,GAElF6B,EAAQZ,SAASc,GACjBF,EAAQZ,SAASlB,GAEjBG,KAAKG,IAAIwB,GAETF,GAAW,GACb,CACF,CAEAU,OAAAA,GACEnC,KAAKoC,QAAQ,OACf,EAGK,MAAMC,UAAoB7C,OAAO+B,MAEtC9B,WAAAA,EAAY,KAAEC,EAAI,YAAE4C,EAAW,QAAEC,EAAO,EAAE5C,EAAC,EAAEC,EAAC,YAAE4C,EAAW,aAAEC,EAAY,MAAE3C,IACzEC,MAAML,GAEN,IAAIgD,EAAU/C,EAEd,IAAK,IAAIgD,EAAI,EAAGA,EAAIL,EAAaK,IAAK,CACpC,IAAIC,EACAC,EACAC,EAAUP,EAAQI,GAElBG,GACFF,EAAU,IAAIpD,OAAOoC,MAAM5B,KAAKN,KAAMgD,EAAS9C,EAAG6C,EAAaK,EAAQC,MACvEF,EAAW,IAAIrD,OAAOD,KAAKS,KAAKN,KAAMkD,EAAQd,MAAM,EAAGc,EAAQI,OAAS,GAAIF,EAAQC,KAAMjD,GAC1F+C,EAAS5C,OAAOC,MAAM,IACtB0C,EAAQ7B,SAAS8B,IAEjBD,EAAU,IAAIpD,OAAOoC,MAAM5B,KAAKN,KAAMgD,EAAS9C,EAAG4C,GAGpDxC,KAAKG,IAAIyC,GACTF,GAAW,GACb,CACF,CAEAP,OAAAA,GACEnC,KAAKoC,QAAQ,OACf,EAGK,MAAMa,UAA0BzD,OAAO+B,MAE5C9B,WAAAA,EAAY,KAAEC,EAAI,MAAEY,EAAK,EAAEX,EAAC,EAAEC,IAC5BG,MAAML,GAENM,KAAKkD,QAAU,IAAI1D,OAAOoC,MAAM5B,KAAKN,KAAMC,EAAGC,EAAI,GAAIU,GACtDN,KAAKkD,QAAQjD,OAAOC,MAAM,IAE1BF,KAAKG,IAAIH,KAAKkD,SAEdlD,KAAKmD,MAAQnD,KAAKN,KAAKS,IAAIgD,MAAMnD,KAAKkD,SACtClD,KAAKmD,MAAMC,GAAG,CAAExD,EAAGI,KAAKkD,QAAQtD,EAAI,GAAIyD,MAAO,GAAK,KAEpDrD,KAAKmD,MAAMG,WAAWnD,IAAIH,KAAKuD,OAAQvD,MAEvCA,KAAKmD,MAAMK,OACb,CAEAD,MAAAA,GACEvD,KAAKoC,QAAQ,OACf,EChIF,MAAMqB,UAAajE,OAAOkE,MAExBC,MAAAA,GAGE3D,KAAKN,KAAKkE,MAAMC,yBAA0B,EAM1C7D,KAAKN,KAAKoE,MAAMC,UAAYvE,OAAOwE,aAAaC,WAChDjE,KAAKN,KAAKoE,MAAMI,uBAAwB,EACxClE,KAAKN,KAAKoE,MAAMK,qBAAsB,EAEtC,MAAMC,EAAQpE,KAAKN,KAAKoC,MAClBuC,EAAQrE,KAAKN,KAAKsD,OAElBsB,EAAkBA,KACtB,MAAMC,EAAIC,OAAOC,YAAcL,EACzBM,EAAIF,OAAOG,aAAeN,EAC1BO,EAAIC,KAAKC,IAAIP,EAAIH,EAAOM,EAAIL,GAClC,IACErE,KAAKN,KAAKoE,MAAMiB,aAAaH,EAAGA,GAChC5E,KAAKN,KAAKoE,MAAMkB,SAClB,CAAE,MAAOC,GAAI,GAGfT,OAAOU,iBAAiB,SAAUZ,GAClCA,IAEA,IAAI/E,EAAK,CACPG,KAAMM,KAAKN,KACXC,EAAGK,KAAKN,KAAKyF,MAAMC,QACnBxF,EAAGI,KAAKN,KAAKyF,MAAME,QACnBxF,KAAM,aACNC,MAAO,CACLwF,KAAM,aACNC,KAAM,aAIVvF,KAAKwF,MAAMhC,MAAM,UACnB,EAIF,UCjDA,MAAMiC,UAAgBjG,OAAOkE,MAE3BgC,OAAAA,GAEE1F,KAAK2F,KAAKC,MAAM,YAAiB,6BACjC5F,KAAK2F,KAAKC,MAAM,gBAAiB,iCAEjC5F,KAAK2F,KAAKE,YAAY,UAAc,0BAA2B,IAAK,IACpE7F,KAAK2F,KAAKE,YAAY,aAAc,0BAA2B,GAAI,IACnE7F,KAAK2F,KAAKE,YAAY,YAAc,6BAA8B,GAAI,IAEtE7F,KAAK2F,KAAKC,MAAM,kBAAqB,mCACrC5F,KAAK2F,KAAKC,MAAM,mBAAqB,oCAErC5F,KAAK2F,KAAKC,MAAM,oBAAqB,yCAErC5F,KAAK2F,KAAKC,MAAM,mBAAqB,wCACrC5F,KAAK2F,KAAKC,MAAM,mBAAqB,wCACrC5F,KAAK2F,KAAKC,MAAM,wBAAyB,6CACzC5F,KAAK2F,KAAKC,MAAM,sBAAuB,2CACvC5F,KAAK2F,KAAKC,MAAM,OAAoB,8BACpC5F,KAAK2F,KAAKC,MAAM,OAAoB,+BAGpC5F,KAAK2F,KAAKC,MAAM,QAAc,oBAC9B5F,KAAK2F,KAAKG,QAAQ,UAAa,oBAAqB,KAAMtG,OAAOuG,QAAQC,YACzEhG,KAAK2F,KAAKG,QAAQ,WAAa,qBAAsB,KAAMtG,OAAOuG,QAAQC,YAC1EhG,KAAK2F,KAAKG,QAAQ,YAAa,sBAAuB,KAAMtG,OAAOuG,QAAQC,YAC3EhG,KAAK2F,KAAKG,QAAQ,WAAa,qBAAuB,KAAMtG,OAAOuG,QAAQC,YAC3EhG,KAAK2F,KAAKG,QAAQ,WAAa,qBAAuB,KAAMtG,OAAOuG,QAAQC,YAC3EhG,KAAK2F,KAAKG,QAAQ,gBAAkB,0BAA4B,KAAMtG,OAAOuG,QAAQC,YACrFhG,KAAK2F,KAAKG,QAAQ,cAAgB,wBAA0B,KAAMtG,OAAOuG,QAAQC,YAIjFhG,KAAK2F,KAAKE,YAAY,mBAAwB,mCAAwC,GAAI,IAC1F7F,KAAK2F,KAAKE,YAAY,uBAAwB,uCAAwC,GAAI,IAC1F7F,KAAK2F,KAAKE,YAAY,qBAAwB,qCAAwC,GAAI,IAC1F7F,KAAK2F,KAAKE,YAAY,eAAwB,+BAAwC,GAAI,IAC1F7F,KAAK2F,KAAKE,YAAY,kBAAwB,kCAAwC,GAAI,IAC1F7F,KAAK2F,KAAKE,YAAY,iBAAwB,iCAAwC,GAAI,IAC1F7F,KAAK2F,KAAKE,YAAY,iBAAwB,iCAAwC,GAAI,IAE1F7F,KAAK2F,KAAKE,YAAY,gBAAiB,gCAAiC,GAAI,IAC5E7F,KAAK2F,KAAKE,YAAY,eAAiB,+BAAgC,GAAI,IAC3E7F,KAAK2F,KAAKE,YAAY,eAAiB,wBAAyB,GAAI,IAEpE7F,KAAK2F,KAAKC,MAAM,iBAAqB,kCACrC5F,KAAK2F,KAAKC,MAAM,oBAAqB,qCACrC5F,KAAK2F,KAAKC,MAAM,iBAAqB,kCACrC5F,KAAK2F,KAAKC,MAAM,oBAAqB,qCACrC5F,KAAK2F,KAAKC,MAAM,iBAAqB,kCAErC5F,KAAK2F,KAAKC,MAAM,oBAAqB,qCACrC5F,KAAK2F,KAAKC,MAAM,oBAAqB,qCACrC5F,KAAK2F,KAAKC,MAAM,mBAAqB,oCAGrC5F,KAAK2F,KAAKE,YAAY,YAAa,4BAA6B,GAAI,IACpE7F,KAAK2F,KAAKE,YAAY,WAAa,2BAA4B,GAAI,IACnE7F,KAAK2F,KAAKC,MAAM,aAAc,8BAG9B5F,KAAK2F,KAAKM,MAAM,aAAc,CAAC,mBAC/BjG,KAAK2F,KAAKM,MAAM,YAAc,CAAC,kBAG/BjG,KAAK2F,KAAKC,MAAM,uBAA4B,gCAE5C5F,KAAK2F,KAAKC,MAAM,0BAA4B,gCAC5C5F,KAAK2F,KAAKC,MAAM,uBAA4B,gCAC5C5F,KAAK2F,KAAKC,MAAM,0BAA4B,gCAC5C5F,KAAK2F,KAAKC,MAAM,wBAA4B,gCAC5C5F,KAAK2F,KAAKC,MAAM,wBAA4B,gCAC5C5F,KAAK2F,KAAKC,MAAM,uBAA4B,gCAC5C5F,KAAK2F,KAAKC,MAAM,uBAA4B,gCAC5C5F,KAAK2F,KAAKC,MAAM,uBAA4B,gCAC5C5F,KAAK2F,KAAKC,MAAM,yBAA4B,gCAC5C5F,KAAK2F,KAAKC,MAAM,wBAA4B,iCAC5C5F,KAAK2F,KAAKC,MAAM,uBAA4B,iCAE5C5F,KAAK2F,KAAKE,YAAY,qBAAuB,kCAAmC,GAAI,IACpF7F,KAAK2F,KAAKE,YAAY,kBAAuB,kCAAmC,GAAI,IACpF7F,KAAK2F,KAAKE,YAAY,qBAAuB,kCAAmC,GAAI,IACpF7F,KAAK2F,KAAKE,YAAY,mBAAuB,kCAAmC,GAAI,IACpF7F,KAAK2F,KAAKE,YAAY,mBAAuB,kCAAmC,GAAI,IACpF7F,KAAK2F,KAAKE,YAAY,kBAAuB,kCAAmC,GAAI,IACpF7F,KAAK2F,KAAKE,YAAY,kBAAuB,kCAAmC,GAAI,IACpF7F,KAAK2F,KAAKE,YAAY,kBAAuB,kCAAmC,GAAI,IACpF7F,KAAK2F,KAAKE,YAAY,oBAAuB,kCAAmC,GAAI,IACpF7F,KAAK2F,KAAKE,YAAY,mBAAuB,mCAAoC,GAAI,IACrF7F,KAAK2F,KAAKE,YAAY,kBAAuB,mCAAoC,GAAI,GACvF,CAEAlC,MAAAA,GACE3D,KAAKwF,MAAMhC,MAAM,OACnB,EAGF,UCjGA,MAAM0C,UAAa1G,OAAOkE,MAExByC,IAAAA,GACEnG,KAAKoG,cAAgB,KAErBC,aAAaC,GAAG,wBAAyBtG,KAAKuG,oBAAoBxE,KAAK/B,MACzE,CAEA2D,MAAAA,GACmB3D,KAAKG,IAAIyF,MAAM5F,KAAKN,KAAKyF,MAAMC,QAASpF,KAAKN,KAAKyF,MAAME,QAAS,aACvEpF,OAAOC,MAAM,IAGxB,IAAIX,EAAK,CACPG,KAAMM,KAAKN,KACXC,EAAGK,KAAKN,KAAKyF,MAAMC,QACnBxF,EAAGI,KAAKN,KAAKyF,MAAME,QAAU,IAC7BxF,KAAM,YACNC,MAAO,CACLwF,KAAM,aACNC,KAAM,UACNiB,OAAQ,UACRC,gBAAiB,KAIrB,IAAI5F,EAAW,CACbnB,KAAMM,KAAKN,KACXC,EAAGK,KAAKN,KAAKyF,MAAMC,QACnBxF,EAAGI,KAAKN,KAAKyF,MAAME,QAAU,IAC7B/E,MAAO,UACPC,SAAUP,KAAK0G,eACflG,gBAAiBR,KACjBS,UAAW,EACXC,SAAU,EACVC,UAAW,EACXC,QAAS,EACTE,MAAO,WACPhB,MAAO,CACLwF,KAAM,aACNC,KAAM,aAIVc,aAAaM,KAAK,cAAe3G,KAAKuG,oBAAoBxE,KAAK/B,MACjE,CAEA4G,MAAAA,GACA,CAEAF,cAAAA,GACEL,aAAaM,KAAK,eAClB3G,KAAKwF,MAAMhC,MAAM,YACnB,CAEA+C,mBAAAA,CAAoB/E,GAKdxB,KAAKoG,eACPpG,KAAKoG,cAAcjE,UAGrBnC,KAAKoG,cAAgB,IAAI9E,EAAU,CACjC5B,KAAMM,KAAKN,KACX8B,eAAgBA,EAChBjB,SAAUP,KAAK6G,eACfrG,gBAAiBR,KACjBL,EAAGK,KAAKN,KAAKyF,MAAMC,QAAU,IAC7BxF,EAAG,IACHE,MAAO,CACLwF,KAAM,aACNC,KAAM,UACNiB,OAAQ,UACRC,gBAAiB,IAGvB,CAEAI,cAAAA,CAAe7E,GACbqE,aAAaM,KAAK,eAElB3G,KAAKwF,MAAMhC,MAAM,eAAe,GAAM,EAAOxB,EAC/C,EAGF,UCzFa8E,EAAiB,CAAC,UAAW,WAAY,YAAa,WAAY,WAAY,gBAAiB,eAI/FC,EAAY,GCDzB,MAAMC,UAAkBxH,OAAOkE,MAE7ByC,IAAAA,GACEnG,KAAKiH,OAAS,IAAIC,YAAYlH,KAChC,CAEA2D,MAAAA,GACmB3D,KAAKG,IAAIyF,MAAM5F,KAAKN,KAAKyF,MAAMC,QAASpF,KAAKN,KAAKyF,MAAME,QAAS,aACvEpF,OAAOC,MAAM,IAExB,IAAIX,EAAK,CACPG,KAAMM,KAAKN,KACXC,EAAGK,KAAKN,KAAKyF,MAAMC,QACnBxF,EAAGI,KAAKN,KAAKyF,MAAME,QAAU,IAC7BxF,KAAM,aACNC,MAAO,CACLwF,KAAM,aACNC,KAAM,UACNiB,OAAQ,UACRC,gBAAiB,KAMrB,IAAIU,EAAc,IAAI3H,OAAOoC,MAAM5B,KAAKN,KAAM,EAAG,EAAG,mBAChD0H,EAAe,IAAI5H,OAAOoC,MAAM5B,KAAKN,KAAM,EAAG,EAAG,oBACjD2H,EAAgB,IAAI7H,OAAOoC,MAAM5B,KAAKN,KAAM,EAAG,EAAG,qBAClD4H,EAAgB,IAAI9H,OAAOoC,MAAM5B,KAAKN,KAAM,EAAG,EAAG,oBAClD6H,EAAgB,IAAI/H,OAAOoC,MAAM5B,KAAKN,KAAM,EAAG,EAAG,oBAClD8H,EAAqB,IAAIhI,OAAOoC,MAAM5B,KAAKN,KAAM,EAAG,EAAG,yBACvD+H,EAAmB,IAAIjI,OAAOoC,MAAM5B,KAAKN,KAAM,EAAG,EAAG,uBAEzDM,KAAKiH,OAAOS,aAAa,CACvB/H,EAAGK,KAAKN,KAAKyF,MAAMC,QAAU+B,EAAYrF,MAAQ,EACjDlC,EAAGI,KAAKN,KAAKyF,MAAME,QAAU+B,EAAapE,OAAS,EACnDlB,MAAOqF,EAAYrF,MACnBkB,OAAQmE,EAAYnE,OACpB2E,iBAAkB,OAClBC,iBAAkB,OAClBC,QAAS,CAACV,EAAaC,EAAcC,EAAeC,EAAcC,EAAcC,EAAmBC,KAGrG,IAAIpH,EAAO,CACTX,KAAMM,KAAKN,KACXC,EAAGK,KAAKN,KAAKyF,MAAMC,QACnBxF,EAAGI,KAAKN,KAAKyF,MAAME,QAAU,IAC7B/E,MAAO,aACPC,SAAUP,KAAK8H,sBACftH,gBAAiBR,KACjBS,UAAW,EACXC,SAAU,EACVC,UAAW,EACXC,QAAS,GAEb,CAEAkH,qBAAAA,GACE,IAAIC,EAAWjB,EAAe9G,KAAKiH,OAAOe,mBAE1C3B,aAAaM,KAAK,cAAeoB,EAAU/H,KAAKiI,cAAclG,KAAK/B,MACrE,CAEAiI,aAAAA,CAAcC,GAEZ,GAAIA,GAAWA,EAAQC,MAGrB,YADAC,MAAMF,EAAQG,SAAWH,EAAQC,OAInC,MAAMnG,EAAWkG,GAAWA,EAAQlG,QAAWkG,EAAQlG,QAAUkG,EACjElI,KAAKwF,MAAMhC,MAAM,eAAe,GAAM,EAAOxB,EAC/C,EAGF,UC7EA,MAAMsG,UAAoB9I,OAAOkE,MAE/ByC,IAAAA,CAAK+B,GACHlI,KAAKuI,gBAAkB,KAGvBvI,KAAKgC,QAAWkG,GAAWA,EAAQlG,QAAWkG,EAAQlG,QAAUkG,EAEhE7B,aAAaC,GAAG,cAAetG,KAAKwI,gBAAgBzG,KAAK/B,OACzDqG,aAAaC,GAAG,cAAetG,KAAKyI,WAAW1G,KAAK/B,OAEpDqG,aAAaM,KAAK,qBAAsB,CAAE3E,QAAShC,KAAKgC,SAC1D,CAEA2B,MAAAA,GACmB3D,KAAKG,IAAIyF,MAAM5F,KAAKN,KAAKyF,MAAMC,QAASpF,KAAKN,KAAKyF,MAAME,QAAS,aACvEpF,OAAOC,MAAM,IAExBF,KAAK0I,UAAY,IAAInJ,EAAK,CACxBG,KAAMM,KAAKN,KACXC,EAAGK,KAAKN,KAAKyF,MAAMC,QACnBxF,EAAGI,KAAKN,KAAKyF,MAAME,QAAU,IAC7BxF,KAAM,GACNC,MAAO,CACLwF,KAAM,aACNC,KAAM,UACNiB,OAAQ,UACRC,gBAAiB,KAIrBzG,KAAK2I,gBAAkB,IAAI9H,EAAW,CACpCnB,KAAMM,KAAKN,KACXC,EAAGK,KAAKN,KAAKyF,MAAMC,QAAU,IAC7BxF,EAAGI,KAAKN,KAAKyF,MAAME,QAAU,IAC7B/E,MAAO,UACPC,SAAUP,KAAK4I,gBACfpI,gBAAiBR,KACjBS,UAAW,EACXC,SAAU,EACVC,UAAW,EACXC,QAAS,EACTE,MAAO,aACPhB,MAAO,CACLwF,KAAM,aACNC,KAAM,aAIVvF,KAAK2I,gBAAgB3H,UAGrBhB,KAAK6I,QAAU,EAEf7I,KAAK8I,OAAS,IAAIvJ,EAAK,CACrBG,KAAMM,KAAKN,KACXC,EAAGK,KAAKN,KAAKyF,MAAMC,QACnBxF,EAAGI,KAAKN,KAAKyF,MAAME,QAAU,IAC7BxF,KAAM,OAAOG,KAAK6I,UAClB/I,MAAO,CAAEwF,KAAM,aAAcC,KAAM,UAAWiB,OAAQ,UAAWC,gBAAiB,KAIpFzG,KAAK+I,aAAe,SAGpB,MAAMC,EAAQhJ,KAAKN,KAAKyF,MAAME,QAAU,GAExCrF,KAAKiJ,WAAa,IAAI1J,EAAK,CACzBG,KAAMM,KAAKN,KACXC,EAAGK,KAAKN,KAAKyF,MAAMC,QACnBxF,EAAGoJ,EACHnJ,KAAM,OAAOG,KAAK+I,eAClBjJ,MAAO,CAAEwF,KAAM,aAAcC,KAAM,UAAWiB,OAAQ,UAAWC,gBAAiB,KAKpFzG,KAAKkJ,OAAS,IAAIrI,EAAW,CAC3BnB,KAAMM,KAAKN,KACXC,EAAGK,KAAKN,KAAKyF,MAAMC,QAJH,IAKhBxF,EAAGoJ,EACH1I,MAAO,UACPC,SAAUA,IAAMP,KAAKmJ,gBAAgB,QACrC3I,gBAAiBR,KACjBS,UAAW,EACXC,SAAU,EACVC,UAAW,EACXC,QAAS,EACTE,MAAO,OACPhB,MAAO,CAAEwF,KAAM,aAAcC,KAAM,aAGrCvF,KAAKoJ,SAAW,IAAIvI,EAAW,CAC7BnB,KAAMM,KAAKN,KACXC,EAAGK,KAAKN,KAAKyF,MAAMC,QACnBxF,EAAGoJ,EACH1I,MAAO,UACPC,SAAUA,IAAMP,KAAKmJ,gBAAgB,UACrC3I,gBAAiBR,KACjBS,UAAW,EACXC,SAAU,EACVC,UAAW,EACXC,QAAS,EACTE,MAAO,SACPhB,MAAO,CAAEwF,KAAM,aAAcC,KAAM,aAGrCvF,KAAKqJ,OAAS,IAAIxI,EAAW,CAC3BnB,KAAMM,KAAKN,KACXC,EAAGK,KAAKN,KAAKyF,MAAMC,QAlCH,IAmChBxF,EAAGoJ,EACH1I,MAAO,UACPC,SAAUA,IAAMP,KAAKmJ,gBAAgB,QACrC3I,gBAAiBR,KACjBS,UAAW,EACXC,SAAU,EACVC,UAAW,EACXC,QAAS,EACTE,MAAO,OACPhB,MAAO,CAAEwF,KAAM,aAAcC,KAAM,aAGrCvF,KAAKsJ,QAAU,IAAIzI,EAAW,CAC5BnB,KAAMM,KAAKN,KACXC,EAAGK,KAAKN,KAAKyF,MAAMC,QAAU,IAC7BxF,EAAGI,KAAKN,KAAKyF,MAAME,QAAU,IAC7B/E,MAAO,UACPC,SAAUA,IAAMP,KAAKuJ,WAAWvJ,KAAK6I,QAAU,GAC/CrI,gBAAiBR,KACjBS,UAAW,EACXC,SAAU,EACVC,UAAW,EACXC,QAAS,EACTE,MAAO,IACPhB,MAAO,CAAEwF,KAAM,aAAcC,KAAM,aAGrCvF,KAAKwJ,OAAS,IAAI3I,EAAW,CAC3BnB,KAAMM,KAAKN,KACXC,EAAGK,KAAKN,KAAKyF,MAAMC,QAAU,IAC7BxF,EAAGI,KAAKN,KAAKyF,MAAME,QAAU,IAC7B/E,MAAO,UACPC,SAAUA,IAAMP,KAAKuJ,WAAWvJ,KAAK6I,QAAU,GAC/CrI,gBAAiBR,KACjBS,UAAW,EACXC,SAAU,EACVC,UAAW,EACXC,QAAS,EACTE,MAAO,IACPhB,MAAO,CAAEwF,KAAM,aAAcC,KAAM,aAGrC,IAAI1E,EAAW,CACbnB,KAAMM,KAAKN,KACXC,EAAGK,KAAKN,KAAKyF,MAAMC,QAAU,IAC7BxF,EAAGI,KAAKN,KAAKyF,MAAME,QAAU,IAC7B/E,MAAO,UACPC,SAAUP,KAAKyJ,gBACfjJ,gBAAiBR,KACjBS,UAAW,EACXC,SAAU,EACVC,UAAW,EACXC,QAAS,EACTE,MAAO,aACPhB,MAAO,CACLwF,KAAM,aACNC,KAAM,YAIZ,CAEAgE,UAAAA,CAAWG,GACT1J,KAAK6I,QAAUhE,KAAKC,IAAI,EAAGD,KAAK8E,IAAI,EAAGD,IACnC1J,KAAK8I,SAAQ9I,KAAK8I,OAAOjJ,KAAO,OAAOG,KAAK6I,WAEhDxC,aAAaM,KAAK,eAAgB,CAAEiD,MAAO5J,KAAK6I,SAClD,CAEAM,eAAAA,CAAgBU,GACd7J,KAAK+I,aAAec,EAChB7J,KAAKiJ,aAAYjJ,KAAKiJ,WAAWpJ,KAAO,OAAOG,KAAK+I,gBAExD1C,aAAaM,KAAK,oBAAqB,CAAEkD,WAAY7J,KAAK+I,cAC5D,CAEAP,eAAAA,EAAgB,aAAEsB,IAChB,IAAIvH,EAAUwH,OAAOC,OAAOF,EAAavH,SAEzCvC,KAAK0I,UAAU7I,KAAOiK,EAAa5H,KAE/BlC,KAAKuI,iBACPvI,KAAKuI,gBAAgBpG,UAGvBnC,KAAKuI,gBAAkB,IAAIlG,EAAY,CACrC3C,KAAMM,KAAKN,KACX4C,YAAawH,EAAaxH,YAC1BC,QAASA,EACT5C,EAAGK,KAAKN,KAAKyF,MAAMC,QAAU,IAC7BxF,EAAGI,KAAKN,KAAKyF,MAAME,QAAU,GAC7B7C,YAAa,uBACbC,aAAc,kBACd3C,MAAO,CACLwF,KAAM,aACNC,KAAM,aAKPhD,EAAQ0H,QAAU,EACnBjK,KAAK2I,gBAAgBtH,SAErBrB,KAAK2I,gBAAgB3H,SAEzB,CAEAyI,eAAAA,GACEpD,aAAaM,KAAK,sBAElB3G,KAAKwF,MAAMhC,MAAM,OACnB,CAEAoF,eAAAA,GACEvC,aAAaM,KAAK,aACpB,CAEA8B,UAAAA,CAAW/I,GACTM,KAAKwF,MAAMhC,MAAM,QAAQ,GAAM,EAAO9D,EACxC,EAGF,UC3OawK,EAAW,SAASjI,EAAIkI,GACnC,IAAK,IAAIC,KAAUD,EAASE,SAC1B,GAAID,EAAOnI,KAAOA,EAElB,OAAOmI,EAET,OAAO,IACT,EAEaE,EAAqB,SAASrI,EAAIkI,GAC7C,IAAIC,EAASF,EAASjI,EAAIkI,GACrBC,GAELA,EAAOjI,SACT,ECde,MAAMoI,EAEnB9K,WAAAA,EAAY,KAAEC,EAAI,OAAE8K,IAClBxK,KAAKN,KAAOA,EACZM,KAAKwK,OAASA,EAEdxK,KAAKF,MAAW,CAAEwF,KAAM,aAAcC,KAAM,UAAWkF,MAAO,QAC9DzK,KAAK0K,SAAW,CAAEpF,KAAM,aAAcC,KAAM,UAAWkF,MAAO,UAG9DzK,KAAK2K,IAAM3K,KAAKN,KAAKS,IAAIyK,QACzB5K,KAAK2K,IAAIE,eAAgB,EAEzB,IAAIC,EAAa,IAAItL,OAAOoC,MAAM5B,KAAKN,KAAM,EAAG,EAAG,qBACnDM,KAAK+K,UAAY,IAAIvL,OAAOD,KAAKS,KAAKN,KAAM,GAAI,EAAGM,KAAKgL,aAAchL,KAAKF,OAC3EgL,EAAU/J,SAASf,KAAK+K,WACxB/K,KAAK2K,IAAIxK,IAAI2K,GAEb,IAAIG,EAAa,IAAIzL,OAAOoC,MAAM5B,KAAKN,KAAM,IAAK,EAAG,qBACrDM,KAAKkL,UAAY,IAAI1L,OAAOD,KAAKS,KAAKN,KAAM,GAAI,EAAGM,KAAKmL,aAAcnL,KAAKF,OAC3EmL,EAAUlK,SAASf,KAAKkL,WACxBlL,KAAK2K,IAAIxK,IAAI8K,GAEb,IAAIG,EAAa,IAAI5L,OAAOoC,MAAM5B,KAAKN,KAAM,IAAK,EAAG,oBACrDM,KAAKqL,UAAY,IAAI7L,OAAOD,KAAKS,KAAKN,KAAM,GAAI,EAAGM,KAAKsL,aAActL,KAAKF,OAC3EsL,EAAUrK,SAASf,KAAKqL,WACxBrL,KAAK2K,IAAIxK,IAAIiL,GAGb,IAAIG,EAAY,IAAI/L,OAAOoC,MAAM5B,KAAKN,KAAM,IAAK,EAAG,cACpD6L,EAAUlI,MAAQ,IAClBrD,KAAKwL,UAAY,IAAIhM,OAAOD,KAAKS,KAAKN,KAAM,GAAI,EAAG,GAAIM,KAAKF,OAC5DyL,EAAUxK,SAASf,KAAKwL,WACxBD,EAAUE,SAAU,EACpBzL,KAAKuL,UAAYA,EACjBvL,KAAK2K,IAAIxK,IAAIoL,GAEbvL,KAAK0L,YAAc,KAEnB1L,KAAK2L,SAAW3L,KAAKN,KAAKS,IAAIN,KAAKG,KAAKN,KAAKyF,MAAMC,QAASpF,KAAKN,KAAKyF,MAAMnC,OAAS,GAAI,cAAehD,KAAK0K,UAC7G1K,KAAK2L,SAAS1L,OAAO2L,IAAI,IACzB5L,KAAK2L,SAASF,SAAU,EACxBzL,KAAK2L,SAASd,eAAgB,CAChC,CAEAgB,gBAAAA,GACE7L,KAAK+K,UAAUlL,KAAOG,KAAKgL,aAC3BhL,KAAKkL,UAAUrL,KAAOG,KAAKmL,aAC3BnL,KAAKqL,UAAUxL,KAAOG,KAAKsL,YAC7B,CAEAQ,SAAAA,CAAUC,GACR,IAAK/L,KAAKuL,UAAW,OAIrB,GAFAvL,KAAKuL,UAAUE,SAAU,EAErBzL,KAAK0L,YAAa,CACpB,IAAM1L,KAAKN,KAAKsM,KAAKC,OAAOC,OAAOlM,KAAK0L,YAAc,CAAE,MAAOzG,GAAI,CACnEjF,KAAK0L,YAAc,IACrB,CAEA,MAAMS,EAAOA,KACX,MAAMC,EAAOvH,KAAKC,IAAI,EAAGiH,EAAe/L,KAAKN,KAAKsM,KAAKK,KACvDrM,KAAKwL,UAAU3L,KAAO,IAAIuM,EAAO,KAAME,QAAQ,MAE3CF,GAAQ,GACVpM,KAAKuM,aAITJ,IACAnM,KAAK0L,YAAc1L,KAAKN,KAAKsM,KAAKC,OAAOO,KAAK,IAAKL,EACrD,CAEAI,SAAAA,GAEE,GADIvM,KAAKuL,YAAWvL,KAAKuL,UAAUE,SAAU,GACzCzL,KAAK0L,YAAa,CACpB,IAAM1L,KAAKN,KAAKsM,KAAKC,OAAOC,OAAOlM,KAAK0L,YAAc,CAAE,MAAOzG,GAAI,CACnEjF,KAAK0L,YAAc,IACrB,CACF,CAEAe,YAAAA,GACEzM,KAAK2L,SAASF,SAAU,CAC1B,CAEAT,UAAAA,GACE,OAAOhL,KAAKwK,OAAOkC,KACrB,CAEAvB,UAAAA,GACE,MAAO,KAAKnL,KAAKwK,OAAOmC,OAC1B,CAEArB,UAAAA,GACE,OAAUtL,KAAKwK,OAAOoC,MAAQ,IAAvB,OACT,ECvFa,MAAMC,UAAerN,OAAOsN,OAEzCrN,WAAAA,EAAY,KAAEC,EAAI,GAAEuC,EAAE,MAAE8K,EAAK,KAAEhK,IAC7BhD,MAAML,EAAMqN,EAAMpN,EAAGoN,EAAMnN,EAAG,aAAemD,GAE7C/C,KAAKN,KAAOA,EACZM,KAAKiC,GAAKA,EAEVjC,KAAKgN,aAAe,CAAErN,EAAGoN,EAAMpN,EAAGC,EAAGmN,EAAMnN,GAE3CI,KAAK4M,MLOoB,IKNzB5M,KAAK2M,MLSoB,EKRzB3M,KAAK0M,MLEoB,IKDzB1M,KAAKiN,oBAAsB,EAC3BjN,KAAKkN,cAAgB,EAGrBlN,KAAKmN,YAAc,EACnBnN,KAAKoN,WAAa,EAClBpN,KAAKqN,WAAY,EACjBrN,KAAKsN,SAAU,EAEftN,KAAKN,KAAKS,IAAIC,SAASJ,MACvBA,KAAKN,KAAK6N,QAAQC,OAAOnM,OAAOrB,MAChCA,KAAKyN,KAAKC,QAAQ,GAAI,GAAI,EAAG,GAG7B1N,KAAK2N,WAAY,EACjB3N,KAAK4N,YAAa,EAClB5N,KAAK6N,SAAU,EACf7N,KAAK8N,WAAY,EACjB9N,KAAK+N,WAAY,EAEjBrO,EAAKsM,KAAKC,OAAOO,KLhCD,IKgCaxM,KAAKgO,oBAAoBjM,KAAK/B,OAE3DA,KAAKiO,WAAW9N,IAAI,KAAM,CAAC,EAAG,GAAI,IAAK,IAAI,GAC3CH,KAAKiO,WAAW9N,IAAI,OAAQ,CAAC,EAAG,EAAG,GAAI,IAAI,GAC3CH,KAAKiO,WAAW9N,IAAI,QAAS,CAAC,EAAG,EAAG,GAAI,IAAI,GAC5CH,KAAKiO,WAAW9N,IAAI,OAAQ,CAAC,EAAG,EAAG,GAAI,IAAI,GAE3CH,KAAKkO,KAAO,IAAI3D,EAAK,CAAE7K,KAAMM,KAAKN,KAAM8K,OAAQxK,OAEhDA,KAAKmO,iBACLnO,KAAKoO,WAAWrL,EAClB,CAEA6D,MAAAA,GACM5G,KAAKqO,QACPrO,KAAKsO,cACLtO,KAAKuO,cAKT,CAEAJ,cAAAA,GAEEnO,KAAKwO,MAAWxO,KAAKN,KAAKyB,MAAMsN,SAASC,OAAOlP,OAAOmP,SAASC,IAChE5O,KAAK6O,QAAW7O,KAAKN,KAAKyB,MAAMsN,SAASC,OAAOlP,OAAOmP,SAASG,MAChE9O,KAAK+O,QAAW/O,KAAKN,KAAKyB,MAAMsN,SAASC,OAAOlP,OAAOmP,SAASK,MAChEhP,KAAKiP,SAAWjP,KAAKN,KAAKyB,MAAMsN,SAASC,OAAOlP,OAAOmP,SAASO,OAGhElP,KAAKmP,KAAOnP,KAAKN,KAAKyB,MAAMsN,SAASC,OAAOlP,OAAOmP,SAASS,GAC5DpP,KAAKqP,KAAOrP,KAAKN,KAAKyB,MAAMsN,SAASC,OAAOlP,OAAOmP,SAASW,GAC5DtP,KAAKuP,KAAOvP,KAAKN,KAAKyB,MAAMsN,SAASC,OAAOlP,OAAOmP,SAASa,GAC5DxP,KAAKyP,KAAOzP,KAAKN,KAAKyB,MAAMsN,SAASC,OAAOlP,OAAOmP,SAASe,GAG5D1P,KAAK2P,SAAW3P,KAAKN,KAAKyB,MAAMsN,SAASC,OAAOlP,OAAOmP,SAASiB,SAClE,CAEAtB,WAAAA,GACEtO,KAAKyN,KAAKoC,SAASjE,IAAI,GACvB,IAAIkE,EAAkB,GAEtB,MAAMC,EAAiB/P,KAAK0M,OAAS1M,KAAKiN,qBAAuB,GAE3Db,EAAQpM,KAAK+O,QAAQiB,QAAYhQ,KAAKqP,MAAQrP,KAAKqP,KAAKW,QAAWhQ,KAAK2N,UACxEsC,EAAQjQ,KAAKiP,SAASe,QAAWhQ,KAAKyP,MAAQzP,KAAKyP,KAAKO,QAAWhQ,KAAK4N,WACxEsC,EAAQlQ,KAAKwO,MAAMwB,QAAchQ,KAAKmP,MAAQnP,KAAKmP,KAAKa,QAAWhQ,KAAK6N,QACxEsC,EAAQnQ,KAAK6O,QAAQmB,QAAYhQ,KAAKuP,MAAQvP,KAAKuP,KAAKS,QAAWhQ,KAAK8N,UAE1E1B,GACFpM,KAAKyN,KAAKoC,SAASlQ,GAAKoQ,EACxBD,EAAgBM,KAAK,SACZH,IACTjQ,KAAKyN,KAAKoC,SAASlQ,EAAIoQ,EACvBD,EAAgBM,KAAK,UAGnBF,GACFlQ,KAAKyN,KAAKoC,SAASjQ,GAAKmQ,EACxBD,EAAgBM,KAAK,OACZD,IACTnQ,KAAKyN,KAAKoC,SAASjQ,EAAImQ,EACvBD,EAAgBM,KAAK,SAGvB,IAAIC,EAAmBP,EAAgB,GACnCO,EACFrQ,KAAKiO,WAAWqC,KAAKD,GAIvBrQ,KAAKiO,WAAWsC,MAClB,CAEAhC,WAAAA,GAGE,GAFiBvO,KAAKN,KAAKyB,MAAMsN,SAASuB,OAAOxQ,OAAOmP,SAASiB,WAAa5P,KAAK+N,UAErE,CACZ,IAAI1B,EAAMrM,KAAKN,KAAKsM,KAAKK,IAErBA,EAAMrM,KAAKkN,gBACblN,KAAKkN,cAAgBb,EAAMrM,KAAK4M,MAEhCvG,aAAaM,KAAK,cAAe,CAAE6J,IAAKxQ,KAAKyQ,aAAcC,IAAK1Q,KAAK2Q,eAEzE,CACF,CAEAF,UAAAA,GACE,OAAO5L,KAAK+L,MAAM5Q,KAAKyN,KAAKoD,SAASlR,EAAIoH,EAC3C,CAEA4J,UAAAA,GACE,OAAO9L,KAAK+L,MAAM5Q,KAAKyN,KAAKoD,SAASjR,EAAImH,EAC3C,CAEAiH,mBAAAA,GACE,IAAI8C,EAAc,CAAEnR,EAAGK,KAAK6Q,SAASlR,EAAGC,EAAGI,KAAK6Q,SAASjR,GAErDI,KAAKgN,aAAarN,IAAMmR,EAAYnR,GAAKK,KAAKgN,aAAapN,IAAMkR,EAAYlR,IAC/EyG,aAAaM,KAAK,yBAA0BmK,GAC5C9Q,KAAKgN,aAAe8D,EAExB,CAEAC,WAAAA,GACE/Q,KAAKkO,KAAKzB,eACVzM,KAAKgR,MACP,CAEAC,SAAAA,CAAWC,GL9IQ,IK+IZA,GAAwBlR,KAAKmR,gBL9IjB,IK+IZD,GAAwBlR,KAAKoR,gBL9IjB,IK+IZF,GAAwBlR,KAAKqR,gBL9IhB,IK+IbH,GAAyBlR,KAAKsR,iBL9IjB,IK+IbJ,GAAyBlR,KAAKuR,eL9InB,IK+IXL,GAAuBlR,KAAKwR,aL9IhB,IK+IZN,GAAwBlR,KAAKyR,eACpC,CAEAC,UAAAA,GACE,OAAO1R,KAAKmN,aAAenN,KAAKN,KAAKsM,KAAKK,IAAMrM,KAAKmN,WACvD,CAEAwE,SAAAA,GACE,OAAO3R,KAAKoN,YAAcpN,KAAKN,KAAKsM,KAAKK,IAAMrM,KAAKoN,UACtD,CAEA+D,aAAAA,GACE,IAAI7Q,EAAQ,oBAERN,KAAK0M,MLtJY,MKuJnB1M,KAAK0M,MAAQ1M,KAAK0M,MLxJE,GKyJpB1M,KAAKkO,KAAKrC,mBACVvL,EAAQ,kBAGV,IAAI2C,EAAkB,CAAEvD,KAAMM,KAAKN,KAAMY,MAAOA,EAAOX,EAAGK,KAAK6Q,SAASlR,EAAGC,EAAGI,KAAK6Q,SAASjR,GAC9F,CAEAyR,aAAAA,GACE,IAAI/Q,EAAQ,oBAERN,KAAK4M,ML/JY,MKgKnB5M,KAAK4M,OLjKe,IKkKpB5M,KAAKkO,KAAKrC,mBACVvL,EAAQ,kBAGV,IAAI2C,EAAkB,CAAEvD,KAAMM,KAAKN,KAAMY,MAAOA,EAAOX,EAAGK,KAAK6Q,SAASlR,EAAGC,EAAGI,KAAK6Q,SAASjR,GAC9F,CAEAwR,aAAAA,GAGEpR,KAAK2M,OLzKiB,EK0KtB3M,KAAKkO,KAAKrC,mBAEV,IAAI5I,EAAkB,CAAEvD,KAAMM,KAAKN,KAAMY,MAL7B,iBAK2CX,EAAGK,KAAK6Q,SAASlR,EAAGC,EAAGI,KAAK6Q,SAASjR,GAC9F,CAEA0R,cAAAA,GACEtR,KAAKmN,YAAcnN,KAAKN,KAAKsM,KAAKK,IL1LJ,KK6L9BrM,KAAK4R,KAAO,QACZ5R,KAAKN,KAAKsM,KAAKC,OAAO9L,IL9LQ,KK8LgB,KAExCH,KAAK2R,WAAa3R,KAAK2R,aACzB3R,KAAK4R,KAAO,SACZ5R,KAAKqD,MAAQ,KAEbrD,KAAK4R,KAAO,WAIhB,IAAI3O,EAAkB,CAAEvD,KAAMM,KAAKN,KAAMY,MAAO,mBAAoBX,EAAGK,KAAK6Q,SAASlR,EAAGC,EAAGI,KAAK6Q,SAASjR,GAC3G,CAEA2R,YAAAA,GACEvR,KAAKqN,WAAY,EACjB,IAAIpK,EAAkB,CAAEvD,KAAMM,KAAKN,KAAMY,MAAO,oBAAqBX,EAAGK,KAAK6Q,SAASlR,EAAGC,EAAGI,KAAK6Q,SAASjR,GAC5G,CAEA4R,UAAAA,GACExR,KAAKsN,SAAU,EACf,IAAIrK,EAAkB,CAAEvD,KAAMM,KAAKN,KAAMY,MAAO,oBAAqBX,EAAGK,KAAK6Q,SAASlR,EAAGC,EAAGI,KAAK6Q,SAASjR,GAC5G,CAEA6R,aAAAA,GACEzR,KAAKoN,WAAapN,KAAKN,KAAKsM,KAAKK,ILrNJ,KKwN7BrM,KAAKqD,MAAQ,IACbrD,KAAK4R,KAAO,SAGR5R,KAAKkO,MAAQlO,KAAKkO,KAAKpC,WACzB9L,KAAKkO,KAAKpC,UAAU9L,KAAKoN,YAI3BpN,KAAKN,KAAKsM,KAAKC,OAAO9L,ILjOO,KKiOgB,KAC3CH,KAAKqD,MAAQ,EAEPrD,KAAK0R,YAAc1R,KAAK0R,eAC5B1R,KAAK4R,KAAO,UAEV5R,KAAKkO,MAAQlO,KAAKkO,KAAK3B,WACzBvM,KAAKkO,KAAK3B,cAId,IAAItJ,EAAkB,CAAEvD,KAAMM,KAAKN,KAAMY,MAAO,aAAcX,EAAGK,KAAK6Q,SAASlR,EAAGC,EAAGI,KAAK6Q,SAASjR,GACrG,CAEAwO,UAAAA,CAAWlM,GACT,IAAI2P,EAAa,IAAItS,EAAK,CACxBG,KAAMM,KAAKN,KACXC,EAAGoH,KACHnH,GAAI,GACJC,KAAM,KAAUqC,MAChBpC,MAAO,CACLwF,KAAM,aACNC,KAAM,UACJiB,OAAQ,UACRC,gBAAiB,KAIvBzG,KAAKe,SAAS8Q,EAChB,EChRa,MAAMC,UAAoBtS,OAAOsN,OAE9CrN,WAAAA,EAAY,KAAEC,EAAI,GAAEuC,EAAE,MAAE8K,EAAK,KAAEhK,IAC7BhD,MAAML,EAAMqN,EAAMpN,EAAGoN,EAAMnN,EAAG,aAAemD,GAE7C/C,KAAKN,KAAOA,EACZM,KAAKiC,GAAKA,EAEVjC,KAAK+R,gBAAkBhF,EACvB/M,KAAKgS,WAAa,EAElBhS,KAAKN,KAAK6N,QAAQC,OAAOnM,OAAOrB,MAChCA,KAAKyN,KAAKC,QAAQ,GAAI,GAAI,EAAG,GAC7B1N,KAAKyN,KAAKwE,WAAY,EAEtBjS,KAAKiO,WAAW9N,IAAI,KAAM,CAAC,EAAG,GAAI,IAAK,IAAI,GAC3CH,KAAKiO,WAAW9N,IAAI,OAAQ,CAAC,EAAG,EAAG,GAAI,IAAI,GAC3CH,KAAKiO,WAAW9N,IAAI,QAAS,CAAC,EAAG,EAAG,GAAI,IAAI,GAC5CH,KAAKiO,WAAW9N,IAAI,OAAQ,CAAC,EAAG,EAAG,GAAI,IAAI,GAE3CH,KAAKoO,WAAWrL,EAClB,CAEA6D,MAAAA,GACE,CAGFsL,IAAAA,CAAKpB,GACH9Q,KAAKgS,WAAahS,KAAKN,KAAKsM,KAAKK,IAEjCrM,KAAKmS,YAAYrB,GAEjB9Q,KAAKN,KAAKS,IAAIgD,MAAMnD,MAAMoD,GAAG0N,ENzBb,IMyBgCtR,OAAO4S,OAAOC,OAAOC,MAAM,EAC7E,CAEAH,WAAAA,CAAYrB,GACV,IAAIyB,EAAO,OACPC,EAAQ1B,EAAYnR,EAAIK,KAAK+R,gBAAgBpS,EAC7CqJ,EAAQ8H,EAAYlR,EAAII,KAAK+R,gBAAgBnS,EAE7C4S,EAAQ,EACVD,EAAO,OACEC,EAAQ,EACjBD,EAAO,QACEvJ,EAAQ,EACjBuJ,EAAO,KACEvJ,EAAQ,IACjBuJ,EAAO,QAGTvS,KAAKiO,WAAWqC,KAAKiC,GACrBvS,KAAK+R,gBAAkBjB,CACzB,CAEA1C,UAAAA,CAAWlM,GACT,IAAI2P,EAAa,IAAItS,EAAK,CACxBG,KAAMM,KAAKN,KACXC,EAAGoH,KACHnH,GAAI,GACJC,KAAMqC,EACNpC,MAAO,CACLwF,KAAM,aACNC,KAAM,UACJiB,OAAQ,UACRC,gBAAiB,KAIvBzG,KAAKe,SAAS8Q,EAChB,ECtEa,MAAMY,UAAajT,OAAOsN,OAEvCrN,WAAAA,CAAYC,EAAMuC,EAAIuO,EAAKE,GAIzB3Q,MAAML,EAHW8Q,EAAMzJ,EAAaA,KACnB2J,EAAM3J,EAAaA,KAEF,gBAClC/G,KAAK8D,MAAM5D,MAAM,IACjBF,KAAKC,OAAOC,MAAM,IAElBF,KAAKN,KAAOA,EACZM,KAAKiC,GAAKA,EAEVjC,KAAKN,KAAK6N,QAAQC,OAAOnM,OAAOrB,MAEhCA,KAAKN,KAAKS,IAAIgD,MAAMnD,KAAK8D,OAAOV,GAAG,CAAEzD,EAAG,IAAKC,EAAG,KPRtB,IOQ6CJ,OAAO4S,OAAOC,OAAOC,MAAM,GAElGtS,KAAKyN,KAAKwE,WAAY,EAEtBjS,KAAKiO,WAAW9N,IAAI,OAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,IAAK,GAAG,GAClEH,KAAKiO,WAAWqC,KAAK,OACvB,CAEA1J,MAAAA,GACE,ECxBW,MAAM8L,UAAclT,OAAOsN,OAExCrN,WAAAA,CAAYC,EAAMiT,GAGhB,IAAIC,EAAQ,ERKK,IQJbD,EAAMzB,aAAsB0B,EAAQ,GRKvB,IQJbD,EAAMzB,aAAsB0B,EAAQ,GRKvB,IQJbD,EAAMzB,aAAsB0B,EAAQ,GRKtB,IQJdD,EAAMzB,aAAuB0B,EAAQ,GRKvB,IQJdD,EAAMzB,aAAuB0B,EAAQ,GRKzB,IQJZD,EAAMzB,aAAqB0B,EAAQ,GRKtB,IQJbD,EAAMzB,aAAsB0B,EAAQ,GAExC7S,MAAML,EAAOiT,EAAMnC,IAAMzJ,EAAa4L,EAAMjC,IAAM3J,EAAY,gBAAiB6L,GAE/E5S,KAAKiC,GAAK0Q,EAAM1Q,GAEhBjC,KAAKN,KAAK6N,QAAQC,OAAOnM,OAAOrB,MAGhCA,KAAKqD,MAAQ,IACbrD,KAAK8D,MAAM5D,MAAM,GACjB,IACE,MAAM2S,EAAK7S,KAAKN,KAAKS,IAAIgD,MAAMnD,MAAMoD,GAAG,CAAEC,MAAO,KAAQ,IAAK7D,OAAO4S,OAAOU,WAAWC,OAAO,EAAM,GAAI,GAAG,GACrGC,EAAKhT,KAAKN,KAAKS,IAAIgD,MAAMnD,KAAK8D,OAAOV,GAAG,CAAEzD,EAAG,KAAMC,EAAG,MAAQ,IAAKJ,OAAO4S,OAAOU,WAAWC,OAAO,EAAM,GAAI,GAAG,GAEtH/S,KAAKiT,WAAaJ,EAClB7S,KAAKkT,YAAcF,CACrB,CAAE,MAAO/N,GAAI,CACf,EC9Ba,MAAMkO,UAAkB3T,OAAOsN,OAE5CrN,WAAAA,CAAYC,EAAM0T,GAChBrT,MAAML,EAAO0T,EAAK5C,IAAMzJ,EAAaqM,EAAK1C,IAAM3J,EAAYqM,EAAKC,KAAM,GAEvErT,KAAKN,KAAOA,EAEZM,KAAKiO,WAAW9N,IAAI,QAAS,CAAC,EAAG,EAAG,EAAG,EAAG,IAG1CH,KAAKsQ,KAAK,QAAS,IAAI,GAAO,GAE9BtQ,KAAKN,KAAK6N,QAAQC,OAAOnM,OAAOrB,KAClC,ECba,MAAMsT,UAAa9T,OAAOsN,OAEvCrN,WAAAA,CAAYC,EAAM8Q,EAAKE,GACrB3Q,MAAML,EAAO8Q,EAAMzJ,EAAa2J,EAAM3J,EAAY,eACpD,ECIF,MAAMwM,UAAa/T,OAAOkE,MACxByC,IAAAA,CAAKzG,GACHM,KAAKwT,YAAc9T,CACrB,CAEAiE,MAAAA,GACE3D,KAAKyT,YACLzT,KAAK0T,gBACL1T,KAAK2T,mBAGD3T,KAAKwK,QACPxK,KAAKN,KAAKkU,OAAOC,OAAO7T,KAAKwK,QAG/BxK,KAAK8T,sBAGL9T,KAAK+T,UAAY/T,KAAKN,KAAKS,IAAI8F,MAAM,cACrCjG,KAAKgU,SAAWhU,KAAKN,KAAKS,IAAI8F,MAAM,aAEpCjG,KAAKN,KAAKsM,KAAKC,OAAOO,KAAK,IAAMxM,KAAKiU,kBAAkBlS,KAAK/B,MAC/D,CAEA4G,MAAAA,GACE5G,KAAKkU,wBAELlU,KAAKN,KAAK6N,QAAQC,OAAO2G,QAAQnU,KAAKwK,OAAQxK,KAAKoU,YACnDpU,KAAKN,KAAK6N,QAAQC,OAAO2G,QAAQnU,KAAKwK,OAAQxK,KAAKqU,SACnDrU,KAAKN,KAAK6N,QAAQC,OAAO2G,QAAQnU,KAAKwK,OAAQxK,KAAKsU,MAAOtU,KAAKuU,eAAgB,KAAMvU,MAErFA,KAAKN,KAAK6N,QAAQC,OAAOgH,QAAQxU,KAAKwK,OAAQxK,KAAKyU,OAAQzU,KAAK0U,gBAAiB,KAAM1U,MACvFA,KAAKN,KAAK6N,QAAQC,OAAOgH,QAAQxU,KAAKwK,OAAQxK,KAAK2U,OAAQ3U,KAAK4U,gBAAiB,KAAM5U,MAEvFA,KAAK6U,oBACP,CAEApB,SAAAA,GACEzT,KAAK8U,IAAM9U,KAAKG,IAAI2F,QAAQ9F,KAAKwT,YAAYzL,UAE7C/H,KAAK8U,IAAIC,gBXjDU,SWmDnB/U,KAAKoU,WAAapU,KAAK8U,IAAIE,YXlDR,UWmDnBhV,KAAKoU,WAAWa,cAEhBjV,KAAKkV,oBAAsBlV,KAAKoU,WAAWe,MAAMC,WAAWC,gBAAkB,IAAIC,QAClFtV,KAAKuV,cAAgBvV,KAAKoU,WAAWe,MAAMC,WAAWI,KACtDxV,KAAKyV,cAAgBzV,KAAKoU,WAAWe,MAAMC,WAAWM,KAEtD1V,KAAK8U,IAAIa,aAAa3V,KAAKkV,oBAAoB,EAAMlV,KAAKoU,YAC1DpU,KAAK4V,wBAAyB,EAG9B5V,KAAK6V,YAAc,GACnB7V,KAAK8V,WAAa,IAAIC,IAGtB/V,KAAKgW,UAAYhW,KAAKN,KAAKS,IAAIyK,QAE/B,MAAMuK,EAAQnV,KAAK8U,IAAImB,OAAO,GACxB1R,EAAI4Q,EAAMrT,MACV4C,EAAIyQ,EAAMnS,OACVkT,EAAOf,EAAMe,KAEnB,IAAK,IAAIC,EAAI,EAAGA,EAAIzR,EAAGyR,IACrB,IAAK,IAAIC,EAAI,EAAGA,EAAI7R,EAAG6R,IAAK,CAC1B,MAAMC,EAAOH,EAAKC,GAAGC,GACrB,IAAKC,EAAM,SACX,MAAMC,EAAMD,EAAKE,MXvEE,IWyEfD,EACFtW,KAAK6V,YAAYzF,KAAK,CAAEI,IAAK4F,EAAG1F,IAAKyF,IXzEf,IW0EbG,GACTtW,KAAK8V,WAAW3V,IAAI,GAAGiW,KAAKD,IAEhC,CAKF,IAAK,MAAMK,KAAKxW,KAAK6V,YAAa,CAChC,MAAMlW,EAAI6W,EAAEhG,IAAMzJ,EACZnH,EAAI4W,EAAE9F,IAAM3J,EACZnC,EAAI5E,KAAKN,KAAKS,IAAIsW,OAAO9W,EAAGC,EAAG,aACrCgF,EAAEvB,MAAQ,IACVuB,EAAE8R,UAAYlX,OAAOmX,WAAWC,IAChChS,EAAEqJ,WAAW9N,IAAI,OAAQ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,IAAI,GACjDyE,EAAEqJ,WAAWqC,KAAK,QAClBtQ,KAAKgW,UAAU7V,IAAIyE,EACrB,CAEA,IAAK,MAAMiS,KAAO7W,KAAK8V,WAAY,CACjC,MAAOM,EAAGD,GAAKU,EAAIC,MAAM,KAAKhC,IAAIiC,QAC5BpX,EAAIyW,EAAIrP,EACRnH,EAAIuW,EAAIpP,EACRnC,EAAI5E,KAAKN,KAAKS,IAAIsW,OAAO9W,EAAGC,EAAG,YACrCgF,EAAEvB,MAAQ,IACVuB,EAAEqJ,WAAW9N,IAAI,OAAQ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,IAAI,GACjDyE,EAAEqJ,WAAWqC,KAAK,QAClBtQ,KAAKgW,UAAU7V,IAAIyE,EACrB,CAEA5E,KAAKwK,OAAU,KACfxK,KAAKgX,MAAUhX,KAAKN,KAAKS,IAAIyK,QAC7B5K,KAAKsU,MAAUtU,KAAKN,KAAKS,IAAIyK,QAC7B5K,KAAKyU,OAAUzU,KAAKN,KAAKS,IAAIyK,QAC7B5K,KAAK2U,OAAU3U,KAAKN,KAAKS,IAAIyK,QAC7B5K,KAAKqU,QAAUrU,KAAKN,KAAKS,IAAIyK,QAE7B5K,KAAKN,KAAK6N,QAAQC,OAAOnM,OAAOrB,KAAKoU,WACvC,CAEAV,aAAAA,GACE,IAAK,IAAIlJ,KAAUT,OAAOC,OAAOhK,KAAKwT,YAAYjR,SAAU,CAC1D,IAAI0U,EAAQ,CACVvX,KAAQM,KAAKN,KACbuC,GAAQuI,EAAOvI,GACf8K,MAAQvC,EAAOuC,MACfhK,KAAQyH,EAAOzH,MAGbyH,EAAOvI,KAAOoE,aAAapE,GAC7BjC,KAAKwK,OAAS,IAAIqC,EAAOoK,GAEzBjX,KAAKqU,QAAQlU,IAAI,IAAI2R,EAAYmF,GAErC,CACF,CAEAtD,gBAAAA,GACEtN,aAAaC,GAAG,cAAetG,KAAKkX,aAAanV,KAAK/B,OACtDqG,aAAaC,GAAG,aAActG,KAAKmX,YAAYpV,KAAK/B,OACpDqG,aAAaC,GAAG,YAAatG,KAAKoX,WAAWrV,KAAK/B,OAClDqG,aAAaC,GAAG,gBAAiBtG,KAAKqX,eAAetV,KAAK/B,OAC1DqG,aAAaC,GAAG,YAAatG,KAAKsX,WAAWvV,KAAK/B,OAClDqG,aAAaC,GAAG,mBAAoBtG,KAAKuX,iBAAiBxV,KAAK/B,OAC/DqG,aAAaC,GAAG,aAActG,KAAKwX,YAAYzV,KAAK/B,OACpDqG,aAAaC,GAAG,oBAAqBtG,KAAKyX,mBAAmB1V,KAAK/B,MACpE,CAEA0U,eAAAA,CAAgBlK,EAAQmI,GACtBtM,aAAaM,KAAK,gBAAiB,CAAE+Q,SAAU/E,EAAM1Q,KACrD0Q,EAAM3B,MACR,CAEA4D,eAAAA,CAAgBpK,EAAQmN,GACjBnN,EAAO6D,QAER7D,EAAOkH,YAAclH,EAAOkH,eAEhCrL,aAAaM,KAAK,cAAe,CAAE6J,IAAKhG,EAAOiG,aAAcC,IAAKlG,EAAOmG,eACzEnG,EAAOuG,eACT,CAEAmG,YAAAA,EAAa,UAAEU,EAAS,EAAEjY,EAAC,EAAEC,IAC3B,IAAIiY,EAAQ3N,EAAS0N,EAAW5X,KAAKqU,SAChCwD,GAELA,EAAM3F,KAAK,CAAEvS,EAAGA,EAAGC,EAAGA,GACxB,CAEA2U,cAAAA,CAAe/J,EAAQsN,GACrB,IAAKtN,IAAWsN,EAAM,OACtB,IAAKtN,EAAO8C,QAAS,OAGrB,MAAMlB,EAAQ5B,EAAOuE,QAAQiB,QAAYxF,EAAO6E,MAAQ7E,EAAO6E,KAAKW,QAAWxF,EAAOmD,UAChFsC,EAAQzF,EAAOyE,SAASe,QAAWxF,EAAOiF,MAAQjF,EAAOiF,KAAKO,QAAWxF,EAAOoD,WAChFsC,EAAQ1F,EAAOgE,MAAMwB,QAAcxF,EAAO2E,MAAQ3E,EAAO2E,KAAKa,QAAWxF,EAAOqD,QAChFsC,EAAQ3F,EAAOqE,QAAQmB,QAAYxF,EAAO+E,MAAQ/E,EAAO+E,KAAKS,QAAWxF,EAAOsD,UAEtF,IAAIiK,EAAM,KAMV,GALI3L,EAAM2L,EAAM,OACP9H,EAAO8H,EAAM,QACb7H,EAAI6H,EAAM,KACV5H,IAAM4H,EAAM,SAEhBA,EAAK,OAGV,MAAM1L,EAAMrM,KAAKN,KAAKsM,KAAKK,IACtB7B,EAAOwN,cAAaxN,EAAOwN,YAAc,GAC1C3L,EAAM7B,EAAOwN,YAAc,MAC/BxN,EAAOwN,YAAc3L,EAErBhG,aAAaM,KAAK,YAAa,CAAEsR,QAASH,EAAK7V,GAAI8V,QACrD,CAEAT,UAAAA,EAAW,QAAEW,EAAO,IAAEzH,EAAG,IAAEE,IACzB,MAAMwH,EAAIhO,EAAS+N,EAASjY,KAAKsU,OACjC,IAAK4D,EAAG,OAER,MAAMvY,EAAK6Q,EAAMzJ,EAAaA,KACxBnH,EAAK8Q,EAAM3J,EAAaA,KAC9BmR,EAAEvY,EAAIA,EACNuY,EAAEtY,EAAIA,EACFsY,EAAEzK,MACJyK,EAAEzK,KAAK0K,MAAMxY,EAAGC,EAEpB,CAEAqU,iBAAAA,GACE,IAAK,IAAI4D,KAAS7X,KAAKqU,QAAQhK,SACzBwN,EAAM7F,WAAahS,KAAKN,KAAKsM,KAAKK,IAAM,KAC1CwL,EAAM5J,WAAWsC,MAGvB,CAEAuD,mBAAAA,GACE,IAAK9T,KAAKwK,OAAQ,OAQlB,KAJGxK,KAAKN,KAAK0Y,SAAWpY,KAAKN,KAAK0Y,OAAOC,OAASrY,KAAKN,KAAK0Y,OAAOE,KAAOtY,KAAKN,KAAK0Y,OAAOG,UACtE,oBAAX/T,QAA2B,iBAAkBA,QAC/B,oBAAdgU,WAA8BA,UAAUC,eAAiB,GAE9C,OAErB,MAAMC,EAAI1Y,KAAKN,KAAKS,IAAIyK,QACxB8N,EAAE7N,eAAgB,EAClB6N,EAAEC,aAAazY,MAAM,EAAG,GAExB,MAuBMqE,EAAIvE,KAAKN,KAAKoC,MACd4C,EAAI1E,KAAKN,KAAKsD,OAGd4V,EAAgB,MACpB,IACE,MAAMC,EAAIC,iBAAiBC,SAASC,iBAAiBC,iBAAiB,+BAChEvP,EAAIwP,UAAUL,GAAK,KAAKM,WAAWC,QAAQ,KAAM,IAAIC,OAAQ,IACnE,OAAOtC,OAAOuC,SAAS5P,GAAKA,EAAI,CAClC,CAAE,MAAOzE,GACP,OAAO,CACT,CACD,EARqB,GAUhBsU,EAAY1U,KAAKC,IAAI,GAAI8T,EAAgB,IAGzChU,EAAIC,KAAKC,IAAI,IAAMD,KAAK8E,IAAI,KAAM9E,KAAK8E,IAAIpF,EAAGG,GAAK,MAGnD8U,EAAQ,IAAM5U,EACd6U,EAAQ/U,EAAK,IAAME,EAAK2U,EACxBG,EAAQ,GAAK9U,EACb+U,EAAQ,GAAK/U,EAEbgV,EAAO5Z,KAAKN,KAAKS,IAAI0Z,SAAS,EAAG,GACvCD,EAAKE,UAAU,QAAU,KACzBF,EAAKG,UAAU,EAAG,SAAU,KAC5BH,EAAKI,WAAW,EAAG,EAAW,EAARN,GACtBE,EAAKK,UACLL,EAAKja,EAAI6Z,EACTI,EAAKha,EAAI6Z,EACTG,EAAK1Y,cAAe,EACpB0Y,EAAKzY,MAAM+Y,YAAW,GACtBxB,EAAEvY,IAAIyZ,GAEN,MAAMO,EAAOna,KAAKN,KAAKS,IAAI0Z,SAAS,EAAG,GACvCM,EAAKL,UAAU,MAAU,KACzBK,EAAKJ,UAAU,EAAG,MAAU,KAC5BI,EAAKH,WAAW,EAAG,EAAW,EAARL,GACtBQ,EAAKF,UACLE,EAAKxa,EAAI6Z,EACTW,EAAKva,EAAI6Z,EACTf,EAAEvY,IAAIga,GAEN,MAAMC,EAAWA,KACfpa,KAAKwK,OAAOmD,UAAY3N,KAAKwK,OAAOoD,WAAa5N,KAAKwK,OAAOqD,QAAU7N,KAAKwK,OAAOsD,WAAY,GAG3FuM,EAAmBA,CAACC,EAAIC,KAG5B,GAFAH,IAEIvV,KAAK2V,IAAIF,GADA,IACczV,KAAK2V,IAAID,GADvB,GAIX,OAFAJ,EAAKxa,EAAI6Z,OACTW,EAAKva,EAAI6Z,GAKP5U,KAAK2V,IAAIF,GAAMzV,KAAK2V,IAAID,IACtBD,EAAK,EAAGta,KAAKwK,OAAOoD,YAAa,EAChC5N,KAAKwK,OAAOmD,WAAY,EAC7BwM,EAAKxa,EAAI6Z,EAAQ3U,KAAKC,KAAK4U,EAAQC,EAAO9U,KAAK8E,IAAI+P,EAAQC,EAAOW,IAClEH,EAAKva,EAAI6Z,IAELc,EAAK,EAAGva,KAAKwK,OAAOsD,WAAY,EAC/B9N,KAAKwK,OAAOqD,SAAU,EAC3BsM,EAAKxa,EAAI6Z,EACTW,EAAKva,EAAI6Z,EAAQ5U,KAAKC,KAAK4U,EAAQC,EAAO9U,KAAK8E,IAAI+P,EAAQC,EAAOY,MAIhEE,EAAaC,IACjB,MAAMJ,EAAKI,EAAQ/a,EAAI6Z,EACjBe,EAAKG,EAAQ9a,EAAI6Z,EACjBkB,EAAM9V,KAAK+V,KAAKN,EAAKA,EAAKC,EAAKA,IAAO,EACtCzV,EAAM4U,EAAQC,EACdkB,EAAUhW,KAAK8E,IAAI7E,EAAK6V,GAG9BN,EAFaC,EAAKK,EAAOE,EACZN,EAAKI,EAAOE,IAI3BjB,EAAK3N,OAAO6O,YAAY3a,IAAI,CAACsW,EAAQiE,IAAYD,EAAUC,IAC3Dd,EAAK3N,OAAO8O,UAAU5a,IAAI,KAAQia,IAAYD,EAAKxa,EAAI6Z,EAAOW,EAAKva,EAAI6Z,IACvEG,EAAK3N,OAAO+O,WAAW7a,IAAI,KAAQia,IAAYD,EAAKxa,EAAI6Z,EAAOW,EAAKva,EAAI6Z,IAGxEzZ,KAAKN,KAAKyB,MAAM8Z,gBAAiBP,IAC1BA,EAAQ1K,QACbyK,EAAUC,IACT1a,MAlHWkb,GAAGvb,IAAGC,IAAGuW,IAAI,GAAIrV,QAAOqa,SAAQC,OAAM7V,OAAO,QAAUlC,QAAQ,IAAMmD,SAAS,SAAU6U,cAAc,QAClH,MAAMC,EAAMtb,KAAKN,KAAKS,IAAI0Z,SAAS,EAAG,GACtCyB,EAAIxB,UAAUvU,EAAMlC,GACpBiY,EAAIvB,UAAU,EAAGvT,EAAQ6U,GACzBC,EAAItB,WAAW,EAAG,EAAO,EAAJ7D,GACrBmF,EAAIrB,UACJqB,EAAI3b,EAAIA,EACR2b,EAAI1b,EAAIA,EAER,MAAM2b,EAAIvb,KAAKN,KAAKS,IAAIN,KAAK,EAAG,EAAGiB,EAAO,CAAEwE,KAAM,aAAcC,KAAM,YACtEgW,EAAEtb,OAAOC,MAAM,IACfob,EAAIva,SAASwa,GAEbD,EAAIpa,cAAe,EACnBoa,EAAIrP,OAAO6O,YAAY3a,IAAI,IAAMgb,GAAUA,KAC3C,MAAMjL,EAAKA,IAAMkL,GAAQA,IACzBE,EAAIrP,OAAO8O,UAAU5a,IAAI+P,GACzBoL,EAAIrP,OAAO+O,WAAW7a,IAAI+P,GAE1BwI,EAAEvY,IAAImb,IAkGRJ,CAAM,CACJvb,EAAG4E,EAAK,IAAMK,EACdhF,EAAG8E,EAAK,IAAME,EAAK2U,EACnBpD,EAAG,GAAKvR,EACR9D,MAAO,KACPyE,KAAM,QACNlC,MAAO,IACPmD,OAAQ,MACR6U,YAAa,IACbF,OAAQA,IAAOnb,KAAKwK,OAAOuD,WAAY,EACvCqN,KAAMA,IAAOpb,KAAKwK,OAAOuD,WAAY,IAIvC/N,KAAKN,KAAKoE,MAAM0X,aAAarb,IAAI,KACpBH,KAAKN,KAAKoC,MACV9B,KAAKN,KAAKsD,OAGrB0V,EAAEvW,SAAQ,GACVnC,KAAK8T,uBAET,CAEAI,qBAAAA,GACE,IAAKlU,KAAKwK,OAAQ,OAElB,MAAMiR,EAAQzb,KAAKwK,OAAOmH,WAAa3R,KAAKwK,OAAOmH,YAC/C8J,IAAUzb,KAAK4V,yBAInB5V,KAAK4V,uBAAyB6F,EAE1BA,GACFzb,KAAK8U,IAAIa,aAAa,CAAC3V,KAAKuV,gBAAgB,EAAMvV,KAAKoU,YAC7B,MAAtBpU,KAAKyV,eACPzV,KAAK8U,IAAIa,aAAa,CAAC3V,KAAKyV,gBAAgB,EAAOzV,KAAKoU,aAG1DpU,KAAK8U,IAAIa,aAAa3V,KAAKkV,oBAAoB,EAAMlV,KAAKoU,YAE9D,CAEAS,kBAAAA,GACE,IAAK7U,KAAKwK,OAAQ,OAElB,MAAMgG,EAAM3L,KAAK+L,MAAM5Q,KAAKwK,OAAOiD,KAAKoD,SAASlR,EAAIoH,GAC/C2J,EAAM7L,KAAK+L,MAAM5Q,KAAKwK,OAAOiD,KAAKoD,SAASjR,EAAImH,GAG/C2U,EAAU1b,KAAK8V,WAAW6F,IAAI,GAAGnL,KAAOE,KAI9C,GAHA1Q,KAAKwK,OAAOyC,oBAAsByO,EAAU,KAAO,EAE9C1b,KAAKwK,OAAOoR,cAAa5b,KAAKwK,OAAOoR,aAAc,GACpDF,IAAY1b,KAAKwK,OAAOoR,YAC1B,IAAU5b,KAAKgU,UAAUhU,KAAKgU,SAAS1D,MAAQ,CAAE,MAAOrL,GAAI,CAK9D,GAHAjF,KAAKwK,OAAOoR,YAAcF,EAGtB1b,KAAK6V,YAAY5L,QAAU,EAAG,CAChC,MAAMoC,EAAMrM,KAAKN,KAAKsM,KAAKK,IACtBrM,KAAKwK,OAAOqR,gBAAe7b,KAAKwK,OAAOqR,cAAgB,GAE5D,MAAMC,EAAc9b,KAAK6V,YAAYkG,UAAUvF,GAAKA,EAAEhG,MAAQA,GAAOgG,EAAE9F,MAAQA,GAC/E,GAAIoL,GAAe,GAAKzP,EAAMrM,KAAKwK,OAAOqR,cAAgB,IAAK,CAC7D,MAAMG,EAAaF,EAAc,GAAM,EAAKA,EAAc,EAAIA,EAAc,EACtEG,EAASjc,KAAK6V,YAAYmG,GAChC,GAAIC,EAAQ,CAEVjc,KAAKwK,OAAO7K,EAAIsc,EAAOzL,IAAMzJ,EAC7B/G,KAAKwK,OAAO5K,EAAIqc,EAAOvL,IAAM3J,EAC7B/G,KAAKwK,OAAOiD,KAAKoC,SAASjE,IAAI,GAC9B5L,KAAKwK,OAAOiD,KAAK0K,MAAMnY,KAAKwK,OAAO7K,EAAGK,KAAKwK,OAAO5K,GAClDI,KAAKwK,OAAOwC,aAAe,CAAErN,EAAGK,KAAKwK,OAAO7K,EAAGC,EAAGI,KAAKwK,OAAO5K,GAC9DI,KAAKwK,OAAOqR,cAAgBxP,EAE5B,IAAUrM,KAAK+T,WAAW/T,KAAK+T,UAAUzD,MAAQ,CAAE,MAAOrL,GAAI,CAChE,CACF,CACF,CACF,CAEAmS,UAAAA,EAAW,QAAEa,EAAO,IAAEzH,EAAG,IAAEE,IACzB1Q,KAAKsU,MAAMnU,IAAI,IAAIsS,EAAKzS,KAAKN,KAAMuY,EAASzH,EAAKE,GACnD,CAEA2G,cAAAA,EAAe,QAAEY,EAAO,aAAEiE,IAExB5R,EAAmB2N,EAASjY,KAAKsU,OAGjC,IAAK,IAAIlB,KAAQ8I,EACflc,KAAK2U,OAAOxU,IAAI,IAAIgT,EAAUnT,KAAKN,KAAM0T,IAI3C,IAAK,IAAIA,KAAQ8I,EACV9I,EAAK+I,WAEVnc,KAAK8U,IAAIsH,QAAQpc,KAAKoU,WAAWe,MAAMC,WAAWiH,MAAOjJ,EAAK5C,IAAK4C,EAAK1C,IAAK1Q,KAAKoU,YAIpF,IAAK,IAAIhB,KAAQ8I,EACV9I,EAAK+I,WACL/I,EAAKT,OAEV3S,KAAKyU,OAAOtU,IAAI,IAAIuS,EAAM1S,KAAKN,KAAM0T,EAAKT,OAE9C,CAEA4E,gBAAAA,EAAiB,UAAEK,EAAS,SAAEF,EAAQ,WAAExG,IAClC0G,IAAc5X,KAAKwK,OAAOvI,IAC5BjC,KAAKwK,OAAOyG,UAAUC,GAGxB5G,EAAmBoN,EAAU1X,KAAKyU,OACpC,CAEA+C,WAAAA,EAAY,UAAEI,EAAS,IAAEpH,EAAG,IAAEE,IAC5B1Q,KAAKgX,MAAM7W,IAAI,IAAImT,EAAKtT,KAAKN,KAAM8Q,EAAKE,IAExCpG,EAAmBsN,EAAW5X,KAAKqU,QACrC,CAEA8C,WAAAA,CAAYjP,GACV7B,aAAaM,KAAK,cAGlB,MAAM2V,EAAepU,GAAWA,EAAQnF,KAAQmF,EAAQnF,KAAOmF,EAE/DlI,KAAKwF,MAAMhC,MAAM,OAAO,GAAM,EAAO8Y,EACvC,CAEA7E,kBAAAA,EAAmB,UAAEG,IACnBtN,EAAmBsN,EAAW5X,KAAKqU,SAE/BrU,KAAKqU,QAAQhK,SAASJ,QAAU,GAEpCjK,KAAKmX,aACP,EAGF,UC9eA,MAAMoF,UAAY/c,OAAOkE,MAEvByC,IAAAA,CAAKmW,GACHtc,KAAK+C,KAAOuZ,CACd,CAEA3Y,MAAAA,GACE,IAAIpE,EAAK,CACPG,KAAMM,KAAKN,KACXC,EAAGK,KAAKN,KAAKyF,MAAMC,QACnBxF,EAAGI,KAAKN,KAAKyF,MAAME,QACnBxF,KAAMG,KAAKwc,aACX1c,MAAO,CACLwF,KAAM,aACNC,KAAM,YAGZ,CAEAqB,MAAAA,GACM5G,KAAKN,KAAKyB,MAAMsN,SAASuB,OAAOxQ,OAAOmP,SAAS8N,QAClDzc,KAAK0c,cAET,CAEAA,YAAAA,GACE1c,KAAKwF,MAAMhC,MAAM,OACnB,CAEAgZ,UAAAA,GACE,OAAIxc,KAAK+C,KACA,YAAY/C,KAAK+C,iDAGnB,oDACT,EAGF,UChCA,MAAM4Z,UAAand,OAAOmd,KACxBld,WAAAA,GAGEM,MAAM,IAAK,IAAKP,OAAOod,KAAM,kBAG7B5c,KAAK6c,OAAwB,iBAAI,EAEjC7c,KAAKwF,MAAMrF,IAAI,OAAgBsD,GAC/BzD,KAAKwF,MAAMrF,IAAI,UAAgBsF,GAC/BzF,KAAKwF,MAAMrF,IAAI,OAAgB+F,GAC/BlG,KAAKwF,MAAMrF,IAAI,YAAgB6G,GAC/BhH,KAAKwF,MAAMrF,IAAI,cAAgBmI,GAC/BtI,KAAKwF,MAAMrF,IAAI,OAAgBoT,GAC/BvT,KAAKwF,MAAMrF,IAAI,MAAgBoc,GAE/Bvc,KAAKwF,MAAMhC,MAAM,OACnB,EAGF,IAAImZ,C","sources":["webpack://bombattack/./client/js/helpers/elements.js","webpack://bombattack/./client/js/states/boot.js","webpack://bombattack/./client/js/states/preload.js","webpack://bombattack/./client/js/states/menu.js","webpack://bombattack/./client/js/utils/constants.js","webpack://bombattack/./client/js/states/select_map.js","webpack://bombattack/./client/js/states/pending_game.js","webpack://bombattack/./client/js/utils/utils.js","webpack://bombattack/./client/js/entities/info.js","webpack://bombattack/./client/js/entities/player.js","webpack://bombattack/./client/js/entities/enemy_player.js","webpack://bombattack/./client/js/entities/bomb.js","webpack://bombattack/./client/js/entities/spoil.js","webpack://bombattack/./client/js/entities/fire_blast.js","webpack://bombattack/./client/js/entities/bone.js","webpack://bombattack/./client/js/states/play.js","webpack://bombattack/./client/js/states/win.js","webpack://bombattack/./client/js/app.js"],"sourcesContent":["export class Text extends Phaser.Text {\n\n  constructor({ game, x, y, text, style }) {\n    super(game, x, y, text, style);\n    this.anchor.setTo(0.5);\n\n    this.game.add.existing(this);\n  }\n\n}\n\nexport class Button extends Phaser.Button {\n\n  constructor({ game, x, y, asset, callback, callbackContext, overFrame, outFrame, downFrame, upFrame }) {\n    super(game, x, y, asset, callback, callbackContext, overFrame, outFrame, downFrame, upFrame);\n    this.anchor.setTo(0.5);\n\n    this.game.add.existing(this);\n  }\n\n}\n\nexport class TextButton extends Phaser.Button {\n\n  constructor({ game, x, y, asset, callback, callbackContext, overFrame, outFrame, downFrame, upFrame, label, style }) {\n    super(game, x, y, asset, callback, callbackContext, overFrame, outFrame, downFrame, upFrame);\n    this.anchor.setTo(0.5);\n\n    this.text = new Phaser.Text(this.game, 0, 0, label, style);\n    this.text.anchor.setTo(0.5);\n\n    this.addChild(this.text);\n\n    this.game.add.existing(this);\n  }\n\n  disable() {\n    this.setFrames(3, 3);\n    this.inputEnabled = false;\n    this.input.useHandCursor = false;\n  }\n\n  enable() {\n    this.setFrames(1, 0, 2);\n    this.inputEnabled = true;\n    this.input.useHandCursor = true;\n  }\n\n}\n\nexport class GameSlots extends Phaser.Group {\n\n  constructor({ game, availableGames, callback, callbackContext, x, y, style }) {\n    super(game);\n\n    let game_slot_asset = 'slot_backdrop'\n    let game_enter_asset = 'list_icon'\n\n    let yOffset = y;\n\n    for (let availableGame of availableGames) {\n      let gameBox = new Phaser.Image(this.game, x, yOffset, game_slot_asset)\n      let button = new Phaser.Button(this.game, gameBox.width - 100, 12, game_enter_asset, callback.bind(callbackContext, { game_id: availableGame.id }), null, 1, 0, 2, 1);\n      let text = new Phaser.Text(this.game, 30, 25, `Join Game: ${availableGame.name}`, style);\n\n      gameBox.addChild(button);\n      gameBox.addChild(text);\n\n      this.add(gameBox);\n\n      yOffset += 105;\n    }\n  }\n\n  destroy() {\n    this.callAll('kill') // destroy\n  }\n}\n\nexport class PlayerSlots extends Phaser.Group {\n\n  constructor({ game, max_players, players, x, y, asset_empty, asset_player, style }) {\n    super(game);\n\n    let xOffset = x;\n\n    for (let i = 0; i < max_players; i++) {\n      let slotBox\n      let slotName\n      let _player = players[i]\n\n      if (_player) {\n        slotBox = new Phaser.Image(this.game, xOffset, y, asset_player+_player.skin)\n        slotName = new Phaser.Text(this.game, slotBox.width/2, slotBox.height + 15, _player.skin, style);\n        slotName.anchor.setTo(0.5);\n        slotBox.addChild(slotName);\n      } else {\n        slotBox = new Phaser.Image(this.game, xOffset, y, asset_empty)\n      }\n\n      this.add(slotBox);\n      xOffset += 170;\n    }\n  }\n\n  destroy() {\n    this.callAll('kill')\n  }\n}\n\nexport class SpoilNotification extends Phaser.Group {\n\n  constructor({ game, asset, x, y }) {\n    super(game)\n\n    this.picture = new Phaser.Image(this.game, x, y - 20, asset);\n    this.picture.anchor.setTo(0.5);\n\n    this.add(this.picture);\n\n    this.tween = this.game.add.tween(this.picture);\n    this.tween.to({ y: this.picture.y - 25, alpha: 0 }, 600);\n\n    this.tween.onComplete.add(this.finish, this);\n\n    this.tween.start()\n  }\n\n  finish() {\n    this.callAll('kill')\n  }\n}\n","import { Text } from '../helpers/elements';\n\nclass Boot extends Phaser.State {\n\n  create() {\n    // Make the game keep reacting to messages from the server even when the game window doesnâ€™t have focus.\n    // The game pauses when I open a new tab in the same window, but does not pause when I focus on another application\n    this.game.stage.disableVisibilityChange = true;\n\n    // Responsive scaling (mobile-friendly, no distortion)\n    // Use USER_SCALE with a \"cover\" strategy:\n    // - keep aspect ratio (no stretch)\n    // - fill the screen (may crop a bit)\n    this.game.scale.scaleMode = Phaser.ScaleManager.USER_SCALE;\n    this.game.scale.pageAlignHorizontally = true;\n    this.game.scale.pageAlignVertically = true;\n\n    const baseW = this.game.width;\n    const baseH = this.game.height;\n\n    const applyCoverScale = () => {\n      const w = window.innerWidth || baseW;\n      const h = window.innerHeight || baseH;\n      const s = Math.max(w / baseW, h / baseH);\n      try {\n        this.game.scale.setUserScale(s, s);\n        this.game.scale.refresh();\n      } catch (_) {}\n    };\n\n    window.addEventListener('resize', applyCoverScale);\n    applyCoverScale();\n\n    new Text({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: this.game.world.centerY,\n      text: 'Loading...',\n      style: {\n        font: '30px Areal',\n        fill: '#FFFFFF'\n      }\n    })\n\n    this.state.start('Preload');\n  }\n\n}\n\nexport default Boot;\n","class Preload extends Phaser.State {\n\n  preload() {\n    // Menu:\n    this.load.image('main_menu',     'images/menu/main_menu.png');\n    this.load.image('slot_backdrop', 'images/menu/slot_backdrop.png');\n\n    this.load.spritesheet('buttons',    'images/menu/buttons.png', 200, 75);\n    this.load.spritesheet('check_icon', 'images/menu/accepts.png', 75, 75);\n    this.load.spritesheet('list_icon',  'images/menu/game_enter.png', 75, 75);\n\n    this.load.image('hot_map_preview',   'images/menu/hot_map_preview.png');\n    this.load.image('cold_map_preview',  'images/menu/cold_map_preview.png');\n    // cache-bust to ensure clients fetch the updated preview\n    this.load.image('arena_map_preview', 'images/menu/arena_map_preview.png?v=2');\n    // cache-bust to ensure clients fetch the updated preview\n    this.load.image('open_map_preview',  'images/menu/open_map_preview.png?v=3');\n    this.load.image('rune_lab_preview',  'images/menu/rune_lab_preview.png?v=1');\n    this.load.image('mirror_temple_preview', 'images/menu/mirror_temple_preview.png?v=1');\n    this.load.image('trap_garden_preview', 'images/menu/trap_garden_preview.png?v=1');\n    this.load.image('prev',             'images/menu/left_arrow.png');\n    this.load.image('next',             'images/menu/right_arrow.png');\n\n    // Map:\n    this.load.image('tiles',      'maps/tileset.png');\n    this.load.tilemap('hot_map',   'maps/hot_map.json', null, Phaser.Tilemap.TILED_JSON);\n    this.load.tilemap('cold_map',  'maps/cold_map.json', null, Phaser.Tilemap.TILED_JSON);\n    this.load.tilemap('arena_map', 'maps/arena_map.json', null, Phaser.Tilemap.TILED_JSON);\n    this.load.tilemap('open_map',  'maps/open_map.json',  null, Phaser.Tilemap.TILED_JSON);\n    this.load.tilemap('rune_lab',  'maps/rune_lab.json',  null, Phaser.Tilemap.TILED_JSON);\n    this.load.tilemap('mirror_temple',  'maps/mirror_temple.json',  null, Phaser.Tilemap.TILED_JSON);\n    this.load.tilemap('trap_garden',  'maps/trap_garden.json',  null, Phaser.Tilemap.TILED_JSON);\n\n\n    // Game:\n    this.load.spritesheet('explosion_center',     'images/game/explosion_center.png',     35, 35);\n    this.load.spritesheet('explosion_horizontal', 'images/game/explosion_horizontal.png', 35, 35);\n    this.load.spritesheet('explosion_vertical',   'images/game/explosion_vertical.png',   35, 35);\n    this.load.spritesheet('explosion_up',         'images/game/explosion_up.png',         35, 35);\n    this.load.spritesheet('explosion_right',      'images/game/explosion_right.png',      35, 35);\n    this.load.spritesheet('explosion_down',       'images/game/explosion_down.png',       35, 35);\n    this.load.spritesheet('explosion_left',       'images/game/explosion_left.png',       35, 35);\n\n    this.load.spritesheet('spoil_tileset', 'images/game/spoil_tileset.png', 35, 35);\n    this.load.spritesheet('bone_tileset',  'images/game/bone_tileset.png', 35, 35);\n    this.load.spritesheet('bomb_tileset',  'images/game/bombs.png', 35, 35);\n\n    this.load.image('speed_up_bonus',    'images/game/speed_up_bonus.png');\n    this.load.image('speed_up_no_bonus', 'images/game/speed_up_no_bonus.png');\n    this.load.image('delay_up_bonus',    'images/game/delay_up_bonus.png');\n    this.load.image('delay_up_no_bonus', 'images/game/delay_up_no_bonus.png');\n    this.load.image('power_up_bonus',    'images/game/power_up_bonus.png');\n\n    this.load.image('placeholder_power', 'images/game/placeholder_power.png');\n    this.load.image('placeholder_speed', 'images/game/placeholder_speed.png');\n    this.load.image('placeholder_time',  'images/game/placeholder_time.png');\n\n    // Special tiles FX\n    this.load.spritesheet('portal_fx', 'images/game/portal_fx.png', 35, 35);\n    this.load.spritesheet('speed_fx',  'images/game/speed_fx.png', 35, 35);\n    this.load.image('ghost_icon', 'images/game/ghost_icon.png');\n\n    // SFX (small + optional)\n    this.load.audio('sfx_portal', ['sfx/portal.wav']);\n    this.load.audio('sfx_speed',  ['sfx/speed.wav']);\n\n    // Skins:\n    this.load.image('bomberman_head_blank',     'images/game/chars/0-face.png');\n\n    this.load.image('bomberman_head_Theodora',  'images/game/chars/1-face.png');\n    this.load.image('bomberman_head_Ringo',     'images/game/chars/2-face.png');\n    this.load.image('bomberman_head_Jeniffer',  'images/game/chars/3-face.png');\n    this.load.image('bomberman_head_Godard',    'images/game/chars/4-face.png');\n    this.load.image('bomberman_head_Biarid',    'images/game/chars/5-face.png');\n    this.load.image('bomberman_head_Solia',     'images/game/chars/6-face.png');\n    this.load.image('bomberman_head_Kedan',     'images/game/chars/7-face.png');\n    this.load.image('bomberman_head_Nigob',     'images/game/chars/8-face.png');\n    this.load.image('bomberman_head_Baradir',   'images/game/chars/9-face.png');\n    this.load.image('bomberman_head_Raviel',    'images/game/chars/10-face.png');\n    this.load.image('bomberman_head_Valpo',     'images/game/chars/11-face.png');\n\n    this.load.spritesheet('bomberman_Theodora',  'images/game/chars/1-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Ringo',     'images/game/chars/2-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Jeniffer',  'images/game/chars/3-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Godard',    'images/game/chars/4-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Biarid',    'images/game/chars/5-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Solia',     'images/game/chars/6-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Kedan',     'images/game/chars/7-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Nigob',     'images/game/chars/8-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Baradir',   'images/game/chars/9-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Raviel',    'images/game/chars/10-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Valpo',     'images/game/chars/11-preview.png', 32, 32);\n  }\n\n  create() {\n    this.state.start('Menu');\n  }\n}\n\nexport default Preload;\n","import { Text, TextButton, GameSlots } from '../helpers/elements';\n\nclass Menu extends Phaser.State {\n\n  init() {\n    this.slotsWithGame = null;\n\n    clientSocket.on('display pending games', this.displayPendingGames.bind(this));\n  }\n\n  create() {\n    let background = this.add.image(this.game.world.centerX, this.game.world.centerY, 'main_menu');\n    background.anchor.setTo(0.5);\n\n\n    new Text({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: this.game.world.centerY - 215,\n      text: 'Main Menu',\n      style: {\n        font: '35px Areal',\n        fill: '#9ec0ba',\n        stroke: '#7f9995',\n        strokeThickness: 3\n      }\n    })\n\n    new TextButton({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: this.game.world.centerY + 195,\n      asset: 'buttons',\n      callback: this.hostGameAction,\n      callbackContext: this,\n      overFrame: 1,\n      outFrame: 0,\n      downFrame: 2,\n      upFrame: 0,\n      label: 'New Game',\n      style: {\n        font: '20px Areal',\n        fill: '#000000'\n      }\n    });\n\n    clientSocket.emit('enter lobby', this.displayPendingGames.bind(this));\n  }\n\n  update() {\n  }\n\n  hostGameAction() {\n    clientSocket.emit('leave lobby');\n    this.state.start('SelectMap');\n  }\n\n  displayPendingGames(availableGames) {\n    // NOTE: That is not optimal way to preview slots,\n    //       we should implement AddSlotToGroup, RemoveSlotFromGroup\n\n    // I triying to care about readability, not about performance.\n    if (this.slotsWithGame) {\n      this.slotsWithGame.destroy()\n    }\n\n    this.slotsWithGame = new GameSlots({\n      game: this.game,\n      availableGames: availableGames,\n      callback: this.joinGameAction,\n      callbackContext: this,\n      x: this.game.world.centerX - 220,\n      y: 160,\n      style: {\n        font: '35px Areal',\n        fill: '#efefef',\n        stroke: '#ae743a',\n        strokeThickness: 3\n      }\n    })\n  }\n\n  joinGameAction(game_id) {\n    clientSocket.emit('leave lobby');\n    // https://phaser.io/docs/2.6.2/Phaser.StateManager.html#start\n    this.state.start('PendingGame', true, false, game_id);\n  }\n}\n\nexport default Menu;\n","export const AVAILABLE_MAPS = ['hot_map', 'cold_map', 'arena_map', 'open_map', 'rune_lab', 'mirror_temple', 'trap_garden']\nexport const TILESET = 'tiles';\nexport const LAYER   = 'Blocks';\n\nexport const TILE_SIZE = 35;\n\n// Special floor tiles (must not be in collisionTiles)\nexport const TILE_PORTAL = 2;\nexport const TILE_SPEED_FLOOR = 3;\nexport const EXPLOSION_TIME = 2000;\nexport const PING = 100;\n\nexport const SPEED = 0\nexport const POWER = 1\nexport const DELAY = 2\nexport const SHIELD = 3\nexport const REMOTE = 4\nexport const KICK = 5\nexport const GHOST = 6\n\nexport const SHIELD_DURATION_MS = 1500\nexport const GHOST_DURATION_MS = 4500\n\nexport const INITIAL_SPEED = 150\nexport const STEP_SPEED = 50\nexport const MAX_SPEED = 350\nexport const INITIAL_DELAY = 2000\nexport const STEP_DELAY = 500\nexport const MIN_DELAY = 500\nexport const INITIAL_POWER = 1\nexport const STEP_POWER = 1\n","import { AVAILABLE_MAPS } from '../utils/constants';\nimport { Text, Button } from '../helpers/elements';\n\nclass SelectMap extends Phaser.State {\n\n  init() {\n    this.slider = new phaseSlider(this);\n  }\n\n  create() {\n    let background = this.add.image(this.game.world.centerX, this.game.world.centerY, 'main_menu');\n    background.anchor.setTo(0.5);\n\n    new Text({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: this.game.world.centerY - 215,\n      text: 'Select Map',\n      style: {\n        font: '35px Areal',\n        fill: '#9ec0ba',\n        stroke: '#6f7975',\n        strokeThickness: 3\n      }\n    });\n\n\n    // WARN: https://github.com/netgfx/PhaseSlider/issues/1\n    let hotMapImage = new Phaser.Image(this.game, 0, 0, 'hot_map_preview');\n    let coldMapImage = new Phaser.Image(this.game, 0, 0, 'cold_map_preview');\n    let arenaMapImage = new Phaser.Image(this.game, 0, 0, 'arena_map_preview');\n    let openMapImage  = new Phaser.Image(this.game, 0, 0, 'open_map_preview');\n    let runeLabImage  = new Phaser.Image(this.game, 0, 0, 'rune_lab_preview');\n    let mirrorTempleImage  = new Phaser.Image(this.game, 0, 0, 'mirror_temple_preview');\n    let trapGardenImage  = new Phaser.Image(this.game, 0, 0, 'trap_garden_preview');\n\n    this.slider.createSlider({\n      x: this.game.world.centerX - hotMapImage.width / 2,\n      y: this.game.world.centerY - coldMapImage.height / 2,\n      width: hotMapImage.width,\n      height: hotMapImage.height,\n      customHandlePrev: 'prev',\n      customHandleNext: 'next',\n      objects: [hotMapImage, coldMapImage, arenaMapImage, openMapImage, runeLabImage, mirrorTempleImage, trapGardenImage]\n    });\n\n    new Button({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: this.game.world.centerY + 195,\n      asset: 'check_icon',\n      callback: this.confirmStageSelection,\n      callbackContext: this,\n      overFrame: 1,\n      outFrame: 0,\n      downFrame: 2,\n      upFrame: 0,\n    })\n  }\n\n  confirmStageSelection() {\n    let map_name = AVAILABLE_MAPS[this.slider.getCurrentIndex()]\n\n    clientSocket.emit('create game', map_name, this.joinToNewGame.bind(this));\n  }\n\n  joinToNewGame(payload) {\n    // server callback may return either a plain id string or an object { game_id }\n    if (payload && payload.error) {\n      // Minimal UX: browser alert (works in Phaser environment)\n      alert(payload.message || payload.error);\n      return;\n    }\n\n    const game_id = (payload && payload.game_id) ? payload.game_id : payload;\n    this.state.start('PendingGame', true, false, game_id);\n  }\n}\n\nexport default SelectMap;\n","import { Text, Button, TextButton, PlayerSlots } from '../helpers/elements';\n\nclass PendingGame extends Phaser.State {\n\n  init(payload) {\n    this.slotsWithPlayer = null;\n\n    // Phaser may pass init params as a plain value (game_id) or as an object { game_id }\n    this.game_id = (payload && payload.game_id) ? payload.game_id : payload;\n\n    clientSocket.on('update game', this.displayGameInfo.bind(this));\n    clientSocket.on('launch game', this.launchGame.bind(this));\n\n    clientSocket.emit('enter pending game', { game_id: this.game_id });\n  }\n\n  create() {\n    let background = this.add.image(this.game.world.centerX, this.game.world.centerY, 'main_menu');\n    background.anchor.setTo(0.5);\n\n    this.gameTitle = new Text({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: this.game.world.centerY - 215,\n      text: '',\n      style: {\n        font: '35px Areal',\n        fill: '#9ec0ba',\n        stroke: '#6f7975',\n        strokeThickness: 3\n      }\n    })\n\n    this.startGameButton = new TextButton({\n      game: this.game,\n      x: this.game.world.centerX + 105,\n      y: this.game.world.centerY + 195,\n      asset: 'buttons',\n      callback: this.startGameAction,\n      callbackContext: this,\n      overFrame: 1,\n      outFrame: 0,\n      downFrame: 2,\n      upFrame: 0,\n      label: 'Start Game',\n      style: {\n        font: '20px Areal',\n        fill: '#000000'\n      }\n    });\n\n    this.startGameButton.disable()\n\n    // Touch-friendly AI count selector (0..3)\n    this.aiCount = 3;\n\n    this.aiText = new Text({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: this.game.world.centerY + 100,\n      text: `AI: ${this.aiCount}`,\n      style: { font: '24px Areal', fill: '#ffffff', stroke: '#000000', strokeThickness: 3 }\n    });\n\n    // AI difficulty selector\n    this.aiDifficulty = 'normal';\n\n    // Place difficulty controls above AI count and keep enough horizontal spacing\n    const diffY = this.game.world.centerY + 40;\n\n    this.aiDiffText = new Text({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: diffY,\n      text: `é›£åº¦: ${this.aiDifficulty}`,\n      style: { font: '22px Areal', fill: '#ffffff', stroke: '#000000', strokeThickness: 3 }\n    });\n\n    const diffStepX = 230;\n\n    this.aiEasy = new TextButton({\n      game: this.game,\n      x: this.game.world.centerX - diffStepX,\n      y: diffY,\n      asset: 'buttons',\n      callback: () => this.setAIDifficulty('easy'),\n      callbackContext: this,\n      overFrame: 1,\n      outFrame: 0,\n      downFrame: 2,\n      upFrame: 0,\n      label: 'Easy',\n      style: { font: '20px Areal', fill: '#000000' }\n    });\n\n    this.aiNormal = new TextButton({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: diffY,\n      asset: 'buttons',\n      callback: () => this.setAIDifficulty('normal'),\n      callbackContext: this,\n      overFrame: 1,\n      outFrame: 0,\n      downFrame: 2,\n      upFrame: 0,\n      label: 'Normal',\n      style: { font: '18px Areal', fill: '#000000' }\n    });\n\n    this.aiHard = new TextButton({\n      game: this.game,\n      x: this.game.world.centerX + diffStepX,\n      y: diffY,\n      asset: 'buttons',\n      callback: () => this.setAIDifficulty('hard'),\n      callbackContext: this,\n      overFrame: 1,\n      outFrame: 0,\n      downFrame: 2,\n      upFrame: 0,\n      label: 'Hard',\n      style: { font: '20px Areal', fill: '#000000' }\n    });\n\n    this.aiMinus = new TextButton({\n      game: this.game,\n      x: this.game.world.centerX - 120,\n      y: this.game.world.centerY + 120,\n      asset: 'buttons',\n      callback: () => this.setAICount(this.aiCount - 1),\n      callbackContext: this,\n      overFrame: 1,\n      outFrame: 0,\n      downFrame: 2,\n      upFrame: 0,\n      label: '-',\n      style: { font: '34px Areal', fill: '#000000' }\n    });\n\n    this.aiPlus = new TextButton({\n      game: this.game,\n      x: this.game.world.centerX + 120,\n      y: this.game.world.centerY + 120,\n      asset: 'buttons',\n      callback: () => this.setAICount(this.aiCount + 1),\n      callbackContext: this,\n      overFrame: 1,\n      outFrame: 0,\n      downFrame: 2,\n      upFrame: 0,\n      label: '+',\n      style: { font: '30px Areal', fill: '#000000' }\n    });\n\n    new TextButton({\n      game: this.game,\n      x: this.game.world.centerX - 105,\n      y: this.game.world.centerY + 195,\n      asset: 'buttons',\n      callback: this.leaveGameAction,\n      callbackContext: this,\n      overFrame: 1,\n      outFrame: 0,\n      downFrame: 2,\n      upFrame: 0,\n      label: 'Leave Game',\n      style: {\n        font: '20px Areal',\n        fill: '#000000'\n      }\n    });\n\n  }\n\n  setAICount(n) {\n    this.aiCount = Math.max(0, Math.min(3, n));\n    if (this.aiText) this.aiText.text = `AI: ${this.aiCount}`;\n\n    clientSocket.emit('set ai count', { count: this.aiCount });\n  }\n\n  setAIDifficulty(difficulty) {\n    this.aiDifficulty = difficulty;\n    if (this.aiDiffText) this.aiDiffText.text = `é›£åº¦: ${this.aiDifficulty}`;\n\n    clientSocket.emit('set ai difficulty', { difficulty: this.aiDifficulty });\n  }\n\n  displayGameInfo({ current_game }) {\n    let players = Object.values(current_game.players);\n\n    this.gameTitle.text = current_game.name\n\n    if (this.slotsWithPlayer) {\n      this.slotsWithPlayer.destroy()\n    }\n\n    this.slotsWithPlayer = new PlayerSlots({\n      game: this.game,\n      max_players: current_game.max_players,\n      players: players,\n      x: this.game.world.centerX - 245,\n      y: this.game.world.centerY - 80,\n      asset_empty: 'bomberman_head_blank',\n      asset_player: 'bomberman_head_',\n      style: {\n        font: '20px Areal',\n        fill: '#48291c'\n      }\n    })\n\n    // Allow single-player start (useful on mobile / solo testing)\n    if(players.length >= 1) {\n      this.startGameButton.enable();\n    } else {\n      this.startGameButton.disable();\n    }\n  }\n\n  leaveGameAction() {\n    clientSocket.emit('leave pending game');\n\n    this.state.start('Menu');\n  }\n\n  startGameAction() {\n    clientSocket.emit('start game');\n  }\n\n  launchGame(game) {\n    this.state.start('Play', true, false, game);\n  }\n}\n\nexport default PendingGame;\n","export const findFrom = function(id, entities) {\n  for (let entity of entities.children) {\n    if (entity.id !== id) { continue }\n\n    return entity\n  }\n  return null;\n}\n\nexport const findAndDestroyFrom = function(id, entities) {\n  let entity = findFrom(id, entities);\n  if (!entity) { return }\n\n  entity.destroy()\n}\n","export default class Info {\n\n  constructor({ game, player }) {\n    this.game = game;\n    this.player = player;\n\n    this.style    = { font: '14px Arial', fill: '#ffffff', align: 'left' }\n    this.redStyle = { font: '30px Arial', fill: '#ff0044', align: 'center' };\n\n    // HUD group (sticks to camera)\n    this.hud = this.game.add.group();\n    this.hud.fixedToCamera = true;\n\n    let bootsIcon  = new Phaser.Image(this.game, 5, 2, 'placeholder_speed');\n    this.speedText = new Phaser.Text(this.game, 35, 7, this.speedLabel(), this.style);\n    bootsIcon.addChild(this.speedText)\n    this.hud.add(bootsIcon);\n\n    let powerIcon  = new Phaser.Image(this.game, 110, 2, 'placeholder_power');\n    this.powerText = new Phaser.Text(this.game, 35, 7, this.powerLabel(), this.style);\n    powerIcon.addChild(this.powerText)\n    this.hud.add(powerIcon);\n\n    let delayIcon  = new Phaser.Image(this.game, 215, 2, 'placeholder_time');\n    this.delayText = new Phaser.Text(this.game, 35, 7, this.delayLabel(), this.style);\n    delayIcon.addChild(this.delayText)\n    this.hud.add(delayIcon);\n\n    // Ghost powerup indicator (hidden unless active)\n    let ghostIcon = new Phaser.Image(this.game, 320, 2, 'ghost_icon');\n    ghostIcon.alpha = 0.85;\n    this.ghostText = new Phaser.Text(this.game, 35, 7, '', this.style);\n    ghostIcon.addChild(this.ghostText);\n    ghostIcon.visible = false;\n    this.ghostIcon = ghostIcon;\n    this.hud.add(ghostIcon);\n\n    this._ghostTimer = null;\n\n    this.deadText = this.game.add.text(this.game.world.centerX, this.game.world.height - 30, 'You died :(', this.redStyle);\n    this.deadText.anchor.set(0.5);\n    this.deadText.visible = false;\n    this.deadText.fixedToCamera = true;\n  }\n\n  refreshStatistic() {\n    this.speedText.text = this.speedLabel();\n    this.powerText.text = this.powerLabel();\n    this.delayText.text = this.delayLabel();\n  }\n\n  showGhost(ghostUntilMs) {\n    if (!this.ghostIcon) return;\n\n    this.ghostIcon.visible = true;\n\n    if (this._ghostTimer) {\n      try { this.game.time.events.remove(this._ghostTimer); } catch (_) {}\n      this._ghostTimer = null;\n    }\n\n    const tick = () => {\n      const left = Math.max(0, ghostUntilMs - this.game.time.now);\n      this.ghostText.text = `${(left / 1000).toFixed(1)}s`;\n\n      if (left <= 0) {\n        this.hideGhost();\n      }\n    };\n\n    tick();\n    this._ghostTimer = this.game.time.events.loop(150, tick);\n  }\n\n  hideGhost() {\n    if (this.ghostIcon) this.ghostIcon.visible = false;\n    if (this._ghostTimer) {\n      try { this.game.time.events.remove(this._ghostTimer); } catch (_) {}\n      this._ghostTimer = null;\n    }\n  }\n\n  showDeadInfo() {\n    this.deadText.visible = true\n  }\n\n  speedLabel() {\n    return this.player.speed\n  }\n\n  powerLabel() {\n    return `x ${this.player.power}`\n  }\n\n  delayLabel() {\n    return `${this.player.delay / 1000} sec.`\n  }\n}\n","import {\n  PING, TILE_SIZE, MAX_SPEED, STEP_SPEED, INITIAL_SPEED, SPEED, POWER, DELAY,\n  MIN_DELAY, STEP_DELAY, INITIAL_DELAY, INITIAL_POWER, STEP_POWER,\n  SHIELD, REMOTE, KICK, GHOST, SHIELD_DURATION_MS, GHOST_DURATION_MS\n} from '../utils/constants';\n\nimport Info from './info';\nimport { SpoilNotification, Text } from '../helpers/elements';\n\nexport default class Player extends Phaser.Sprite {\n\n  constructor({ game, id, spawn, skin }) {\n    super(game, spawn.x, spawn.y, 'bomberman_' + skin);\n\n    this.game = game;\n    this.id = id;\n\n    this.prevPosition = { x: spawn.x, y: spawn.y };\n\n    this.delay = INITIAL_DELAY;\n    this.power = INITIAL_POWER;\n    this.speed = INITIAL_SPEED;\n    this.tileSpeedMultiplier = 1.0;\n    this._lastBombTime = 0;\n\n    // powerups\n    this.shieldUntil = 0;\n    this.ghostUntil = 0;\n    this.hasRemote = false;\n    this.hasKick = false;\n\n    this.game.add.existing(this);\n    this.game.physics.arcade.enable(this);\n    this.body.setSize(20, 20, 6, 6);\n\n    // Touch controls state (set by Play state UI)\n    this.touchLeft = false;\n    this.touchRight = false;\n    this.touchUp = false;\n    this.touchDown = false;\n    this.touchBomb = false;\n\n    game.time.events.loop(PING , this.positionUpdaterLoop.bind(this));\n\n    this.animations.add('up', [9, 10, 11], 15, true);\n    this.animations.add('down', [0, 1, 2], 15, true);\n    this.animations.add('right', [6, 7, 8], 15, true);\n    this.animations.add('left', [3, 4, 5], 15, true);\n\n    this.info = new Info({ game: this.game, player: this });\n\n    this.defineKeyboard()\n    this.defineSelf(skin)\n  }\n\n  update() {\n    if (this.alive) {\n      this.handleMoves()\n      this.handleBombs()\n    }\n\n    // this.game.debug.body(this);\n    // this.game.debug.spriteInfo(this, 32, 32);\n  }\n\n  defineKeyboard() {\n    // Arrow keys\n    this.upKey    = this.game.input.keyboard.addKey(Phaser.Keyboard.UP)\n    this.downKey  = this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN)\n    this.leftKey  = this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT)\n    this.rightKey = this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT)\n\n    // WASD\n    this.wKey = this.game.input.keyboard.addKey(Phaser.Keyboard.W)\n    this.aKey = this.game.input.keyboard.addKey(Phaser.Keyboard.A)\n    this.sKey = this.game.input.keyboard.addKey(Phaser.Keyboard.S)\n    this.dKey = this.game.input.keyboard.addKey(Phaser.Keyboard.D)\n\n    // Bomb\n    this.spaceKey = this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR)\n  }\n\n  handleMoves() {\n    this.body.velocity.set(0);\n    let animationsArray = []\n\n    const effectiveSpeed = this.speed * (this.tileSpeedMultiplier || 1.0);\n\n    const left  = this.leftKey.isDown  || (this.aKey && this.aKey.isDown) || this.touchLeft;\n    const right = this.rightKey.isDown || (this.dKey && this.dKey.isDown) || this.touchRight;\n    const up    = this.upKey.isDown    || (this.wKey && this.wKey.isDown) || this.touchUp;\n    const down  = this.downKey.isDown  || (this.sKey && this.sKey.isDown) || this.touchDown;\n\n    if (left){\n      this.body.velocity.x = -effectiveSpeed;\n      animationsArray.push('left')\n    } else if (right) {\n      this.body.velocity.x = effectiveSpeed;\n      animationsArray.push('right')\n    }\n\n    if (up) {\n      this.body.velocity.y = -effectiveSpeed;\n      animationsArray.push('up')\n    } else if (down) {\n      this.body.velocity.y = effectiveSpeed;\n      animationsArray.push('down')\n    }\n\n    let currentAnimation = animationsArray[0]\n    if (currentAnimation){\n      this.animations.play(currentAnimation)\n      return\n    }\n\n    this.animations.stop();\n  }\n\n  handleBombs() {\n    const bombDown = this.game.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR) || this.touchBomb;\n\n    if (bombDown) {\n      let now = this.game.time.now;\n\n      if (now > this._lastBombTime) {\n        this._lastBombTime = now + this.delay;\n\n        clientSocket.emit('create bomb', { col: this.currentCol(), row: this.currentRow() });\n      }\n    }\n  }\n\n  currentCol() {\n    return Math.floor(this.body.position.x / TILE_SIZE)\n  }\n\n  currentRow() {\n    return Math.floor(this.body.position.y / TILE_SIZE)\n  }\n\n  positionUpdaterLoop() {\n    let newPosition = { x: this.position.x, y: this.position.y }\n\n    if (this.prevPosition.x !== newPosition.x || this.prevPosition.y !== newPosition.y) {\n      clientSocket.emit('update player position', newPosition);\n      this.prevPosition = newPosition;\n    }\n  }\n\n  becomesDead() {\n    this.info.showDeadInfo()\n    this.kill();\n  }\n\n  pickSpoil( spoil_type ){\n    if ( spoil_type === SPEED ){ this.increaseSpeed() }\n    if ( spoil_type === POWER ){ this.increasePower() }\n    if ( spoil_type === DELAY ){ this.increaseDelay() }\n    if ( spoil_type === SHIELD ){ this.activateShield() }\n    if ( spoil_type === REMOTE ){ this.enableRemote() }\n    if ( spoil_type === KICK ){ this.enableKick() }\n    if ( spoil_type === GHOST ){ this.activateGhost() }\n  }\n\n  isShielded() {\n    return this.shieldUntil && this.game.time.now < this.shieldUntil;\n  }\n\n  isGhosted() {\n    return this.ghostUntil && this.game.time.now < this.ghostUntil;\n  }\n\n  increaseSpeed(){\n    let asset = 'speed_up_no_bonus'\n\n    if (this.speed < MAX_SPEED) {\n      this.speed = this.speed + STEP_SPEED;\n      this.info.refreshStatistic();\n      asset = 'speed_up_bonus'\n    }\n\n    new SpoilNotification({ game: this.game, asset: asset, x: this.position.x, y: this.position.y })\n  }\n\n  increaseDelay(){\n    let asset = 'delay_up_no_bonus'\n\n    if (this.delay > MIN_DELAY){\n      this.delay -= STEP_DELAY;\n      this.info.refreshStatistic();\n      asset = 'delay_up_bonus'\n    }\n\n    new SpoilNotification({ game: this.game, asset: asset, x: this.position.x, y: this.position.y })\n  }\n\n  increasePower(){\n    let asset = 'power_up_bonus'\n\n    this.power += STEP_POWER;\n    this.info.refreshStatistic();\n\n    new SpoilNotification({ game: this.game, asset: asset, x: this.position.x, y: this.position.y })\n  }\n\n  activateShield() {\n    this.shieldUntil = this.game.time.now + SHIELD_DURATION_MS;\n\n    // Simple visual: flash tint while shielded\n    this.tint = 0x66ccff;\n    this.game.time.events.add(SHIELD_DURATION_MS, () => {\n      // If ghost is active, keep ghost visual\n      if (this.isGhosted && this.isGhosted()) {\n        this.tint = 0xa7f7ff;\n        this.alpha = 0.65;\n      } else {\n        this.tint = 0xffffff;\n      }\n    });\n\n    new SpoilNotification({ game: this.game, asset: 'placeholder_time', x: this.position.x, y: this.position.y })\n  }\n\n  enableRemote() {\n    this.hasRemote = true;\n    new SpoilNotification({ game: this.game, asset: 'placeholder_power', x: this.position.x, y: this.position.y })\n  }\n\n  enableKick() {\n    this.hasKick = true;\n    new SpoilNotification({ game: this.game, asset: 'placeholder_speed', x: this.position.x, y: this.position.y })\n  }\n\n  activateGhost() {\n    this.ghostUntil = this.game.time.now + GHOST_DURATION_MS;\n\n    // Visual: semi-transparent + cool tint\n    this.alpha = 0.65;\n    this.tint = 0xa7f7ff;\n\n    // HUD indicator + countdown\n    if (this.info && this.info.showGhost) {\n      this.info.showGhost(this.ghostUntil);\n    }\n\n    // Clear visual at end (unless shield overwrote tint, reset to white)\n    this.game.time.events.add(GHOST_DURATION_MS, () => {\n      this.alpha = 1;\n      // if shield is still on, keep its tint\n      if (!(this.isShielded && this.isShielded())) {\n        this.tint = 0xffffff;\n      }\n      if (this.info && this.info.hideGhost) {\n        this.info.hideGhost();\n      }\n    });\n\n    new SpoilNotification({ game: this.game, asset: 'ghost_icon', x: this.position.x, y: this.position.y })\n  }\n\n  defineSelf(name) {\n    let playerText = new Text({\n      game: this.game,\n      x: TILE_SIZE / 2,\n      y: -10,\n      text: `\\u272E ${name} \\u272E`,\n      style: {\n        font: '15px Areal',\n        fill: '#FFFFFF',\n          stroke: '#000000',\n          strokeThickness: 3\n      }\n    })\n\n    this.addChild(playerText);\n  }\n}\n","import { TILE_SIZE, PING } from '../utils/constants';\nimport { Text } from '../helpers/elements';\n\nexport default class EnemyPlayer extends Phaser.Sprite {\n\n  constructor({ game, id, spawn, skin }) {\n    super(game, spawn.x, spawn.y, 'bomberman_' + skin);\n\n    this.game = game\n    this.id = id;\n\n    this.currentPosition = spawn;\n    this.lastMoveAt = 0;\n\n    this.game.physics.arcade.enable(this);\n    this.body.setSize(20, 20, 6, 6);\n    this.body.immovable = true;\n\n    this.animations.add('up', [9, 10, 11], 15, true);\n    this.animations.add('down', [0, 1, 2], 15, true);\n    this.animations.add('right', [6, 7, 8], 15, true);\n    this.animations.add('left', [3, 4, 5], 15, true);\n\n    this.defineSelf(skin)\n  }\n\n  update () {\n    // this.game.debug.body(this);\n  }\n\n  goTo(newPosition) {\n    this.lastMoveAt = this.game.time.now;\n\n    this.animateFace(newPosition);\n\n    this.game.add.tween(this).to(newPosition, PING, Phaser.Easing.Linear.None, true);\n  }\n\n  animateFace(newPosition) {\n    let face = 'down';\n    let diffX = newPosition.x - this.currentPosition.x;\n    let diffY = newPosition.y - this.currentPosition.y;\n\n    if (diffX < 0) {\n      face = 'left'\n    } else if (diffX > 0) {\n      face = 'right'\n    } else if (diffY < 0) {\n      face = 'up'\n    } else if (diffY > 0) {\n      face = 'down'\n    }\n\n    this.animations.play(face)\n    this.currentPosition = newPosition;\n  }\n\n  defineSelf(name) {\n    let playerText = new Text({\n      game: this.game,\n      x: TILE_SIZE / 2,\n      y: -10,\n      text: name,\n      style: {\n        font: '14px Areal',\n        fill: '#FFFFFF',\n          stroke: '#000000',\n          strokeThickness: 3\n      }\n    })\n\n    this.addChild(playerText);\n  }\n}\n","import { TILE_SIZE, EXPLOSION_TIME } from '../utils/constants';\n\nexport default class Bomb extends Phaser.Sprite {\n\n  constructor(game, id, col, row) {\n    let centerCol = (col * TILE_SIZE) + TILE_SIZE / 2\n    let centerRow = (row * TILE_SIZE) + TILE_SIZE / 2\n\n    super(game, centerCol, centerRow, 'bomb_tileset');\n    this.scale.setTo(0.7);\n    this.anchor.setTo(0.5);\n\n    this.game = game\n    this.id = id;\n\n    this.game.physics.arcade.enable(this);\n\n    this.game.add.tween(this.scale).to({ x: 1.2, y: 1.2 }, EXPLOSION_TIME, Phaser.Easing.Linear.None, true);\n\n    this.body.immovable = true;\n    // TODO: https://phaser.io/docs/2.4.4/Phaser.AnimationManager.html#add\n    this.animations.add('bomb', [0,1,2,3,4,5,6,7,8,9,10,11,12,13], 6, true);\n    this.animations.play('bomb');\n  }\n\n  update() {\n    // this.game.debug.body(this);\n  }\n\n}\n","import { SPEED, POWER, DELAY, SHIELD, REMOTE, KICK, GHOST, TILE_SIZE } from '../utils/constants';\n\nexport default class Spoil extends Phaser.Sprite {\n\n  constructor(game, spoil) {\n\n    // UK01: spoil_tileset now contains 7 frames (0..6) matching constants\n    let frame = 0;\n    if (spoil.spoil_type === SPEED) frame = 0;\n    if (spoil.spoil_type === POWER) frame = 1;\n    if (spoil.spoil_type === DELAY) frame = 2;\n    if (spoil.spoil_type === SHIELD) frame = 3;\n    if (spoil.spoil_type === REMOTE) frame = 4;\n    if (spoil.spoil_type === KICK) frame = 5;\n    if (spoil.spoil_type === GHOST) frame = 6;\n\n    super(game, (spoil.col * TILE_SIZE), (spoil.row * TILE_SIZE), 'spoil_tileset', frame);\n\n    this.id = spoil.id\n\n    this.game.physics.arcade.enable(this);\n\n    // Light glow/pulse to make spoils more visible (mobile-friendly)\n    this.alpha = 0.92;\n    this.scale.setTo(1.0);\n    try {\n      const t1 = this.game.add.tween(this).to({ alpha: 0.62 }, 420, Phaser.Easing.Sinusoidal.InOut, true, 0, -1, true);\n      const t2 = this.game.add.tween(this.scale).to({ x: 1.08, y: 1.08 }, 520, Phaser.Easing.Sinusoidal.InOut, true, 0, -1, true);\n      // keep refs to avoid GC issues in some Phaser builds\n      this._glowTween = t1;\n      this._scaleTween = t2;\n    } catch (_) {}\n  }\n\n}\n","import { TILE_SIZE } from '../utils/constants';\n\nexport default class FireBlast extends Phaser.Sprite {\n\n  constructor(game, cell) {\n    super(game, (cell.col * TILE_SIZE), (cell.row * TILE_SIZE), cell.type, 0);\n\n    this.game = game\n\n    this.animations.add('blast', [0, 1, 2, 3, 4]);\n\n    // 15 - framerate, loop, kill_on_complete\n    this.play('blast', 15, false, true);\n\n    this.game.physics.arcade.enable(this);\n  }\n\n}\n","import { TILE_SIZE } from '../utils/constants';\n\nexport default class Bone extends Phaser.Sprite {\n\n  constructor(game, col, row) {\n    super(game, (col * TILE_SIZE), (row * TILE_SIZE), 'bone_tileset');\n  }\n\n}\n","import { findFrom, findAndDestroyFrom } from '../utils/utils';\nimport { TILESET, LAYER, TILE_SIZE, TILE_PORTAL, TILE_SPEED_FLOOR } from '../utils/constants';\n\nimport Player from '../entities/player';\nimport EnemyPlayer from '../entities/enemy_player';\nimport Bomb from '../entities/bomb';\nimport Spoil from '../entities/spoil';\nimport FireBlast from '../entities/fire_blast';\nimport Bone from '../entities/bone';\n\nclass Play extends Phaser.State {\n  init(game) {\n    this.currentGame = game\n  }\n\n  create() {\n    this.createMap();\n    this.createPlayers();\n    this.setEventHandlers();\n\n    // Keep player in view on mobile / resized canvas\n    if (this.player) {\n      this.game.camera.follow(this.player);\n    }\n\n    this.createTouchControls();\n\n    // SFX\n    this.sfxPortal = this.game.add.audio('sfx_portal');\n    this.sfxSpeed = this.game.add.audio('sfx_speed');\n\n    this.game.time.events.loop(400 , this.stopAnimationLoop.bind(this));\n  }\n\n  update() {\n    this.refreshGhostCollision();\n\n    this.game.physics.arcade.collide(this.player, this.blockLayer);\n    this.game.physics.arcade.collide(this.player, this.enemies);\n    this.game.physics.arcade.collide(this.player, this.bombs, this.onPlayerVsBomb, null, this);\n\n    this.game.physics.arcade.overlap(this.player, this.spoils, this.onPlayerVsSpoil, null, this);\n    this.game.physics.arcade.overlap(this.player, this.blasts, this.onPlayerVsBlast, null, this);\n\n    this.handleSpecialTiles();\n  }\n\n  createMap() {\n    this.map = this.add.tilemap(this.currentGame.map_name);\n\n    this.map.addTilesetImage(TILESET);\n\n    this.blockLayer = this.map.createLayer(LAYER);\n    this.blockLayer.resizeWorld();\n\n    this.baseCollisionTiles = (this.blockLayer.layer.properties.collisionTiles || []).slice();\n    this.wallTileIndex = this.blockLayer.layer.properties.wall;\n    this.balkTileIndex = this.blockLayer.layer.properties.balk;\n\n    this.map.setCollision(this.baseCollisionTiles, true, this.blockLayer);\n    this._ghostCollisionEnabled = false;\n\n    // Special tiles cache\n    this.portalCells = [];\n    this.speedCells = new Set();\n\n    // Visual overlays (magic style placeholder)\n    this.specialFx = this.game.add.group();\n\n    const layer = this.map.layers[0];\n    const w = layer.width;\n    const h = layer.height;\n    const data = layer.data;\n\n    for (let r = 0; r < h; r++) {\n      for (let c = 0; c < w; c++) {\n        const tile = data[r][c];\n        if (!tile) continue;\n        const idx = tile.index;\n\n        if (idx === TILE_PORTAL) {\n          this.portalCells.push({ col: c, row: r });\n        } else if (idx === TILE_SPEED_FLOOR) {\n          this.speedCells.add(`${c},${r}`);\n        }\n      }\n    }\n\n    // Special tiles visuals (animated spritesheets)\n    // NOTE: We keep them as a separate group so they sit above the map.\n    for (const p of this.portalCells) {\n      const x = p.col * TILE_SIZE;\n      const y = p.row * TILE_SIZE;\n      const s = this.game.add.sprite(x, y, 'portal_fx');\n      s.alpha = 0.95;\n      s.blendMode = Phaser.blendModes.ADD;\n      s.animations.add('spin', [0, 1, 2, 3, 4, 5], 10, true);\n      s.animations.play('spin');\n      this.specialFx.add(s);\n    }\n\n    for (const key of this.speedCells) {\n      const [c, r] = key.split(',').map(Number);\n      const x = c * TILE_SIZE;\n      const y = r * TILE_SIZE;\n      const s = this.game.add.sprite(x, y, 'speed_fx');\n      s.alpha = 0.75;\n      s.animations.add('flow', [0, 1, 2, 3, 4, 5], 12, true);\n      s.animations.play('flow');\n      this.specialFx.add(s);\n    }\n\n    this.player  = null;\n    this.bones   = this.game.add.group();\n    this.bombs   = this.game.add.group();\n    this.spoils  = this.game.add.group();\n    this.blasts  = this.game.add.group();\n    this.enemies = this.game.add.group();\n\n    this.game.physics.arcade.enable(this.blockLayer);\n  }\n\n  createPlayers() {\n    for (let player of Object.values(this.currentGame.players)) {\n      let setup = {\n        game:   this.game,\n        id:     player.id,\n        spawn:  player.spawn,\n        skin:   player.skin\n      }\n\n      if (player.id === clientSocket.id) {\n        this.player = new Player(setup);\n      } else {\n        this.enemies.add(new EnemyPlayer(setup))\n      }\n    }\n  }\n\n  setEventHandlers() {\n    clientSocket.on('move player', this.onMovePlayer.bind(this));\n    clientSocket.on('player win', this.onPlayerWin.bind(this));\n    clientSocket.on('show bomb', this.onShowBomb.bind(this));\n    clientSocket.on('detonate bomb', this.onDetonateBomb.bind(this));\n    clientSocket.on('move bomb', this.onMoveBomb.bind(this));\n    clientSocket.on('spoil was picked', this.onSpoilWasPicked.bind(this));\n    clientSocket.on('show bones', this.onShowBones.bind(this));\n    clientSocket.on('player disconnect', this.onPlayerDisconnect.bind(this));\n  }\n\n  onPlayerVsSpoil(player, spoil) {\n    clientSocket.emit('pick up spoil', { spoil_id: spoil.id });\n    spoil.kill();\n  }\n\n  onPlayerVsBlast(player, blast) {\n    if (!player.alive) return;\n    // Shield powerup: brief invulnerability\n    if (player.isShielded && player.isShielded()) return;\n\n    clientSocket.emit('player died', { col: player.currentCol(), row: player.currentRow() });\n    player.becomesDead()\n  }\n\n  onMovePlayer({ player_id, x, y }) {\n    let enemy = findFrom(player_id, this.enemies);\n    if (!enemy) { return }\n\n    enemy.goTo({ x: x, y: y })\n  }\n\n  onPlayerVsBomb(player, bomb) {\n    if (!player || !bomb) return;\n    if (!player.hasKick) return;\n\n    // Determine movement direction intent (keyboard + touch)\n    const left  = player.leftKey.isDown  || (player.aKey && player.aKey.isDown) || player.touchLeft;\n    const right = player.rightKey.isDown || (player.dKey && player.dKey.isDown) || player.touchRight;\n    const up    = player.upKey.isDown    || (player.wKey && player.wKey.isDown) || player.touchUp;\n    const down  = player.downKey.isDown  || (player.sKey && player.sKey.isDown) || player.touchDown;\n\n    let dir = null;\n    if (left) dir = 'left';\n    else if (right) dir = 'right';\n    else if (up) dir = 'up';\n    else if (down) dir = 'down';\n\n    if (!dir) return;\n\n    // Throttle: avoid spamming server every physics tick\n    const now = this.game.time.now;\n    if (!player._lastKickAt) player._lastKickAt = 0;\n    if (now - player._lastKickAt < 110) return;\n    player._lastKickAt = now;\n\n    clientSocket.emit('kick bomb', { bomb_id: bomb.id, dir });\n  }\n\n  onMoveBomb({ bomb_id, col, row }) {\n    const b = findFrom(bomb_id, this.bombs);\n    if (!b) return;\n\n    const x = (col * TILE_SIZE) + TILE_SIZE / 2;\n    const y = (row * TILE_SIZE) + TILE_SIZE / 2;\n    b.x = x;\n    b.y = y;\n    if (b.body) {\n      b.body.reset(x, y);\n    }\n  }\n\n  stopAnimationLoop() {\n    for (let enemy of this.enemies.children) {\n      if (enemy.lastMoveAt < this.game.time.now - 200) {\n        enemy.animations.stop();\n      }\n    }\n  }\n\n  createTouchControls() {\n    if (!this.player) return;\n\n    // Only show on touch-capable devices (Phaser detection can be flaky on some mobile browsers)\n    const isTouchCapable = (\n      (this.game.device && (this.game.device.touch || this.game.device.iOS || this.game.device.android)) ||\n      (typeof window !== 'undefined' && ('ontouchstart' in window)) ||\n      (typeof navigator !== 'undefined' && (navigator.maxTouchPoints > 0))\n    );\n    if (!isTouchCapable) return;\n\n    const g = this.game.add.group();\n    g.fixedToCamera = true;\n    g.cameraOffset.setTo(0, 0);\n\n    const mkBtn = ({ x, y, r = 44, label, onDown, onUp, fill = 0x111111, alpha = 0.35, stroke = 0xffffff, strokeAlpha = 0.22 }) => {\n      const btn = this.game.add.graphics(0, 0);\n      btn.beginFill(fill, alpha);\n      btn.lineStyle(3, stroke, strokeAlpha);\n      btn.drawCircle(0, 0, r * 2);\n      btn.endFill();\n      btn.x = x;\n      btn.y = y;\n\n      const t = this.game.add.text(0, 0, label, { font: '26px Arial', fill: '#ffffff' });\n      t.anchor.setTo(0.5);\n      btn.addChild(t);\n\n      btn.inputEnabled = true;\n      btn.events.onInputDown.add(() => onDown && onDown());\n      const up = () => onUp && onUp();\n      btn.events.onInputUp.add(up);\n      btn.events.onInputOut.add(up);\n\n      g.add(btn);\n      return btn;\n    };\n\n    const w = this.game.width;\n    const h = this.game.height;\n\n    // iOS/Android safe-area padding (home indicator / browser UI)\n    const cssSafeBottom = (() => {\n      try {\n        const v = getComputedStyle(document.documentElement).getPropertyValue('env(safe-area-inset-bottom)');\n        const n = parseInt((v || '0').toString().replace('px', '').trim(), 10);\n        return Number.isFinite(n) ? n : 0;\n      } catch (_) {\n        return 0;\n      }\n    })();\n\n    const padBottom = Math.max(28, cssSafeBottom + 18);\n\n    // Scale controls a bit based on screen size\n    const s = Math.max(0.85, Math.min(1.15, Math.min(w, h) / 700));\n\n    // Virtual joystick (4-direction snap)\n    const baseX = 125 * s;\n    const baseY = h - (185 * s) - padBottom;\n    const baseR = 70 * s;\n    const knobR = 36 * s;\n\n    const base = this.game.add.graphics(0, 0);\n    base.beginFill(0x111111, 0.22);\n    base.lineStyle(3, 0xffffff, 0.18);\n    base.drawCircle(0, 0, baseR * 2);\n    base.endFill();\n    base.x = baseX;\n    base.y = baseY;\n    base.inputEnabled = true;\n    base.input.enableDrag(false);\n    g.add(base);\n\n    const knob = this.game.add.graphics(0, 0);\n    knob.beginFill(0x00e5ff, 0.18);\n    knob.lineStyle(3, 0x00e5ff, 0.25);\n    knob.drawCircle(0, 0, knobR * 2);\n    knob.endFill();\n    knob.x = baseX;\n    knob.y = baseY;\n    g.add(knob);\n\n    const resetDir = () => {\n      this.player.touchLeft = this.player.touchRight = this.player.touchUp = this.player.touchDown = false;\n    };\n\n    const setDirFromVector = (dx, dy) => {\n      resetDir();\n      const dead = 14;\n      if (Math.abs(dx) < dead && Math.abs(dy) < dead) {\n        knob.x = baseX;\n        knob.y = baseY;\n        return;\n      }\n\n      // snap to 4 directions\n      if (Math.abs(dx) > Math.abs(dy)) {\n        if (dx > 0) this.player.touchRight = true;\n        else this.player.touchLeft = true;\n        knob.x = baseX + Math.max(-baseR + knobR, Math.min(baseR - knobR, dx));\n        knob.y = baseY;\n      } else {\n        if (dy > 0) this.player.touchDown = true;\n        else this.player.touchUp = true;\n        knob.x = baseX;\n        knob.y = baseY + Math.max(-baseR + knobR, Math.min(baseR - knobR, dy));\n      }\n    };\n\n    const onPointer = (pointer) => {\n      const dx = pointer.x - baseX;\n      const dy = pointer.y - baseY;\n      const len = Math.sqrt(dx * dx + dy * dy) || 1;\n      const max = baseR - knobR;\n      const clamped = Math.min(max, len);\n      const ndx = (dx / len) * clamped;\n      const ndy = (dy / len) * clamped;\n      setDirFromVector(ndx, ndy);\n    };\n\n    base.events.onInputDown.add((sprite, pointer) => onPointer(pointer));\n    base.events.onInputUp.add(() => { resetDir(); knob.x = baseX; knob.y = baseY; });\n    base.events.onInputOut.add(() => { resetDir(); knob.x = baseX; knob.y = baseY; });\n\n    // Track drag/move globally while pressed\n    this.game.input.addMoveCallback((pointer) => {\n      if (!pointer.isDown) return;\n      onPointer(pointer);\n    }, this);\n\n    // Bomb button (right side)\n    mkBtn({\n      x: w - (115 * s),\n      y: h - (165 * s) - padBottom,\n      r: 54 * s,\n      label: 'ðŸ’£',\n      fill: 0x7a1cff,\n      alpha: 0.32,\n      stroke: 0x00e5ff,\n      strokeAlpha: 0.35,\n      onDown: () => (this.player.touchBomb = true),\n      onUp: () => (this.player.touchBomb = false),\n    });\n\n    // Reposition on resize (RESIZE scale mode)\n    this.game.scale.onSizeChange.add(() => {\n      const w2 = this.game.width;\n      const h2 = this.game.height;\n      // update camera-fixed positions by moving the whole group\n      // easiest: clear & recreate\n      g.destroy(true);\n      this.createTouchControls();\n    });\n  }\n\n  refreshGhostCollision() {\n    if (!this.player) return;\n\n    const ghost = this.player.isGhosted && this.player.isGhosted();\n    if (ghost === this._ghostCollisionEnabled) return;\n\n    // Ghost: phase through destructible blocks (\"balk\") only.\n    // We keep walls solid.\n    this._ghostCollisionEnabled = ghost;\n\n    if (ghost) {\n      this.map.setCollision([this.wallTileIndex], true, this.blockLayer);\n      if (this.balkTileIndex != null) {\n        this.map.setCollision([this.balkTileIndex], false, this.blockLayer);\n      }\n    } else {\n      this.map.setCollision(this.baseCollisionTiles, true, this.blockLayer);\n    }\n  }\n\n  handleSpecialTiles() {\n    if (!this.player) return;\n\n    const col = Math.floor(this.player.body.position.x / TILE_SIZE);\n    const row = Math.floor(this.player.body.position.y / TILE_SIZE);\n\n    // Speed floor\n    const onSpeed = this.speedCells.has(`${col},${row}`);\n    this.player.tileSpeedMultiplier = onSpeed ? 1.65 : 1.0;\n\n    if (!this.player._wasOnSpeed) this.player._wasOnSpeed = false;\n    if (onSpeed && !this.player._wasOnSpeed) {\n      try { if (this.sfxSpeed) this.sfxSpeed.play(); } catch (_) {}\n    }\n    this.player._wasOnSpeed = onSpeed;\n\n    // Portal (pair portals in order: 0<->1, 2<->3, ...)\n    if (this.portalCells.length >= 2) {\n      const now = this.game.time.now;\n      if (!this.player._lastPortalAt) this.player._lastPortalAt = 0;\n\n      const portalIndex = this.portalCells.findIndex(p => p.col === col && p.row === row);\n      if (portalIndex >= 0 && now - this.player._lastPortalAt > 900) {\n        const pairIndex = (portalIndex % 2 === 0) ? portalIndex + 1 : portalIndex - 1;\n        const target = this.portalCells[pairIndex];\n        if (target) {\n          // Teleport to tile center\n          this.player.x = target.col * TILE_SIZE;\n          this.player.y = target.row * TILE_SIZE;\n          this.player.body.velocity.set(0);\n          this.player.body.reset(this.player.x, this.player.y);\n          this.player.prevPosition = { x: this.player.x, y: this.player.y };\n          this.player._lastPortalAt = now;\n\n          try { if (this.sfxPortal) this.sfxPortal.play(); } catch (_) {}\n        }\n      }\n    }\n  }\n\n  onShowBomb({ bomb_id, col, row }) {\n    this.bombs.add(new Bomb(this.game, bomb_id, col, row));\n  }\n\n  onDetonateBomb({ bomb_id, blastedCells }) {\n    // Remove Bomb:\n    findAndDestroyFrom(bomb_id, this.bombs)\n\n    // Render Blast:\n    for (let cell of blastedCells) {\n      this.blasts.add(new FireBlast(this.game, cell));\n    };\n\n    // Destroy Tiles:\n    for (let cell of blastedCells) {\n      if (!cell.destroyed) { continue }\n\n      this.map.putTile(this.blockLayer.layer.properties.empty, cell.col, cell.row, this.blockLayer);\n    };\n\n    // Add Spoils:\n    for (let cell of blastedCells) {\n      if (!cell.destroyed) { continue }\n      if (!cell.spoil) { continue }\n\n      this.spoils.add(new Spoil(this.game, cell.spoil));\n    };\n  }\n\n  onSpoilWasPicked({ player_id, spoil_id, spoil_type }){\n    if (player_id === this.player.id){\n      this.player.pickSpoil(spoil_type)\n    }\n\n    findAndDestroyFrom(spoil_id, this.spoils)\n  }\n\n  onShowBones({ player_id, col, row }) {\n    this.bones.add(new Bone(this.game, col, row));\n\n    findAndDestroyFrom(player_id, this.enemies)\n  }\n\n  onPlayerWin(payload) {\n    clientSocket.emit('leave game');\n\n    // Backward compatible: server may send a skin string or { skin, player_id }\n    const winner_skin = (payload && payload.skin) ? payload.skin : payload;\n\n    this.state.start('Win', true, false, winner_skin);\n  }\n\n  onPlayerDisconnect({ player_id }) {\n    findAndDestroyFrom(player_id, this.enemies);\n\n    if (this.enemies.children.length >= 1) { return }\n\n    this.onPlayerWin()\n  }\n}\n\nexport default Play;\n","import { Text } from '../helpers/elements';\n\nclass Win extends Phaser.State {\n\n  init(winner_skin) {\n    this.skin = winner_skin\n  }\n\n  create() {\n    new Text({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: this.game.world.centerY,\n      text: this.winnerText(),\n      style: {\n        font: '30px Areal',\n        fill: '#FFFFFF'\n      }\n    })\n  }\n\n  update() {\n    if( this.game.input.keyboard.isDown(Phaser.Keyboard.ENTER) ) {\n      this.returnToMenu();\n    }\n  }\n\n  returnToMenu() {\n    this.state.start('Menu');\n  }\n\n  winnerText() {\n    if (this.skin) {\n      return `Player: \"${this.skin}\" won! Press Enter to return to main menu.`\n    }\n\n    return 'Opponent left! Press Enter to return to main menu.'\n  }\n}\n\nexport default Win;\n","import Boot from './states/boot';\nimport Preload from './states/preload';\nimport Menu from './states/menu';\nimport SelectMap from './states/select_map';\nimport PendingGame from './states/pending_game';\nimport Play from './states/play';\nimport Win from './states/win';\n\nclass Game extends Phaser.Game {\n  constructor() {\n    // Use a fixed logical resolution; CSS + ScaleManager will scale to fit mobile screens.\n    // Map size is 28x18 tiles at 35px => 980x630.\n    super(980, 630, Phaser.AUTO, 'game-container');\n\n    // Tell Phaser to use setTimeOut even if RAF(request animation frame) is available.\n    this.config['forceSetTimeOut'] = true\n\n    this.state.add('Boot',         Boot);\n    this.state.add('Preload',      Preload);\n    this.state.add('Menu',         Menu);\n    this.state.add('SelectMap',    SelectMap);\n    this.state.add('PendingGame',  PendingGame);\n    this.state.add('Play',         Play);\n    this.state.add('Win',          Win);\n\n    this.state.start('Boot');\n  }\n}\n\nnew Game();\n"],"names":["Text","Phaser","constructor","game","x","y","text","style","super","this","anchor","setTo","add","existing","Button","asset","callback","callbackContext","overFrame","outFrame","downFrame","upFrame","TextButton","label","addChild","disable","setFrames","inputEnabled","input","useHandCursor","enable","GameSlots","Group","availableGames","yOffset","availableGame","gameBox","Image","button","width","bind","game_id","id","name","destroy","callAll","PlayerSlots","max_players","players","asset_empty","asset_player","xOffset","i","slotBox","slotName","_player","skin","height","SpoilNotification","picture","tween","to","alpha","onComplete","finish","start","Boot","State","create","stage","disableVisibilityChange","scale","scaleMode","ScaleManager","USER_SCALE","pageAlignHorizontally","pageAlignVertically","baseW","baseH","applyCoverScale","w","window","innerWidth","h","innerHeight","s","Math","max","setUserScale","refresh","_","addEventListener","world","centerX","centerY","font","fill","state","Preload","preload","load","image","spritesheet","tilemap","Tilemap","TILED_JSON","audio","Menu","init","slotsWithGame","clientSocket","on","displayPendingGames","stroke","strokeThickness","hostGameAction","emit","update","joinGameAction","AVAILABLE_MAPS","TILE_SIZE","SelectMap","slider","phaseSlider","hotMapImage","coldMapImage","arenaMapImage","openMapImage","runeLabImage","mirrorTempleImage","trapGardenImage","createSlider","customHandlePrev","customHandleNext","objects","confirmStageSelection","map_name","getCurrentIndex","joinToNewGame","payload","error","alert","message","PendingGame","slotsWithPlayer","displayGameInfo","launchGame","gameTitle","startGameButton","startGameAction","aiCount","aiText","aiDifficulty","diffY","aiDiffText","aiEasy","setAIDifficulty","aiNormal","aiHard","aiMinus","setAICount","aiPlus","leaveGameAction","n","min","count","difficulty","current_game","Object","values","length","findFrom","entities","entity","children","findAndDestroyFrom","Info","player","align","redStyle","hud","group","fixedToCamera","bootsIcon","speedText","speedLabel","powerIcon","powerText","powerLabel","delayIcon","delayText","delayLabel","ghostIcon","ghostText","visible","_ghostTimer","deadText","set","refreshStatistic","showGhost","ghostUntilMs","time","events","remove","tick","left","now","toFixed","hideGhost","loop","showDeadInfo","speed","power","delay","Player","Sprite","spawn","prevPosition","tileSpeedMultiplier","_lastBombTime","shieldUntil","ghostUntil","hasRemote","hasKick","physics","arcade","body","setSize","touchLeft","touchRight","touchUp","touchDown","touchBomb","positionUpdaterLoop","animations","info","defineKeyboard","defineSelf","alive","handleMoves","handleBombs","upKey","keyboard","addKey","Keyboard","UP","downKey","DOWN","leftKey","LEFT","rightKey","RIGHT","wKey","W","aKey","A","sKey","S","dKey","D","spaceKey","SPACEBAR","velocity","animationsArray","effectiveSpeed","isDown","right","up","down","push","currentAnimation","play","stop","col","currentCol","row","currentRow","floor","position","newPosition","becomesDead","kill","pickSpoil","spoil_type","increaseSpeed","increasePower","increaseDelay","activateShield","enableRemote","enableKick","activateGhost","isShielded","isGhosted","tint","playerText","EnemyPlayer","currentPosition","lastMoveAt","immovable","goTo","animateFace","Easing","Linear","None","face","diffX","Bomb","Spoil","spoil","frame","t1","Sinusoidal","InOut","t2","_glowTween","_scaleTween","FireBlast","cell","type","Bone","Play","currentGame","createMap","createPlayers","setEventHandlers","camera","follow","createTouchControls","sfxPortal","sfxSpeed","stopAnimationLoop","refreshGhostCollision","collide","blockLayer","enemies","bombs","onPlayerVsBomb","overlap","spoils","onPlayerVsSpoil","blasts","onPlayerVsBlast","handleSpecialTiles","map","addTilesetImage","createLayer","resizeWorld","baseCollisionTiles","layer","properties","collisionTiles","slice","wallTileIndex","wall","balkTileIndex","balk","setCollision","_ghostCollisionEnabled","portalCells","speedCells","Set","specialFx","layers","data","r","c","tile","idx","index","p","sprite","blendMode","blendModes","ADD","key","split","Number","bones","setup","onMovePlayer","onPlayerWin","onShowBomb","onDetonateBomb","onMoveBomb","onSpoilWasPicked","onShowBones","onPlayerDisconnect","spoil_id","blast","player_id","enemy","bomb","dir","_lastKickAt","bomb_id","b","reset","device","touch","iOS","android","navigator","maxTouchPoints","g","cameraOffset","cssSafeBottom","v","getComputedStyle","document","documentElement","getPropertyValue","parseInt","toString","replace","trim","isFinite","padBottom","baseX","baseY","baseR","knobR","base","graphics","beginFill","lineStyle","drawCircle","endFill","enableDrag","knob","resetDir","setDirFromVector","dx","dy","abs","onPointer","pointer","len","sqrt","clamped","onInputDown","onInputUp","onInputOut","addMoveCallback","mkBtn","onDown","onUp","strokeAlpha","btn","t","onSizeChange","ghost","onSpeed","has","_wasOnSpeed","_lastPortalAt","portalIndex","findIndex","pairIndex","target","blastedCells","destroyed","putTile","empty","winner_skin","Win","winnerText","ENTER","returnToMenu","Game","AUTO","config"],"sourceRoot":""}