{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://bombattack/./client/js/entities/bomb.js","webpack://bombattack/./client/js/entities/bone.js","webpack://bombattack/./client/js/entities/enemy_player.js","webpack://bombattack/./client/js/entities/fire_blast.js","webpack://bombattack/./client/js/entities/info.js","webpack://bombattack/./client/js/entities/player.js","webpack://bombattack/./client/js/entities/spoil.js","webpack://bombattack/./client/js/helpers/elements.js","webpack://bombattack/./client/js/states/boot.js","webpack://bombattack/./client/js/states/menu.js","webpack://bombattack/./client/js/states/pending_game.js","webpack://bombattack/./client/js/states/play.js","webpack://bombattack/./client/js/states/preload.js","webpack://bombattack/./client/js/states/select_map.js","webpack://bombattack/./client/js/states/win.js","webpack://bombattack/./client/js/utils/constants.js","webpack://bombattack/./client/js/utils/utils.js","webpack://bombattack/webpack/bootstrap","webpack://bombattack/webpack/runtime/define property getters","webpack://bombattack/webpack/runtime/hasOwnProperty shorthand","webpack://bombattack/webpack/runtime/make namespace object","webpack://bombattack/./client/js/app.js"],"sourcesContent":["import { TILE_SIZE, EXPLOSION_TIME } from '../utils/constants';\n\nexport default class Bomb extends Phaser.Sprite {\n\n  constructor(game, id, col, row) {\n    let centerCol = (col * TILE_SIZE) + TILE_SIZE / 2\n    let centerRow = (row * TILE_SIZE) + TILE_SIZE / 2\n\n    super(game, centerCol, centerRow, 'bomb_tileset');\n    this.scale.setTo(0.7);\n    this.anchor.setTo(0.5);\n\n    this.game = game\n    this.id = id;\n\n    this.game.physics.arcade.enable(this);\n\n    this.game.add.tween(this.scale).to({ x: 1.2, y: 1.2 }, EXPLOSION_TIME, Phaser.Easing.Linear.None, true);\n\n    this.body.immovable = true;\n    // TODO: https://phaser.io/docs/2.4.4/Phaser.AnimationManager.html#add\n    this.animations.add('bomb', [0,1,2,3,4,5,6,7,8,9,10,11,12,13], 6, true);\n    this.animations.play('bomb');\n  }\n\n  update() {\n    // this.game.debug.body(this);\n  }\n\n}\n","import { TILE_SIZE } from '../utils/constants';\n\nexport default class Bone extends Phaser.Sprite {\n\n  constructor(game, col, row) {\n    super(game, (col * TILE_SIZE), (row * TILE_SIZE), 'bone_tileset');\n  }\n\n}\n","import { TILE_SIZE, PING } from '../utils/constants';\nimport { Text } from '../helpers/elements';\n\nexport default class EnemyPlayer extends Phaser.Sprite {\n\n  constructor({ game, id, spawn, skin, displayName, avatarParts }) {\n    super(game, spawn.x, spawn.y, 'bomberman_' + skin);\n\n    this.game = game\n    this.id = id;\n\n    this.currentPosition = spawn;\n    this.lastMoveAt = 0;\n\n    this.game.physics.arcade.enable(this);\n    this.body.setSize(20, 20, 6, 6);\n    this.body.immovable = true;\n\n    this.animations.add('up', [9, 10, 11], 15, true);\n    this.animations.add('down', [0, 1, 2], 15, true);\n    this.animations.add('right', [6, 7, 8], 15, true);\n    this.animations.add('left', [3, 4, 5], 15, true);\n\n    this.defineSelf(displayName || skin)\n\n    // cosmetics for enemies too\n    this.applyAvatarParts(avatarParts || null);\n  }\n\n  update () {\n    this.animateCosmetics();\n    // this.game.debug.body(this);\n  }\n\n  goTo(newPosition) {\n    this.lastMoveAt = this.game.time.now;\n    this._movingUntil = this.game.time.now + PING;\n\n    this.animateFace(newPosition);\n\n    this.game.add.tween(this).to(newPosition, PING, Phaser.Easing.Linear.None, true);\n  }\n\n  animateFace(newPosition) {\n    let face = 'down';\n    let diffX = newPosition.x - this.currentPosition.x;\n    let diffY = newPosition.y - this.currentPosition.y;\n\n    if (diffX < 0) {\n      face = 'left'\n    } else if (diffX > 0) {\n      face = 'right'\n    } else if (diffY < 0) {\n      face = 'up'\n    } else if (diffY > 0) {\n      face = 'down'\n    }\n\n    this.animations.play(face)\n    this.currentPosition = newPosition;\n  }\n\n  applyAvatarParts(parts) {\n    try {\n      if (this._cosmetics) {\n        for (const s of this._cosmetics) { try { s.destroy(); } catch (_) {} }\n      }\n      this._cosmetics = [];\n      if (!parts) return;\n\n      const add = (key, x, y, alpha=1) => {\n        if (!key) return;\n        const spr = this.game.add.sprite(x, y, key);\n        spr.anchor.setTo(0.5);\n        spr.scale.setTo(0.34);\n        spr.alpha = alpha;\n        spr._baseY = y;\n        this.addChild(spr);\n        this._cosmetics.push(spr);\n      };\n\n      const baseKey = (parts && parts.character) ? ('cosmetic_' + parts.character) : 'cosmetic_base';\n      add(baseKey, 16, 16, 1);\n\n      const hair = parts.hair ? ('cosmetic_' + parts.hair) : null;\n      const outfit = parts.outfit ? ('cosmetic_' + parts.outfit) : null;\n      const hat = parts.hat ? ('cosmetic_' + parts.hat) : null;\n      const face = parts.face ? ('cosmetic_' + parts.face) : null;\n      const pattern = parts.pattern ? ('cosmetic_' + parts.pattern) : null;\n\n      try { this.loadTexture('cosmetic_transparent'); } catch (_) {}\n\n      add(outfit, 16, 22, 0.98);\n      add(pattern,16, 22, 0.99);\n      add(face,   16, 14, 0.995);\n      add(hair,   16, 12, 0.999);\n      add(hat,    16, 6,  0.999);\n    } catch (_) {}\n  }\n\n  animateCosmetics() {\n    try {\n      if (!this._cosmetics || !this._cosmetics.length) return;\n      if (!this._cosBobT) this._cosBobT = 0;\n\n      // If position changed since last frame, consider moving\n      const moving = !!(this._movingUntil && this.game.time.now < this._movingUntil);\n      if (moving) this._cosBobT += (this.game.time.elapsedMS || 16);\n      else this._cosBobT = 0;\n\n      const bob = moving ? Math.sin(this._cosBobT / 90.0) * 1.6 : 0;\n      for (const s of this._cosmetics) {\n        if (!s) continue;\n        const by = (typeof s._baseY === 'number') ? s._baseY : s.y;\n        s.y = by + bob;\n      }\n    } catch (_) {}\n  }\n\n  defineSelf(name) {\n    let playerText = new Text({\n      game: this.game,\n      x: TILE_SIZE / 2,\n      y: -10,\n      text: name,\n      style: {\n        font: '14px Areal',\n        fill: '#FFFFFF',\n          stroke: '#000000',\n          strokeThickness: 3\n      }\n    })\n\n    this.addChild(playerText);\n  }\n}\n","import { TILE_SIZE } from '../utils/constants';\n\nexport default class FireBlast extends Phaser.Sprite {\n\n  constructor(game, cell) {\n    super(game, (cell.col * TILE_SIZE), (cell.row * TILE_SIZE), cell.type, 0);\n\n    this.game = game\n\n    this.animations.add('blast', [0, 1, 2, 3, 4]);\n\n    // 15 - framerate, loop, kill_on_complete\n    this.play('blast', 15, false, true);\n\n    this.game.physics.arcade.enable(this);\n  }\n\n}\n","export default class Info {\n\n  constructor({ game, player }) {\n    this.game = game;\n    this.player = player;\n\n    this.style    = { font: '14px Arial', fill: '#ffffff', align: 'left' }\n    this.redStyle = { font: '30px Arial', fill: '#ff0044', align: 'center' };\n\n    // HUD group (sticks to camera)\n    this.hud = this.game.add.group();\n    this.hud.fixedToCamera = true;\n\n    let bootsIcon  = new Phaser.Image(this.game, 5, 2, 'placeholder_speed');\n    this.speedText = new Phaser.Text(this.game, 35, 7, this.speedLabel(), this.style);\n    bootsIcon.addChild(this.speedText)\n    this.hud.add(bootsIcon);\n\n    let powerIcon  = new Phaser.Image(this.game, 110, 2, 'placeholder_power');\n    this.powerText = new Phaser.Text(this.game, 35, 7, this.powerLabel(), this.style);\n    powerIcon.addChild(this.powerText)\n    this.hud.add(powerIcon);\n\n    let delayIcon  = new Phaser.Image(this.game, 215, 2, 'placeholder_time');\n    this.delayText = new Phaser.Text(this.game, 35, 7, this.delayLabel(), this.style);\n    delayIcon.addChild(this.delayText)\n    this.hud.add(delayIcon);\n\n    // Ghost powerup indicator (hidden unless active)\n    let ghostIcon = new Phaser.Image(this.game, 320, 2, 'ghost_icon');\n    ghostIcon.alpha = 0.85;\n    this.ghostText = new Phaser.Text(this.game, 35, 7, '', this.style);\n    ghostIcon.addChild(this.ghostText);\n    ghostIcon.visible = false;\n    this.ghostIcon = ghostIcon;\n    this.hud.add(ghostIcon);\n\n    this._ghostTimer = null;\n\n    this.deadText = this.game.add.text(this.game.world.centerX, this.game.world.height - 30, 'You died :(', this.redStyle);\n    this.deadText.anchor.set(0.5);\n    this.deadText.visible = false;\n    this.deadText.fixedToCamera = true;\n  }\n\n  refreshStatistic() {\n    this.speedText.text = this.speedLabel();\n    this.powerText.text = this.powerLabel();\n    this.delayText.text = this.delayLabel();\n  }\n\n  showGhost(ghostUntilMs) {\n    if (!this.ghostIcon) return;\n\n    this.ghostIcon.visible = true;\n\n    if (this._ghostTimer) {\n      try { this.game.time.events.remove(this._ghostTimer); } catch (_) {}\n      this._ghostTimer = null;\n    }\n\n    const tick = () => {\n      const left = Math.max(0, ghostUntilMs - this.game.time.now);\n      this.ghostText.text = `${(left / 1000).toFixed(1)}s`;\n\n      if (left <= 0) {\n        this.hideGhost();\n      }\n    };\n\n    tick();\n    this._ghostTimer = this.game.time.events.loop(150, tick);\n  }\n\n  hideGhost() {\n    if (this.ghostIcon) this.ghostIcon.visible = false;\n    if (this._ghostTimer) {\n      try { this.game.time.events.remove(this._ghostTimer); } catch (_) {}\n      this._ghostTimer = null;\n    }\n  }\n\n  showDeadInfo() {\n    this.deadText.visible = true\n  }\n\n  speedLabel() {\n    return this.player.speed\n  }\n\n  powerLabel() {\n    return `x ${this.player.power}`\n  }\n\n  delayLabel() {\n    return `${this.player.delay / 1000} sec.`\n  }\n}\n","import {\n  PING, TILE_SIZE, MAX_SPEED, STEP_SPEED, INITIAL_SPEED, SPEED, POWER, DELAY,\n  MIN_DELAY, STEP_DELAY, INITIAL_DELAY, INITIAL_POWER, STEP_POWER,\n  SHIELD, REMOTE, KICK, GHOST, SHIELD_DURATION_MS, GHOST_DURATION_MS\n} from '../utils/constants';\n\nimport Info from './info';\nimport { SpoilNotification, Text } from '../helpers/elements';\n\nexport default class Player extends Phaser.Sprite {\n\n  constructor({ game, id, spawn, skin, displayName, avatarParts }) {\n    super(game, spawn.x, spawn.y, 'bomberman_' + skin);\n\n    this.game = game;\n    this.id = id;\n\n    this.prevPosition = { x: spawn.x, y: spawn.y };\n\n    this.delay = INITIAL_DELAY;\n    this.power = INITIAL_POWER;\n    this.speed = INITIAL_SPEED;\n    this.tileSpeedMultiplier = 1.0;\n    this._lastBombTime = 0;\n\n    // powerups\n    this.shieldUntil = 0;\n    this.ghostUntil = 0;\n    this.hasRemote = false;\n    this.hasKick = false;\n\n    this.game.add.existing(this);\n    this.game.physics.arcade.enable(this);\n    this.body.setSize(20, 20, 6, 6);\n\n    // Touch controls state (set by Play state UI)\n    this.touchLeft = false;\n    this.touchRight = false;\n    this.touchUp = false;\n    this.touchDown = false;\n    this.touchBomb = false;\n\n    game.time.events.loop(PING , this.positionUpdaterLoop.bind(this));\n\n    this.animations.add('up', [9, 10, 11], 15, true);\n    this.animations.add('down', [0, 1, 2], 15, true);\n    this.animations.add('right', [6, 7, 8], 15, true);\n    this.animations.add('left', [3, 4, 5], 15, true);\n\n    this.info = new Info({ game: this.game, player: this });\n\n    this.defineKeyboard()\n    this.defineSelf(displayName || skin)\n\n    // Paper-doll cosmetics (hair/outfit/hat): simple layered images above base sprite\n    this.avatarParts = avatarParts || null;\n    this.applyAvatarParts(this.avatarParts);\n  }\n\n  update() {\n    if (this.alive) {\n      this.handleMoves()\n      this.handleBombs()\n    }\n\n    this.animateCosmetics();\n\n    // this.game.debug.body(this);\n    // this.game.debug.spriteInfo(this, 32, 32);\n  }\n\n  defineKeyboard() {\n    // Arrow keys\n    this.upKey    = this.game.input.keyboard.addKey(Phaser.Keyboard.UP)\n    this.downKey  = this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN)\n    this.leftKey  = this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT)\n    this.rightKey = this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT)\n\n    // WASD\n    this.wKey = this.game.input.keyboard.addKey(Phaser.Keyboard.W)\n    this.aKey = this.game.input.keyboard.addKey(Phaser.Keyboard.A)\n    this.sKey = this.game.input.keyboard.addKey(Phaser.Keyboard.S)\n    this.dKey = this.game.input.keyboard.addKey(Phaser.Keyboard.D)\n\n    // Bomb\n    this.spaceKey = this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR)\n  }\n\n  handleMoves() {\n    this.body.velocity.set(0);\n    let animationsArray = []\n\n    const effectiveSpeed = this.speed * (this.tileSpeedMultiplier || 1.0);\n\n    const left  = this.leftKey.isDown  || (this.aKey && this.aKey.isDown) || this.touchLeft;\n    const right = this.rightKey.isDown || (this.dKey && this.dKey.isDown) || this.touchRight;\n    const up    = this.upKey.isDown    || (this.wKey && this.wKey.isDown) || this.touchUp;\n    const down  = this.downKey.isDown  || (this.sKey && this.sKey.isDown) || this.touchDown;\n\n    if (left){\n      this.body.velocity.x = -effectiveSpeed;\n      animationsArray.push('left')\n    } else if (right) {\n      this.body.velocity.x = effectiveSpeed;\n      animationsArray.push('right')\n    }\n\n    if (up) {\n      this.body.velocity.y = -effectiveSpeed;\n      animationsArray.push('up')\n    } else if (down) {\n      this.body.velocity.y = effectiveSpeed;\n      animationsArray.push('down')\n    }\n\n    let currentAnimation = animationsArray[0]\n    if (currentAnimation){\n      this.animations.play(currentAnimation)\n      return\n    }\n\n    this.animations.stop();\n  }\n\n  handleBombs() {\n    const bombDown = this.game.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR) || this.touchBomb;\n\n    if (bombDown) {\n      let now = this.game.time.now;\n\n      if (now > this._lastBombTime) {\n        this._lastBombTime = now + this.delay;\n\n        clientSocket.emit('create bomb', { col: this.currentCol(), row: this.currentRow() });\n      }\n    }\n  }\n\n  currentCol() {\n    return Math.floor(this.body.position.x / TILE_SIZE)\n  }\n\n  currentRow() {\n    return Math.floor(this.body.position.y / TILE_SIZE)\n  }\n\n  positionUpdaterLoop() {\n    let newPosition = { x: this.position.x, y: this.position.y }\n\n    if (this.prevPosition.x !== newPosition.x || this.prevPosition.y !== newPosition.y) {\n      clientSocket.emit('update player position', newPosition);\n      this.prevPosition = newPosition;\n    }\n  }\n\n  becomesDead() {\n    this.info.showDeadInfo()\n    this.kill();\n  }\n\n  pickSpoil( spoil_type ){\n    if ( spoil_type === SPEED ){ this.increaseSpeed() }\n    if ( spoil_type === POWER ){ this.increasePower() }\n    if ( spoil_type === DELAY ){ this.increaseDelay() }\n    if ( spoil_type === SHIELD ){ this.activateShield() }\n    if ( spoil_type === REMOTE ){ this.enableRemote() }\n    if ( spoil_type === KICK ){ this.enableKick() }\n    if ( spoil_type === GHOST ){ this.activateGhost() }\n  }\n\n  isShielded() {\n    return this.shieldUntil && this.game.time.now < this.shieldUntil;\n  }\n\n  isGhosted() {\n    return this.ghostUntil && this.game.time.now < this.ghostUntil;\n  }\n\n  increaseSpeed(){\n    let asset = 'speed_up_no_bonus'\n\n    if (this.speed < MAX_SPEED) {\n      this.speed = this.speed + STEP_SPEED;\n      this.info.refreshStatistic();\n      asset = 'speed_up_bonus'\n    }\n\n    new SpoilNotification({ game: this.game, asset: asset, x: this.position.x, y: this.position.y })\n  }\n\n  increaseDelay(){\n    let asset = 'delay_up_no_bonus'\n\n    if (this.delay > MIN_DELAY){\n      this.delay -= STEP_DELAY;\n      this.info.refreshStatistic();\n      asset = 'delay_up_bonus'\n    }\n\n    new SpoilNotification({ game: this.game, asset: asset, x: this.position.x, y: this.position.y })\n  }\n\n  increasePower(){\n    let asset = 'power_up_bonus'\n\n    this.power += STEP_POWER;\n    this.info.refreshStatistic();\n\n    new SpoilNotification({ game: this.game, asset: asset, x: this.position.x, y: this.position.y })\n  }\n\n  activateShield() {\n    this.shieldUntil = this.game.time.now + SHIELD_DURATION_MS;\n\n    // Simple visual: flash tint while shielded\n    this.tint = 0x66ccff;\n    this.game.time.events.add(SHIELD_DURATION_MS, () => {\n      // If ghost is active, keep ghost visual\n      if (this.isGhosted && this.isGhosted()) {\n        this.tint = 0xa7f7ff;\n        this.alpha = 0.65;\n      } else {\n        this.tint = 0xffffff;\n      }\n    });\n\n    new SpoilNotification({ game: this.game, asset: 'placeholder_time', x: this.position.x, y: this.position.y })\n  }\n\n  enableRemote() {\n    this.hasRemote = true;\n    new SpoilNotification({ game: this.game, asset: 'placeholder_power', x: this.position.x, y: this.position.y })\n  }\n\n  enableKick() {\n    this.hasKick = true;\n    new SpoilNotification({ game: this.game, asset: 'placeholder_speed', x: this.position.x, y: this.position.y })\n  }\n\n  applyAvatarParts(parts) {\n    try {\n      // clear old\n      if (this._cosmetics) {\n        for (const s of this._cosmetics) {\n          try { s.destroy(); } catch (_) {}\n        }\n      }\n      this._cosmetics = [];\n\n      if (!parts) return;\n      const add = (key, x, y, alpha=1) => {\n        if (!key) return;\n        const spr = this.game.add.sprite(x, y, key);\n        spr.anchor.setTo(0.5);\n        // cosmetics assets are 128x128 but we display them slightly larger than 32x32\n        spr.scale.setTo(0.34);\n        spr.alpha = alpha;\n        spr._baseY = y;\n        this.addChild(spr);\n        this._cosmetics.push(spr);\n      };\n\n      // Base character\n      const baseKey = (parts && parts.character) ? ('cosmetic_' + parts.character) : 'cosmetic_base';\n      add(baseKey, 16, 16, 1);\n\n      // Preloaded as images: cosmetic_hair_X, cosmetic_outfit_X, cosmetic_hat_X\n      const hair = parts.hair ? ('cosmetic_' + parts.hair) : null;\n      const outfit = parts.outfit ? ('cosmetic_' + parts.outfit) : null;\n      const hat = parts.hat ? ('cosmetic_' + parts.hat) : null;\n      const face = parts.face ? ('cosmetic_' + parts.face) : null;\n      const pattern = parts.pattern ? ('cosmetic_' + parts.pattern) : null;\n\n      // Hide legacy bomberman sprite underneath (keep physics/body) without affecting children.\n      try { this.loadTexture('cosmetic_transparent'); } catch (_) {}\n\n      // tuned offsets so accessories don't cover the face by default\n      add(outfit, 16, 22, 0.98);\n      add(pattern,16, 22, 0.99);\n      add(face,   16, 14, 0.995);\n      add(hair,   16, 12, 0.999);\n      add(hat,    16, 6,  0.999);\n    } catch (_) {}\n  }\n\n  animateCosmetics() {\n    try {\n      if (!this._cosmetics || !this._cosmetics.length) return;\n\n      const moving = Math.abs(this.body.velocity.x) > 1 || Math.abs(this.body.velocity.y) > 1;\n      if (!this._cosBobT) this._cosBobT = 0;\n\n      if (moving) {\n        this._cosBobT += (this.game.time.elapsedMS || 16);\n      } else {\n        // decay to rest\n        this._cosBobT = 0;\n      }\n\n      const bob = moving ? Math.sin(this._cosBobT / 90.0) * 1.6 : 0;\n\n      for (const s of this._cosmetics) {\n        if (!s) continue;\n        const by = (typeof s._baseY === 'number') ? s._baseY : s.y;\n        s.y = by + bob;\n      }\n    } catch (_) {}\n  }\n\n  activateGhost() {\n    this.ghostUntil = this.game.time.now + GHOST_DURATION_MS;\n\n    // Visual: semi-transparent + cool tint\n    this.alpha = 0.65;\n    this.tint = 0xa7f7ff;\n\n    // HUD indicator + countdown\n    if (this.info && this.info.showGhost) {\n      this.info.showGhost(this.ghostUntil);\n    }\n\n    // Clear visual at end (unless shield overwrote tint, reset to white)\n    this.game.time.events.add(GHOST_DURATION_MS, () => {\n      this.alpha = 1;\n      // if shield is still on, keep its tint\n      if (!(this.isShielded && this.isShielded())) {\n        this.tint = 0xffffff;\n      }\n      if (this.info && this.info.hideGhost) {\n        this.info.hideGhost();\n      }\n    });\n\n    new SpoilNotification({ game: this.game, asset: 'ghost_icon', x: this.position.x, y: this.position.y })\n  }\n\n  defineSelf(name) {\n    let playerText = new Text({\n      game: this.game,\n      x: TILE_SIZE / 2,\n      y: -10,\n      text: `\\u272E ${name} \\u272E`,\n      style: {\n        font: '15px Areal',\n        fill: '#FFFFFF',\n          stroke: '#000000',\n          strokeThickness: 3\n      }\n    })\n\n    this.addChild(playerText);\n  }\n}\n","import { SPEED, POWER, DELAY, SHIELD, REMOTE, KICK, GHOST, TILE_SIZE } from '../utils/constants';\n\nexport default class Spoil extends Phaser.Sprite {\n\n  constructor(game, spoil) {\n\n    // UK01: spoil_tileset now contains 7 frames (0..6) matching constants\n    let frame = 0;\n    if (spoil.spoil_type === SPEED) frame = 0;\n    if (spoil.spoil_type === POWER) frame = 1;\n    if (spoil.spoil_type === DELAY) frame = 2;\n    if (spoil.spoil_type === SHIELD) frame = 3;\n    if (spoil.spoil_type === REMOTE) frame = 4;\n    if (spoil.spoil_type === KICK) frame = 5;\n    if (spoil.spoil_type === GHOST) frame = 6;\n\n    super(game, (spoil.col * TILE_SIZE), (spoil.row * TILE_SIZE), 'spoil_tileset', frame);\n\n    this.id = spoil.id\n\n    this.game.physics.arcade.enable(this);\n\n    // Light glow/pulse to make spoils more visible (mobile-friendly)\n    this.alpha = 0.92;\n    this.scale.setTo(1.0);\n    try {\n      const t1 = this.game.add.tween(this).to({ alpha: 0.62 }, 420, Phaser.Easing.Sinusoidal.InOut, true, 0, -1, true);\n      const t2 = this.game.add.tween(this.scale).to({ x: 1.08, y: 1.08 }, 520, Phaser.Easing.Sinusoidal.InOut, true, 0, -1, true);\n      // keep refs to avoid GC issues in some Phaser builds\n      this._glowTween = t1;\n      this._scaleTween = t2;\n    } catch (_) {}\n  }\n\n}\n","export class Text extends Phaser.Text {\n\n  constructor({ game, x, y, text, style }) {\n    super(game, x, y, text, style);\n    this.anchor.setTo(0.5);\n\n    this.game.add.existing(this);\n  }\n\n}\n\nexport class Button extends Phaser.Button {\n\n  constructor({ game, x, y, asset, callback, callbackContext, overFrame, outFrame, downFrame, upFrame }) {\n    super(game, x, y, asset, callback, callbackContext, overFrame, outFrame, downFrame, upFrame);\n    this.anchor.setTo(0.5);\n\n    this.game.add.existing(this);\n  }\n\n}\n\nexport class TextButton extends Phaser.Button {\n\n  constructor({ game, x, y, asset, callback, callbackContext, overFrame, outFrame, downFrame, upFrame, label, style }) {\n    super(game, x, y, asset, callback, callbackContext, overFrame, outFrame, downFrame, upFrame);\n    this.anchor.setTo(0.5);\n\n    this.text = new Phaser.Text(this.game, 0, 0, label, style);\n    this.text.anchor.setTo(0.5);\n\n    this.addChild(this.text);\n\n    this.game.add.existing(this);\n  }\n\n  disable() {\n    this.setFrames(3, 3);\n    this.inputEnabled = false;\n    this.input.useHandCursor = false;\n  }\n\n  enable() {\n    this.setFrames(1, 0, 2);\n    this.inputEnabled = true;\n    this.input.useHandCursor = true;\n  }\n\n}\n\nexport class GameSlots extends Phaser.Group {\n\n  constructor({ game, availableGames, callback, callbackContext, x, y, style }) {\n    super(game);\n\n    let game_slot_asset = 'slot_backdrop'\n    let game_enter_asset = 'list_icon'\n\n    let yOffset = y;\n\n    for (let availableGame of availableGames) {\n      let gameBox = new Phaser.Image(this.game, x, yOffset, game_slot_asset)\n      let button = new Phaser.Button(this.game, gameBox.width - 100, 12, game_enter_asset, callback.bind(callbackContext, { game_id: availableGame.id }), null, 1, 0, 2, 1);\n      let text = new Phaser.Text(this.game, 30, 25, `Join Game: ${availableGame.name}`, style);\n\n      gameBox.addChild(button);\n      gameBox.addChild(text);\n\n      this.add(gameBox);\n\n      yOffset += 105;\n    }\n  }\n\n  destroy() {\n    this.callAll('kill') // destroy\n  }\n}\n\nexport class PlayerSlots extends Phaser.Group {\n\n  constructor({ game, max_players, players, x, y, asset_empty, asset_player, style }) {\n    super(game);\n\n    let xOffset = x;\n\n    for (let i = 0; i < max_players; i++) {\n      let slotBox\n      let slotName\n      let _player = players[i]\n\n      if (_player) {\n        slotBox = new Phaser.Image(this.game, xOffset, y, asset_player+_player.skin)\n        const label = _player.displayName || _player.skin;\n        slotName = new Phaser.Text(this.game, slotBox.width/2, slotBox.height + 15, label, style);\n        slotName.anchor.setTo(0.5);\n        slotBox.addChild(slotName);\n      } else {\n        slotBox = new Phaser.Image(this.game, xOffset, y, asset_empty)\n      }\n\n      this.add(slotBox);\n      xOffset += 170;\n    }\n  }\n\n  destroy() {\n    this.callAll('kill')\n  }\n}\n\nexport class SpoilNotification extends Phaser.Group {\n\n  constructor({ game, asset, x, y }) {\n    super(game)\n\n    this.picture = new Phaser.Image(this.game, x, y - 20, asset);\n    this.picture.anchor.setTo(0.5);\n\n    this.add(this.picture);\n\n    this.tween = this.game.add.tween(this.picture);\n    this.tween.to({ y: this.picture.y - 25, alpha: 0 }, 600);\n\n    this.tween.onComplete.add(this.finish, this);\n\n    this.tween.start()\n  }\n\n  finish() {\n    this.callAll('kill')\n  }\n}\n","import { Text } from '../helpers/elements';\n\nclass Boot extends Phaser.State {\n\n  create() {\n    // Make the game keep reacting to messages from the server even when the game window doesnt have focus.\n    // The game pauses when I open a new tab in the same window, but does not pause when I focus on another application\n    this.game.stage.disableVisibilityChange = true;\n\n    // Responsive scaling (stable on mobile, keeps aspect ratio)\n    // SHOW_ALL avoids distortion and keeps input coordinates consistent.\n    // It may add letterboxing on some aspect ratios, but gameplay + touch controls remain reliable.\n    this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n    this.game.scale.pageAlignHorizontally = true;\n    this.game.scale.pageAlignVertically = true;\n\n    const refresh = () => {\n      try { this.game.scale.refresh(); } catch (_) {}\n    };\n\n    window.addEventListener('resize', refresh);\n    refresh();\n\n    new Text({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: this.game.world.centerY,\n      text: 'Loading...',\n      style: {\n        font: '30px Areal',\n        fill: '#FFFFFF'\n      }\n    })\n\n    // Mobile browsers often block audio until a user gesture.\n    // Unlock/resume audio on first tap/click.\n    try {\n      this.game.sound.mute = false;\n      this.game.input.onDown.addOnce(() => {\n        try {\n          if (this.game.sound && this.game.sound.context && this.game.sound.context.state === 'suspended') {\n            this.game.sound.context.resume();\n          }\n          if (this.game.sound && this.game.sound.unlock) {\n            this.game.sound.unlock();\n          }\n        } catch (_) {}\n      });\n    } catch (_) {}\n\n    this.state.start('Preload');\n  }\n\n}\n\nexport default Boot;\n","import { Text, TextButton, GameSlots } from '../helpers/elements';\n\nclass Menu extends Phaser.State {\n\n  init() {\n    this.slotsWithGame = null;\n\n    clientSocket.on('display pending games', this.displayPendingGames.bind(this));\n  }\n\n  create() {\n    // Keep the background so the canvas isn't blank behind HTML overlay\n    let background = this.add.image(this.game.world.centerX, this.game.world.centerY, 'main_menu');\n    background.anchor.setTo(0.5);\n\n    // Use HTML overlay for mobile reliability\n    try {\n      if (window.UK01Menu && window.UK01Menu.showMenu) {\n        window.UK01Menu.showMenu();\n      }\n    } catch (_) {}\n\n    clientSocket.emit('enter lobby', this.displayPendingGames.bind(this));\n  }\n\n  update() {\n  }\n\n  hostGameAction() {\n    clientSocket.emit('leave lobby');\n    this.state.start('SelectMap');\n  }\n\n  displayPendingGames(availableGames) {\n    // NOTE: That is not optimal way to preview slots,\n    //       we should implement AddSlotToGroup, RemoveSlotFromGroup\n\n    // I triying to care about readability, not about performance.\n    if (this.slotsWithGame) {\n      this.slotsWithGame.destroy()\n    }\n\n    this.slotsWithGame = new GameSlots({\n      game: this.game,\n      availableGames: availableGames,\n      callback: this.joinGameAction,\n      callbackContext: this,\n      x: this.game.world.centerX - 220,\n      y: 160,\n      style: {\n        font: '35px Areal',\n        fill: '#efefef',\n        stroke: '#ae743a',\n        strokeThickness: 3\n      }\n    })\n  }\n\n  joinGameAction(game_id) {\n    clientSocket.emit('leave lobby');\n    // https://phaser.io/docs/2.6.2/Phaser.StateManager.html#start\n    this.state.start('PendingGame', true, false, game_id);\n  }\n}\n\nexport default Menu;\n","import { Text, Button, TextButton, PlayerSlots } from '../helpers/elements';\n\nclass PendingGame extends Phaser.State {\n\n  init(payload) {\n    this.slotsWithPlayer = null;\n\n    // Phaser may pass init params as a plain value (game_id) or as an object { game_id }\n    this.game_id = (payload && payload.game_id) ? payload.game_id : payload;\n\n    clientSocket.on('update game', this.displayGameInfo.bind(this));\n    clientSocket.on('launch game', this.launchGame.bind(this));\n\n    clientSocket.emit('enter pending game', { game_id: this.game_id });\n  }\n\n  create() {\n    let background = this.add.image(this.game.world.centerX, this.game.world.centerY, 'main_menu');\n    background.anchor.setTo(0.5);\n\n    // Use HTML overlay for mobile reliability\n    try {\n      if (window.UK01Pending && window.UK01Pending.show) {\n        window.UK01Pending.show();\n      }\n      // hide main menu overlay if visible\n      if (window.UK01Menu && window.UK01Menu.hideMenu) {\n        window.UK01Menu.hideMenu();\n      }\n    } catch (_) {}\n\n    // keep minimal title text in canvas (optional)\n    this.gameTitle = new Text({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: this.game.world.centerY - 215,\n      text: '',\n      style: {\n        font: '35px Areal',\n        fill: '#9ec0ba',\n        stroke: '#6f7975',\n        strokeThickness: 3\n      }\n    })\n  }\n\n  setAICount(n) {\n    this.aiCount = Math.max(0, Math.min(3, n));\n    if (this.aiText) this.aiText.text = `AI: ${this.aiCount}`;\n\n    clientSocket.emit('set ai count', { count: this.aiCount });\n  }\n\n  setAIDifficulty(difficulty) {\n    this.aiDifficulty = difficulty;\n    if (this.aiDiffText) this.aiDiffText.text = `: ${this.aiDifficulty}`;\n\n    clientSocket.emit('set ai difficulty', { difficulty: this.aiDifficulty });\n  }\n\n  displayGameInfo({ current_game }) {\n    let players = Object.values(current_game.players);\n\n    this.gameTitle.text = current_game.name\n\n    if (this.slotsWithPlayer) {\n      this.slotsWithPlayer.destroy()\n    }\n\n    this.slotsWithPlayer = new PlayerSlots({\n      game: this.game,\n      max_players: current_game.max_players,\n      players: players,\n      x: this.game.world.centerX - 245,\n      y: this.game.world.centerY - 80,\n      asset_empty: 'bomberman_head_blank',\n      asset_player: 'bomberman_head_',\n      style: {\n        font: '20px Areal',\n        fill: '#48291c'\n      }\n    })\n\n    // Update HTML overlay\n    try {\n      if (window.UK01Pending && window.UK01Pending.updateFromGame) {\n        window.UK01Pending.updateFromGame(current_game);\n      }\n    } catch (_) {}\n  }\n\n  leaveGameAction() {\n    clientSocket.emit('leave pending game');\n\n    this.state.start('Menu');\n  }\n\n  startGameAction() {\n    clientSocket.emit('start game');\n  }\n\n  launchGame(game) {\n    this.state.start('Play', true, false, game);\n  }\n}\n\nexport default PendingGame;\n","import { findFrom, findAndDestroyFrom } from '../utils/utils';\nimport { TILESET, LAYER, TILE_SIZE, TILE_PORTAL, TILE_SPEED_FLOOR } from '../utils/constants';\n\nimport Player from '../entities/player';\nimport EnemyPlayer from '../entities/enemy_player';\nimport Bomb from '../entities/bomb';\nimport Spoil from '../entities/spoil';\nimport FireBlast from '../entities/fire_blast';\nimport Bone from '../entities/bone';\n\nclass Play extends Phaser.State {\n  init(game) {\n    this.currentGame = game\n  }\n\n  create() {\n    this.createMap();\n    this.createPlayers();\n    this.setEventHandlers();\n\n    // Keep player in view on mobile / resized canvas\n    if (this.player) {\n      this.game.camera.follow(this.player);\n    }\n\n    // hide overlays during gameplay\n    try { if (window.UK01Pending && window.UK01Pending.hide) window.UK01Pending.hide(); } catch (_) {}\n    try { if (window.UK01Menu && window.UK01Menu.hideMenu) window.UK01Menu.hideMenu(); } catch (_) {}\n\n    // Use HTML touch overlay on mobile (works even when canvas is letterboxed)\n    try { if (window.UK01Touch && window.UK01Touch.show) window.UK01Touch.show(); } catch (_) {}\n\n    // Keep Phaser touch controls disabled to avoid double-input on mobile\n    // this.createTouchControls();\n\n    // SFX / BGM\n    this.sfxPortal = this.game.add.audio('sfx_portal');\n    this.sfxSpeed = this.game.add.audio('sfx_speed');\n    this.sfxExplosion = this.game.add.audio('sfx_explosion');\n    this.sfxDeath = this.game.add.audio('sfx_death');\n\n    // Background music (loop)\n    // On mobile, playback may be blocked until a user gesture; we create the sound here\n    // and (re)start it on first joystick tap via tryUnlockAudio() in index.html.\n    try {\n      if (this.game._bgm && this.game._bgm.stop) {\n        this.game._bgm.stop();\n      }\n      this.game._bgm = this.game.add.audio('bgm_main');\n      this.game._bgm.loop = true;\n      this.game._bgm.volume = 0.28;\n      // attempt to play (may fail silently if locked)\n      this.game._bgm.play();\n    } catch (_) {}\n\n    this.game.time.events.loop(400 , this.stopAnimationLoop.bind(this));\n  }\n\n  update() {\n    this.refreshGhostCollision();\n\n    this.game.physics.arcade.collide(this.player, this.blockLayer);\n    this.game.physics.arcade.collide(this.player, this.enemies);\n    this.game.physics.arcade.collide(this.player, this.bombs, this.onPlayerVsBomb, null, this);\n\n    this.game.physics.arcade.overlap(this.player, this.spoils, this.onPlayerVsSpoil, null, this);\n    this.game.physics.arcade.overlap(this.player, this.blasts, this.onPlayerVsBlast, null, this);\n\n    this.handleSpecialTiles();\n  }\n\n  createMap() {\n    this.map = this.add.tilemap(this.currentGame.map_name);\n\n    this.map.addTilesetImage(TILESET);\n\n    this.blockLayer = this.map.createLayer(LAYER);\n    this.blockLayer.resizeWorld();\n\n    this.baseCollisionTiles = (this.blockLayer.layer.properties.collisionTiles || []).slice();\n    this.wallTileIndex = this.blockLayer.layer.properties.wall;\n    this.balkTileIndex = this.blockLayer.layer.properties.balk;\n\n    this.map.setCollision(this.baseCollisionTiles, true, this.blockLayer);\n    this._ghostCollisionEnabled = false;\n\n    // Special tiles cache\n    this.portalCells = [];\n    this.speedCells = new Set();\n\n    // Visual overlays (magic style placeholder)\n    this.specialFx = this.game.add.group();\n\n    const layer = this.map.layers[0];\n    const w = layer.width;\n    const h = layer.height;\n    const data = layer.data;\n\n    for (let r = 0; r < h; r++) {\n      for (let c = 0; c < w; c++) {\n        const tile = data[r][c];\n        if (!tile) continue;\n        const idx = tile.index;\n\n        // Portal tile id must NOT conflict with balk (destructible) tile id.\n        // cold_map uses balk=2, which would otherwise create \"too many portals\".\n        if (idx === TILE_PORTAL && idx !== this.balkTileIndex) {\n          this.portalCells.push({ col: c, row: r });\n        } else if (idx === TILE_SPEED_FLOOR) {\n          this.speedCells.add(`${c},${r}`);\n        }\n      }\n    }\n\n    // Special tiles visuals (animated spritesheets)\n    // NOTE: We keep them as a separate group so they sit above the map.\n    for (const p of this.portalCells) {\n      const x = p.col * TILE_SIZE;\n      const y = p.row * TILE_SIZE;\n      const s = this.game.add.sprite(x, y, 'portal_fx');\n      s.alpha = 0.95;\n      s.blendMode = Phaser.blendModes.ADD;\n      s.animations.add('spin', [0, 1, 2, 3, 4, 5], 10, true);\n      s.animations.play('spin');\n      this.specialFx.add(s);\n    }\n\n    for (const key of this.speedCells) {\n      const [c, r] = key.split(',').map(Number);\n      const x = c * TILE_SIZE;\n      const y = r * TILE_SIZE;\n      const s = this.game.add.sprite(x, y, 'speed_fx');\n      s.alpha = 0.75;\n      s.animations.add('flow', [0, 1, 2, 3, 4, 5], 12, true);\n      s.animations.play('flow');\n      this.specialFx.add(s);\n    }\n\n    this.player  = null;\n    this.bones   = this.game.add.group();\n    this.bombs   = this.game.add.group();\n    this.spoils  = this.game.add.group();\n    this.blasts  = this.game.add.group();\n    this.enemies = this.game.add.group();\n\n    this.game.physics.arcade.enable(this.blockLayer);\n  }\n\n  createPlayers() {\n    const all = Object.values(this.currentGame.players || {});\n\n    // Prefer socket id match\n    let local = all.find(p => p && p.id === clientSocket.id);\n\n    // Fallback: match by authenticated userId (useful if socket id changed)\n    if (!local) {\n      try {\n        const uid = window.currentUser && window.currentUser.id;\n        if (uid) {\n          local = all.find(p => p && p.userId && p.userId === uid);\n        }\n      } catch (_) {}\n    }\n\n    for (let player of all) {\n      if (!player) continue;\n      let setup = {\n        game:   this.game,\n        id:     player.id,\n        spawn:  player.spawn,\n        skin:   player.skin,\n        displayName: player.displayName || player.skin,\n        avatarParts: player.avatarParts || null,\n      }\n\n      if ((local && player === local) || player.id === clientSocket.id) {\n        this.player = new Player(setup);\n      } else {\n        this.enemies.add(new EnemyPlayer(setup))\n      }\n    }\n\n    // If still not found (anonymous + mismatch), pick first non-bot as local to avoid a blank screen\n    if (!this.player && all.length) {\n      const first = all.find(p => p && !(typeof p.id === 'string' && p.id.startsWith('bot:'))) || all[0];\n      if (first) {\n        this.player = new Player({ game: this.game, id: first.id, spawn: first.spawn, skin: first.skin, avatarParts: first.avatarParts || null });\n      }\n    }\n  }\n\n  setEventHandlers() {\n    clientSocket.on('move player', this.onMovePlayer.bind(this));\n    clientSocket.on('player win', this.onPlayerWin.bind(this));\n    clientSocket.on('show bomb', this.onShowBomb.bind(this));\n    clientSocket.on('detonate bomb', this.onDetonateBomb.bind(this));\n    clientSocket.on('move bomb', this.onMoveBomb.bind(this));\n    clientSocket.on('spoil was picked', this.onSpoilWasPicked.bind(this));\n    clientSocket.on('show bones', this.onShowBones.bind(this));\n    clientSocket.on('player disconnect', this.onPlayerDisconnect.bind(this));\n    clientSocket.on('sudden death tiles', this.onSuddenDeathTiles.bind(this));\n    clientSocket.on('match summary', this.onMatchSummary.bind(this));\n  }\n\n  onPlayerVsSpoil(player, spoil) {\n    clientSocket.emit('pick up spoil', { spoil_id: spoil.id });\n    spoil.kill();\n  }\n\n  onPlayerVsBlast(player, blast) {\n    if (!player.alive) return;\n    // Shield powerup: brief invulnerability\n    if (player.isShielded && player.isShielded()) return;\n\n    try { if (this.sfxDeath) this.sfxDeath.play(); } catch (_) {}\n\n    clientSocket.emit('player died', { col: player.currentCol(), row: player.currentRow() });\n    player.becomesDead()\n  }\n\n  onMovePlayer({ player_id, x, y }) {\n    let enemy = findFrom(player_id, this.enemies);\n    if (!enemy) { return }\n\n    enemy.goTo({ x: x, y: y })\n  }\n\n  onPlayerVsBomb(player, bomb) {\n    if (!player || !bomb) return;\n    if (!player.hasKick) return;\n\n    // Determine movement direction intent (keyboard + touch)\n    const left  = player.leftKey.isDown  || (player.aKey && player.aKey.isDown) || player.touchLeft;\n    const right = player.rightKey.isDown || (player.dKey && player.dKey.isDown) || player.touchRight;\n    const up    = player.upKey.isDown    || (player.wKey && player.wKey.isDown) || player.touchUp;\n    const down  = player.downKey.isDown  || (player.sKey && player.sKey.isDown) || player.touchDown;\n\n    let dir = null;\n    if (left) dir = 'left';\n    else if (right) dir = 'right';\n    else if (up) dir = 'up';\n    else if (down) dir = 'down';\n\n    if (!dir) return;\n\n    // Throttle: avoid spamming server every physics tick\n    const now = this.game.time.now;\n    if (!player._lastKickAt) player._lastKickAt = 0;\n    if (now - player._lastKickAt < 110) return;\n    player._lastKickAt = now;\n\n    clientSocket.emit('kick bomb', { bomb_id: bomb.id, dir });\n  }\n\n  onMoveBomb({ bomb_id, col, row }) {\n    const b = findFrom(bomb_id, this.bombs);\n    if (!b) return;\n\n    const x = (col * TILE_SIZE) + TILE_SIZE / 2;\n    const y = (row * TILE_SIZE) + TILE_SIZE / 2;\n    b.x = x;\n    b.y = y;\n    if (b.body) {\n      b.body.reset(x, y);\n    }\n  }\n\n  stopAnimationLoop() {\n    for (let enemy of this.enemies.children) {\n      if (enemy.lastMoveAt < this.game.time.now - 200) {\n        enemy.animations.stop();\n      }\n    }\n  }\n\n  createTouchControls() {\n    if (!this.player) return;\n\n    // Only show on touch-capable devices (Phaser detection can be flaky on some mobile browsers)\n    const isTouchCapable = (\n      (this.game.device && (this.game.device.touch || this.game.device.iOS || this.game.device.android)) ||\n      (typeof window !== 'undefined' && ('ontouchstart' in window)) ||\n      (typeof navigator !== 'undefined' && (navigator.maxTouchPoints > 0))\n    );\n    if (!isTouchCapable) return;\n\n    const g = this.game.add.group();\n    g.fixedToCamera = true;\n    g.cameraOffset.setTo(0, 0);\n\n    const mkBtn = ({ x, y, r = 44, label, onDown, onUp, fill = 0x111111, alpha = 0.35, stroke = 0xffffff, strokeAlpha = 0.22 }) => {\n      const btn = this.game.add.graphics(0, 0);\n      btn.beginFill(fill, alpha);\n      btn.lineStyle(3, stroke, strokeAlpha);\n      btn.drawCircle(0, 0, r * 2);\n      btn.endFill();\n      btn.x = x;\n      btn.y = y;\n\n      const t = this.game.add.text(0, 0, label, { font: '26px Arial', fill: '#ffffff' });\n      t.anchor.setTo(0.5);\n      btn.addChild(t);\n\n      btn.inputEnabled = true;\n      btn.events.onInputDown.add(() => onDown && onDown());\n      const up = () => onUp && onUp();\n      btn.events.onInputUp.add(up);\n      btn.events.onInputOut.add(up);\n\n      g.add(btn);\n      return btn;\n    };\n\n    const w = this.game.width;\n    const h = this.game.height;\n\n    // iOS/Android safe-area padding (home indicator / browser UI)\n    const cssSafeBottom = (() => {\n      try {\n        const v = getComputedStyle(document.documentElement).getPropertyValue('env(safe-area-inset-bottom)');\n        const n = parseInt((v || '0').toString().replace('px', '').trim(), 10);\n        return Number.isFinite(n) ? n : 0;\n      } catch (_) {\n        return 0;\n      }\n    })();\n\n    const padBottom = Math.max(28, cssSafeBottom + 18);\n\n    // Scale controls a bit based on screen size\n    const s = Math.max(0.85, Math.min(1.15, Math.min(w, h) / 700));\n\n    // Virtual joystick (4-direction snap)\n    const baseX = 125 * s;\n    const baseY = h - (185 * s) - padBottom;\n    const baseR = 70 * s;\n    const knobR = 36 * s;\n\n    const base = this.game.add.graphics(0, 0);\n    base.beginFill(0x111111, 0.22);\n    base.lineStyle(3, 0xffffff, 0.18);\n    base.drawCircle(0, 0, baseR * 2);\n    base.endFill();\n    base.x = baseX;\n    base.y = baseY;\n    base.inputEnabled = true;\n    base.input.enableDrag(false);\n    g.add(base);\n\n    const knob = this.game.add.graphics(0, 0);\n    knob.beginFill(0x00e5ff, 0.18);\n    knob.lineStyle(3, 0x00e5ff, 0.25);\n    knob.drawCircle(0, 0, knobR * 2);\n    knob.endFill();\n    knob.x = baseX;\n    knob.y = baseY;\n    g.add(knob);\n\n    const resetDir = () => {\n      this.player.touchLeft = this.player.touchRight = this.player.touchUp = this.player.touchDown = false;\n    };\n\n    const setDirFromVector = (dx, dy) => {\n      resetDir();\n      const dead = 14;\n      if (Math.abs(dx) < dead && Math.abs(dy) < dead) {\n        knob.x = baseX;\n        knob.y = baseY;\n        return;\n      }\n\n      // snap to 4 directions\n      if (Math.abs(dx) > Math.abs(dy)) {\n        if (dx > 0) this.player.touchRight = true;\n        else this.player.touchLeft = true;\n        knob.x = baseX + Math.max(-baseR + knobR, Math.min(baseR - knobR, dx));\n        knob.y = baseY;\n      } else {\n        if (dy > 0) this.player.touchDown = true;\n        else this.player.touchUp = true;\n        knob.x = baseX;\n        knob.y = baseY + Math.max(-baseR + knobR, Math.min(baseR - knobR, dy));\n      }\n    };\n\n    const onPointer = (pointer) => {\n      const dx = pointer.x - baseX;\n      const dy = pointer.y - baseY;\n      const len = Math.sqrt(dx * dx + dy * dy) || 1;\n      const max = baseR - knobR;\n      const clamped = Math.min(max, len);\n      const ndx = (dx / len) * clamped;\n      const ndy = (dy / len) * clamped;\n      setDirFromVector(ndx, ndy);\n    };\n\n    base.events.onInputDown.add((sprite, pointer) => onPointer(pointer));\n    base.events.onInputUp.add(() => { resetDir(); knob.x = baseX; knob.y = baseY; });\n    base.events.onInputOut.add(() => { resetDir(); knob.x = baseX; knob.y = baseY; });\n\n    // Track drag/move globally while pressed\n    this.game.input.addMoveCallback((pointer) => {\n      if (!pointer.isDown) return;\n      onPointer(pointer);\n    }, this);\n\n    // Bomb button (right side)\n    mkBtn({\n      x: w - (115 * s),\n      y: h - (165 * s) - padBottom,\n      r: 54 * s,\n      label: '',\n      fill: 0x7a1cff,\n      alpha: 0.32,\n      stroke: 0x00e5ff,\n      strokeAlpha: 0.35,\n      onDown: () => (this.player.touchBomb = true),\n      onUp: () => (this.player.touchBomb = false),\n    });\n\n    // Reposition on resize (RESIZE scale mode)\n    this.game.scale.onSizeChange.add(() => {\n      const w2 = this.game.width;\n      const h2 = this.game.height;\n      // update camera-fixed positions by moving the whole group\n      // easiest: clear & recreate\n      g.destroy(true);\n      this.createTouchControls();\n    });\n  }\n\n  onSuddenDeathTiles({ level, tiles }) {\n    if (!tiles || !tiles.length) return;\n\n    // Visual: place walls on map; keep collision as-is (walls are already collidable)\n    const wallIdx = this.wallTileIndex;\n    for (const t of tiles) {\n      try {\n        this.map.putTile(wallIdx, t.col, t.row, this.blockLayer);\n      } catch (_) {}\n    }\n\n    // Optional: show a tiny hint\n    try {\n      if (!this._sdText) {\n        this._sdText = this.game.add.text(10, 10, '', { font: '16px Arial', fill: '#ffdf7a', stroke: '#000', strokeThickness: 3 });\n        this._sdText.fixedToCamera = true;\n      }\n      this._sdText.text = `SUDDEN DEATH Lv.${level}`;\n      this.game.time.events.add(1200, () => { try { if (this._sdText) this._sdText.text = ''; } catch (_) {} });\n    } catch (_) {}\n  }\n\n  refreshGhostCollision() {\n    if (!this.player) return;\n\n    const ghost = this.player.isGhosted && this.player.isGhosted();\n    if (ghost === this._ghostCollisionEnabled) return;\n\n    // Ghost: phase through destructible blocks (\"balk\") only.\n    // We keep walls solid.\n    this._ghostCollisionEnabled = ghost;\n\n    if (ghost) {\n      this.map.setCollision([this.wallTileIndex], true, this.blockLayer);\n      if (this.balkTileIndex != null) {\n        this.map.setCollision([this.balkTileIndex], false, this.blockLayer);\n      }\n    } else {\n      this.map.setCollision(this.baseCollisionTiles, true, this.blockLayer);\n    }\n  }\n\n  handleSpecialTiles() {\n    if (!this.player) return;\n\n    const col = Math.floor(this.player.body.position.x / TILE_SIZE);\n    const row = Math.floor(this.player.body.position.y / TILE_SIZE);\n\n    // Speed floor\n    const onSpeed = this.speedCells.has(`${col},${row}`);\n    this.player.tileSpeedMultiplier = onSpeed ? 1.65 : 1.0;\n\n    if (!this.player._wasOnSpeed) this.player._wasOnSpeed = false;\n    if (onSpeed && !this.player._wasOnSpeed) {\n      try { if (this.sfxSpeed) this.sfxSpeed.play(); } catch (_) {}\n    }\n    this.player._wasOnSpeed = onSpeed;\n\n    // Portal (pair portals in order: 0<->1, 2<->3, ...)\n    if (this.portalCells.length >= 2) {\n      const now = this.game.time.now;\n      if (!this.player._lastPortalAt) this.player._lastPortalAt = 0;\n\n      const isBlockedCell = (c, r) => {\n        try {\n          const t = this.map.getTile(c, r, this.blockLayer);\n          if (!t) return false;\n          // Treat walls/balks as blocked\n          if (t.index === this.wallTileIndex) return true;\n          if (this.balkTileIndex != null && t.index === this.balkTileIndex) return true;\n          // Some maps may mark additional collision tiles\n          if (t.collides) return true;\n          return false;\n        } catch (_) {\n          return false;\n        }\n      };\n\n      const hasBombAt = (c, r) => {\n        try {\n          return (this.bombs && this.bombs.children || []).some(b => b && b.col === c && b.row === r);\n        } catch (_) { return false; }\n      };\n\n      const findSafeLanding = (c0, r0) => {\n        // Prefer exact target, else search nearby in small radius\n        const tryCell = (c, r) => {\n          if (isBlockedCell(c, r)) return null;\n          if (hasBombAt(c, r)) return null;\n          return { col: c, row: r };\n        };\n        let ok = tryCell(c0, r0);\n        if (ok) return ok;\n\n        for (let rad = 1; rad <= 2; rad++) {\n          for (let dr = -rad; dr <= rad; dr++) {\n            for (let dc = -rad; dc <= rad; dc++) {\n              const c = c0 + dc;\n              const r = r0 + dr;\n              ok = tryCell(c, r);\n              if (ok) return ok;\n            }\n          }\n        }\n        return null;\n      };\n\n      const portalIndex = this.portalCells.findIndex(p => p.col === col && p.row === row);\n      if (portalIndex >= 0 && now - this.player._lastPortalAt > 950) {\n        const pairIndex = (portalIndex % 2 === 0) ? portalIndex + 1 : portalIndex - 1;\n        const target = this.portalCells[pairIndex];\n        if (target) {\n          const landing = findSafeLanding(target.col, target.row);\n          if (landing) {\n            // Teleport to tile top-left (sprite origin). Keep body fully inside the tile.\n            this.player.x = landing.col * TILE_SIZE;\n            this.player.y = landing.row * TILE_SIZE;\n            this.player.body.velocity.set(0);\n            this.player.body.reset(this.player.x, this.player.y);\n            this.player.prevPosition = { x: this.player.x, y: this.player.y };\n            this.player._lastPortalAt = now;\n\n            try { if (this.sfxPortal) this.sfxPortal.play(); } catch (_) {}\n          }\n        }\n      }\n    }\n  }\n\n  onShowBomb({ bomb_id, col, row }) {\n    this.bombs.add(new Bomb(this.game, bomb_id, col, row));\n  }\n\n  onDetonateBomb({ bomb_id, blastedCells }) {\n    // Remove Bomb:\n    findAndDestroyFrom(bomb_id, this.bombs)\n\n    try { if (this.sfxExplosion) this.sfxExplosion.play(); } catch (_) {}\n\n    // Render Blast:\n    for (let cell of blastedCells) {\n      this.blasts.add(new FireBlast(this.game, cell));\n    };\n\n    // Destroy Tiles:\n    for (let cell of blastedCells) {\n      if (!cell.destroyed) { continue }\n\n      this.map.putTile(this.blockLayer.layer.properties.empty, cell.col, cell.row, this.blockLayer);\n    };\n\n    // Add Spoils:\n    for (let cell of blastedCells) {\n      if (!cell.destroyed) { continue }\n      if (!cell.spoil) { continue }\n\n      this.spoils.add(new Spoil(this.game, cell.spoil));\n    };\n  }\n\n  onSpoilWasPicked({ player_id, spoil_id, spoil_type }){\n    if (player_id === this.player.id){\n      this.player.pickSpoil(spoil_type)\n    }\n\n    findAndDestroyFrom(spoil_id, this.spoils)\n  }\n\n  onShowBones({ player_id, col, row }) {\n    this.bones.add(new Bone(this.game, col, row));\n\n    findAndDestroyFrom(player_id, this.enemies)\n  }\n\n  onMatchSummary({ summary, reason }) {\n    try { if (window.UK01Touch && window.UK01Touch.hide) window.UK01Touch.hide(); } catch (_) {}\n    try { clientSocket.emit('leave game'); } catch (_) {}\n\n    this.state.start('Win', true, false, { mode: 'horde', summary, reason: reason || 'horde_end' });\n  }\n\n  onPlayerWin(payload) {\n    try { if (window.UK01Touch && window.UK01Touch.hide) window.UK01Touch.hide(); } catch (_) {}\n    clientSocket.emit('leave game');\n\n    // Backward compatible: server may send a skin string or { skin, player_id, reason }\n    const winner_skin = (payload && payload.skin) ? payload.skin : payload;\n    const reason = (payload && payload.reason) ? payload.reason : null;\n\n    this.state.start('Win', true, false, { skin: winner_skin, reason });\n  }\n\n  onPlayerDisconnect({ player_id }) {\n    findAndDestroyFrom(player_id, this.enemies);\n\n    if (this.enemies.children.length >= 1) { return }\n\n    this.onPlayerWin()\n  }\n}\n\nexport default Play;\n","class Preload extends Phaser.State {\n\n  preload() {\n    // Debug loader issues on mobile (use ?debug=1)\n    try {\n      this.load.onFileError.add((key, file) => {\n        try { if (window.UK01Log) window.UK01Log(`LOAD_ERR key=${key} url=${file && file.url}`); } catch (_) {}\n      });\n      this.load.onFileComplete.add((progress, key) => {\n        try {\n          if (window.UK01Loading) window.UK01Loading.set(progress, `${key}`);\n          if (window.UK01Log && progress < 100) window.UK01Log(`LOAD ${progress}% ${key}`);\n        } catch (_) {}\n      });\n      this.load.onLoadComplete.add(() => {\n        try {\n          if (window.UK01Loading) window.UK01Loading.set(100, '');\n          if (window.UK01Log) window.UK01Log('LOAD_DONE');\n        } catch (_) {}\n      });\n    } catch (_) {}\n    // Menu:\n    this.load.image('main_menu',     'images/menu/main_menu.png');\n    this.load.image('slot_backdrop', 'images/menu/slot_backdrop.png');\n\n    this.load.spritesheet('buttons',    'images/menu/buttons.png', 200, 75);\n    this.load.spritesheet('check_icon', 'images/menu/accepts.png', 75, 75);\n    this.load.spritesheet('list_icon',  'images/menu/game_enter.png', 75, 75);\n\n    this.load.image('hot_map_preview',   'images/menu/hot_map_preview.png');\n    this.load.image('cold_map_preview',  'images/menu/cold_map_preview.png');\n    // cache-bust to ensure clients fetch the updated preview\n    this.load.image('arena_map_preview', 'images/menu/arena_map_preview.png?v=2');\n    // cache-bust to ensure clients fetch the updated preview\n    this.load.image('open_map_preview',  'images/menu/open_map_preview.png?v=3');\n    this.load.image('rune_lab_preview',  'images/menu/rune_lab_preview.png?v=1');\n    this.load.image('mirror_temple_preview', 'images/menu/mirror_temple_preview.png?v=1');\n    this.load.image('trap_garden_preview', 'images/menu/trap_garden_preview.png?v=1');\n    this.load.image('prev',             'images/menu/left_arrow.png');\n    this.load.image('next',             'images/menu/right_arrow.png');\n\n    // Map:\n    this.load.image('tiles',      'maps/tileset.png');\n    this.load.tilemap('hot_map',   'maps/hot_map.json', null, Phaser.Tilemap.TILED_JSON);\n    this.load.tilemap('cold_map',  'maps/cold_map.json', null, Phaser.Tilemap.TILED_JSON);\n    this.load.tilemap('arena_map', 'maps/arena_map.json', null, Phaser.Tilemap.TILED_JSON);\n    this.load.tilemap('open_map',  'maps/open_map.json',  null, Phaser.Tilemap.TILED_JSON);\n    this.load.tilemap('rune_lab',  'maps/rune_lab.json',  null, Phaser.Tilemap.TILED_JSON);\n    this.load.tilemap('mirror_temple',  'maps/mirror_temple.json',  null, Phaser.Tilemap.TILED_JSON);\n    this.load.tilemap('trap_garden',  'maps/trap_garden.json',  null, Phaser.Tilemap.TILED_JSON);\n\n\n    // Game:\n    this.load.spritesheet('explosion_center',     'images/game/explosion_center.png',     35, 35);\n    this.load.spritesheet('explosion_horizontal', 'images/game/explosion_horizontal.png', 35, 35);\n    this.load.spritesheet('explosion_vertical',   'images/game/explosion_vertical.png',   35, 35);\n    this.load.spritesheet('explosion_up',         'images/game/explosion_up.png',         35, 35);\n    this.load.spritesheet('explosion_right',      'images/game/explosion_right.png',      35, 35);\n    this.load.spritesheet('explosion_down',       'images/game/explosion_down.png',       35, 35);\n    this.load.spritesheet('explosion_left',       'images/game/explosion_left.png',       35, 35);\n\n    this.load.spritesheet('spoil_tileset', 'images/game/spoil_tileset.png', 35, 35);\n    this.load.spritesheet('bone_tileset',  'images/game/bone_tileset.png', 35, 35);\n    this.load.spritesheet('bomb_tileset',  'images/game/bombs.png', 35, 35);\n\n    this.load.image('speed_up_bonus',    'images/game/speed_up_bonus.png');\n    this.load.image('speed_up_no_bonus', 'images/game/speed_up_no_bonus.png');\n    this.load.image('delay_up_bonus',    'images/game/delay_up_bonus.png');\n    this.load.image('delay_up_no_bonus', 'images/game/delay_up_no_bonus.png');\n    this.load.image('power_up_bonus',    'images/game/power_up_bonus.png');\n\n    this.load.image('placeholder_power', 'images/game/placeholder_power.png');\n    this.load.image('placeholder_speed', 'images/game/placeholder_speed.png');\n    this.load.image('placeholder_time',  'images/game/placeholder_time.png');\n\n    // Special tiles FX\n    this.load.spritesheet('portal_fx', 'images/game/portal_fx.png', 35, 35);\n    this.load.spritesheet('speed_fx',  'images/game/speed_fx.png', 35, 35);\n    this.load.image('ghost_icon', 'images/game/ghost_icon.png');\n\n    // SFX / BGM (mobile may require user gesture to unlock audio)\n    this.load.audio('sfx_portal',    ['sfx/portal.wav']);\n    this.load.audio('sfx_speed',     ['sfx/speed.wav']);\n    this.load.audio('sfx_explosion', ['sfx/explosion.wav']);\n    this.load.audio('sfx_death',     ['sfx/death.wav']);\n    this.load.audio('bgm_main',      ['sfx/bgm.wav']);\n\n    // Cosmetics (paper-doll overlays)\n    // Cache-bust so clients reliably see updated PNGs\n    const COS_V = '20260206_14';\n    const cos = (p) => `images/game/cosmetics/${p}?v=${COS_V}`;\n\n    // Character bases\n    this.load.image('cosmetic_base', cos('base.png'));\n    this.load.image('cosmetic_char_1', cos('characters/char_1_pink_happy.png'));\n    this.load.image('cosmetic_char_2', cos('characters/char_2_pink_cry.png'));\n    this.load.image('cosmetic_char_3', cos('characters/char_3_yellow_happy.png'));\n    this.load.image('cosmetic_char_4', cos('characters/char_4_yellow_cry.png'));\n    this.load.image('cosmetic_char_5', cos('characters/char_5_blue_happy.png'));\n    this.load.image('cosmetic_char_6', cos('characters/char_6_blue_cry.png'));\n    this.load.image('cosmetic_char_7', cos('characters/char_7_mint_happy.png'));\n    this.load.image('cosmetic_char_8', cos('characters/char_8_mint_cry.png'));\n    // keep same footprint as original player sprite so children won't get culled\n    this.load.image('cosmetic_transparent', cos('transparent35.png'));\n\n    for (let i = 1; i <= 10; i++) {\n      this.load.image(`cosmetic_hat_${i}`, cos(`hat_${i}.png`));\n      this.load.image(`cosmetic_hair_${i}`, cos(`hair_${i}.png`));\n      this.load.image(`cosmetic_outfit_${i}`, cos(`outfit_${i}.png`));\n    }\n    for (let i = 1; i <= 4; i++) {\n      this.load.image(`cosmetic_face_${i}`, cos(`face_${i}.png`));\n    }\n    for (let i = 1; i <= 6; i++) {\n      this.load.image(`cosmetic_pattern_${i}`, cos(`pattern_${i}.png`));\n    }\n\n    // Skins:\n    this.load.image('bomberman_head_blank',     'images/game/chars/0-face.png');\n\n    this.load.image('bomberman_head_Theodora',  'images/game/chars/1-face.png');\n    this.load.image('bomberman_head_Ringo',     'images/game/chars/2-face.png');\n    this.load.image('bomberman_head_Jeniffer',  'images/game/chars/3-face.png');\n    this.load.image('bomberman_head_Godard',    'images/game/chars/4-face.png');\n    this.load.image('bomberman_head_Biarid',    'images/game/chars/5-face.png');\n    this.load.image('bomberman_head_Solia',     'images/game/chars/6-face.png');\n    this.load.image('bomberman_head_Kedan',     'images/game/chars/7-face.png');\n    this.load.image('bomberman_head_Nigob',     'images/game/chars/8-face.png');\n    this.load.image('bomberman_head_Baradir',   'images/game/chars/9-face.png');\n    this.load.image('bomberman_head_Raviel',    'images/game/chars/10-face.png');\n    this.load.image('bomberman_head_Valpo',     'images/game/chars/11-face.png');\n\n    this.load.spritesheet('bomberman_Theodora',  'images/game/chars/1-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Ringo',     'images/game/chars/2-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Jeniffer',  'images/game/chars/3-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Godard',    'images/game/chars/4-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Biarid',    'images/game/chars/5-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Solia',     'images/game/chars/6-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Kedan',     'images/game/chars/7-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Nigob',     'images/game/chars/8-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Baradir',   'images/game/chars/9-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Raviel',    'images/game/chars/10-preview.png', 32, 32);\n    this.load.spritesheet('bomberman_Valpo',     'images/game/chars/11-preview.png', 32, 32);\n  }\n\n  create() {\n    // Hide loading overlay\n    try { if (window.UK01Loading) window.UK01Loading.done(); } catch (_) {}\n    this.state.start('Menu');\n  }\n}\n\nexport default Preload;\n","import { AVAILABLE_MAPS } from '../utils/constants';\nimport { Text, Button } from '../helpers/elements';\n\nclass SelectMap extends Phaser.State {\n\n  init() {\n    this.slider = new phaseSlider(this);\n  }\n\n  create() {\n    // Select map is handled by HTML overlay now.\n    // Keep background to avoid blank canvas and immediately return to Menu.\n    let background = this.add.image(this.game.world.centerX, this.game.world.centerY, 'main_menu');\n    background.anchor.setTo(0.5);\n\n    try {\n      if (window.UK01Menu && window.UK01Menu.showMaps) {\n        window.UK01Menu.showMaps();\n      }\n    } catch (_) {}\n\n    // no-op\n  }\n\n  confirmStageSelection() {\n    let map_name = AVAILABLE_MAPS[this.slider.getCurrentIndex()]\n\n    clientSocket.emit('create game', map_name, this.joinToNewGame.bind(this));\n  }\n\n  joinToNewGame(payload) {\n    // server callback may return either a plain id string or an object { game_id }\n    if (payload && payload.error) {\n      // Minimal UX: browser alert (works in Phaser environment)\n      alert(payload.message || payload.error);\n      return;\n    }\n\n    const game_id = (payload && payload.game_id) ? payload.game_id : payload;\n    this.state.start('PendingGame', true, false, game_id);\n  }\n}\n\nexport default SelectMap;\n","import { Text } from '../helpers/elements';\n\nclass Win extends Phaser.State {\n\n  init(payload) {\n    // payload may be a string skin or { skin, reason, summary, mode }\n    if (payload && typeof payload === 'object') {\n      this.skin = payload.skin;\n      this.reason = payload.reason;\n      this.summary = payload.summary || null;\n      this.mode = payload.mode || null;\n    } else {\n      this.skin = payload;\n      this.reason = null;\n      this.summary = null;\n      this.mode = null;\n    }\n  }\n\n  create() {\n    // Hide touch overlay on end screen\n    try { if (window.UK01Touch && window.UK01Touch.hide) window.UK01Touch.hide(); } catch (_) {}\n\n    // Stop BGM on end screen\n    try {\n      const g = this.game;\n      if (g && g._bgm && g._bgm.stop) g._bgm.stop();\n    } catch (_) {}\n\n    new Text({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: this.game.world.centerY,\n      text: this.winnerText(),\n      style: {\n        font: '30px Areal',\n        fill: '#FFFFFF'\n      }\n    })\n\n    // Mobile-friendly: tap anywhere to return\n    try {\n      this.game.input.onTap.addOnce(() => this.returnToMenu());\n    } catch (_) {}\n\n    // Also allow pointer click\n    try {\n      this.game.input.onDown.addOnce(() => this.returnToMenu());\n    } catch (_) {}\n\n    // Auto return after a short delay (avoid getting stuck)\n    try {\n      this.game.time.events.add(3500, () => this.returnToMenu());\n    } catch (_) {}\n  }\n\n  update() {\n    if( this.game.input.keyboard.isDown(Phaser.Keyboard.ENTER) ) {\n      this.returnToMenu();\n    }\n  }\n\n  returnToMenu() {\n    this.state.start('Menu');\n  }\n\n  winnerText() {\n    if (this.summary && (this.summary.mode === 'horde' || this.mode === 'horde')) {\n      const s = this.summary;\n      const dur = (s.durationMs != null) ? (s.durationMs / 1000).toFixed(1) : null;\n      const teamKills = (s.teamKills != null) ? s.teamKills : 0;\n      const top = (s.perPlayer && s.perPlayer[0]) ? s.perPlayer[0] : null;\n      const topLine = top ? `${top.displayName || top.skin}: ${(top.survivalMs/1000).toFixed(1)}s, ${top.kills} kills` : '';\n      return `HORDE ended. Time: ${dur || '?'}s  Team Kills: ${teamKills}\\n${topLine}\\nTap to return to main menu.`;\n    }\n\n    if (this.skin) {\n      const why = this.reason ? ` (reason: ${this.reason})` : '';\n      return `Player: \"${this.skin}\" won!${why} Tap to return to main menu.`\n    }\n\n    return 'Opponent left! Tap to return to main menu.'\n  }\n}\n\nexport default Win;\n","export const AVAILABLE_MAPS = ['hot_map', 'cold_map', 'arena_map', 'open_map', 'rune_lab', 'mirror_temple', 'trap_garden']\nexport const TILESET = 'tiles';\nexport const LAYER   = 'Blocks';\n\nexport const TILE_SIZE = 35;\n\n// Special floor tiles (must not be in collisionTiles)\nexport const TILE_PORTAL = 2;\nexport const TILE_SPEED_FLOOR = 3;\nexport const EXPLOSION_TIME = 2000;\nexport const PING = 100;\n\nexport const SPEED = 0\nexport const POWER = 1\nexport const DELAY = 2\nexport const SHIELD = 3\nexport const REMOTE = 4\nexport const KICK = 5\nexport const GHOST = 6\n\nexport const SHIELD_DURATION_MS = 1500\nexport const GHOST_DURATION_MS = 4500\n\nexport const INITIAL_SPEED = 150\nexport const STEP_SPEED = 50\nexport const MAX_SPEED = 350\nexport const INITIAL_DELAY = 2000\nexport const STEP_DELAY = 500\nexport const MIN_DELAY = 500\nexport const INITIAL_POWER = 1\nexport const STEP_POWER = 1\n","export const findFrom = function(id, entities) {\n  for (let entity of entities.children) {\n    if (entity.id !== id) { continue }\n\n    return entity\n  }\n  return null;\n}\n\nexport const findAndDestroyFrom = function(id, entities) {\n  let entity = findFrom(id, entities);\n  if (!entity) { return }\n\n  entity.destroy()\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import Boot from './states/boot';\nimport Preload from './states/preload';\nimport Menu from './states/menu';\nimport SelectMap from './states/select_map';\nimport PendingGame from './states/pending_game';\nimport Play from './states/play';\nimport Win from './states/win';\n\nclass Game extends Phaser.Game {\n  constructor() {\n    // Use a fixed logical resolution; CSS + ScaleManager will scale to fit mobile screens.\n    // Map size is 28x18 tiles at 35px => 980x630.\n    super(980, 630, Phaser.AUTO, 'game-container');\n\n    // Tell Phaser to use setTimeOut even if RAF(request animation frame) is available.\n    this.config['forceSetTimeOut'] = true\n\n    this.state.add('Boot',         Boot);\n    this.state.add('Preload',      Preload);\n    this.state.add('Menu',         Menu);\n    this.state.add('SelectMap',    SelectMap);\n    this.state.add('PendingGame',  PendingGame);\n    this.state.add('Play',         Play);\n    this.state.add('Win',          Win);\n\n    this.state.start('Boot');\n  }\n}\n\n// keep a reference for HTML overlay to control states\nwindow.__phaserGame = new Game();\n"],"names":["TILE_SIZE","EXPLOSION_TIME","Bomb","Phaser","Sprite","constructor","game","id","col","row","centerCol","centerRow","scale","setTo","anchor","physics","arcade","enable","add","tween","to","x","y","Easing","Linear","None","body","immovable","animations","play","update","Bone","PING","Text","EnemyPlayer","spawn","skin","displayName","avatarParts","currentPosition","lastMoveAt","setSize","defineSelf","applyAvatarParts","animateCosmetics","goTo","newPosition","time","now","_movingUntil","animateFace","face","diffX","diffY","parts","_cosmetics","s","destroy","_","key","alpha","spr","sprite","_baseY","addChild","push","baseKey","character","hair","outfit","hat","pattern","loadTexture","length","_cosBobT","moving","elapsedMS","bob","Math","sin","by","name","playerText","text","style","font","fill","stroke","strokeThickness","FireBlast","cell","type","Info","player","align","redStyle","hud","group","fixedToCamera","bootsIcon","Image","speedText","speedLabel","powerIcon","powerText","powerLabel","delayIcon","delayText","delayLabel","ghostIcon","ghostText","visible","_ghostTimer","deadText","world","centerX","height","set","refreshStatistic","showGhost","ghostUntilMs","events","remove","tick","left","max","toFixed","hideGhost","loop","showDeadInfo","speed","power","delay","MAX_SPEED","STEP_SPEED","INITIAL_SPEED","SPEED","POWER","DELAY","MIN_DELAY","STEP_DELAY","INITIAL_DELAY","INITIAL_POWER","STEP_POWER","SHIELD","REMOTE","KICK","GHOST","SHIELD_DURATION_MS","GHOST_DURATION_MS","SpoilNotification","Player","prevPosition","tileSpeedMultiplier","_lastBombTime","shieldUntil","ghostUntil","hasRemote","hasKick","existing","touchLeft","touchRight","touchUp","touchDown","touchBomb","positionUpdaterLoop","bind","info","defineKeyboard","alive","handleMoves","handleBombs","upKey","input","keyboard","addKey","Keyboard","UP","downKey","DOWN","leftKey","LEFT","rightKey","RIGHT","wKey","W","aKey","A","sKey","S","dKey","D","spaceKey","SPACEBAR","velocity","animationsArray","effectiveSpeed","isDown","right","up","down","currentAnimation","stop","bombDown","clientSocket","emit","currentCol","currentRow","floor","position","becomesDead","kill","pickSpoil","spoil_type","increaseSpeed","increasePower","increaseDelay","activateShield","enableRemote","enableKick","activateGhost","isShielded","isGhosted","asset","tint","abs","Spoil","spoil","frame","t1","Sinusoidal","InOut","t2","_glowTween","_scaleTween","Button","callback","callbackContext","overFrame","outFrame","downFrame","upFrame","TextButton","label","disable","setFrames","inputEnabled","useHandCursor","GameSlots","Group","availableGames","game_slot_asset","game_enter_asset","yOffset","availableGame","gameBox","button","width","game_id","callAll","PlayerSlots","max_players","players","asset_empty","asset_player","xOffset","i","slotBox","slotName","_player","picture","onComplete","finish","start","Boot","State","create","stage","disableVisibilityChange","scaleMode","ScaleManager","SHOW_ALL","pageAlignHorizontally","pageAlignVertically","refresh","window","addEventListener","centerY","sound","mute","onDown","addOnce","context","state","resume","unlock","Menu","init","slotsWithGame","on","displayPendingGames","background","image","UK01Menu","showMenu","hostGameAction","joinGameAction","PendingGame","payload","slotsWithPlayer","displayGameInfo","launchGame","UK01Pending","show","hideMenu","gameTitle","setAICount","n","aiCount","min","aiText","count","setAIDifficulty","difficulty","aiDifficulty","aiDiffText","current_game","Object","values","updateFromGame","leaveGameAction","startGameAction","findFrom","findAndDestroyFrom","TILESET","LAYER","TILE_PORTAL","TILE_SPEED_FLOOR","Play","currentGame","createMap","createPlayers","setEventHandlers","camera","follow","hide","UK01Touch","sfxPortal","audio","sfxSpeed","sfxExplosion","sfxDeath","_bgm","volume","stopAnimationLoop","refreshGhostCollision","collide","blockLayer","enemies","bombs","onPlayerVsBomb","overlap","spoils","onPlayerVsSpoil","blasts","onPlayerVsBlast","handleSpecialTiles","map","tilemap","map_name","addTilesetImage","createLayer","resizeWorld","baseCollisionTiles","layer","properties","collisionTiles","slice","wallTileIndex","wall","balkTileIndex","balk","setCollision","_ghostCollisionEnabled","portalCells","speedCells","Set","specialFx","layers","w","h","data","r","c","tile","idx","index","p","blendMode","blendModes","ADD","split","Number","bones","all","local","find","uid","currentUser","userId","setup","first","startsWith","onMovePlayer","onPlayerWin","onShowBomb","onDetonateBomb","onMoveBomb","onSpoilWasPicked","onShowBones","onPlayerDisconnect","onSuddenDeathTiles","onMatchSummary","spoil_id","blast","player_id","enemy","bomb","dir","_lastKickAt","bomb_id","b","reset","children","createTouchControls","isTouchCapable","device","touch","iOS","android","navigator","maxTouchPoints","g","cameraOffset","mkBtn","onUp","strokeAlpha","btn","graphics","beginFill","lineStyle","drawCircle","endFill","t","onInputDown","onInputUp","onInputOut","cssSafeBottom","v","getComputedStyle","document","documentElement","getPropertyValue","parseInt","toString","replace","trim","isFinite","padBottom","baseX","baseY","baseR","knobR","base","enableDrag","knob","resetDir","setDirFromVector","dx","dy","dead","onPointer","pointer","len","sqrt","clamped","ndx","ndy","addMoveCallback","onSizeChange","w2","h2","level","tiles","wallIdx","putTile","_sdText","ghost","onSpeed","has","_wasOnSpeed","_lastPortalAt","isBlockedCell","getTile","collides","hasBombAt","some","findSafeLanding","c0","r0","tryCell","ok","rad","dr","dc","portalIndex","findIndex","pairIndex","target","landing","blastedCells","destroyed","empty","summary","reason","mode","winner_skin","Preload","preload","load","onFileError","file","UK01Log","url","onFileComplete","progress","UK01Loading","onLoadComplete","spritesheet","Tilemap","TILED_JSON","COS_V","cos","done","AVAILABLE_MAPS","SelectMap","slider","phaseSlider","showMaps","confirmStageSelection","getCurrentIndex","joinToNewGame","error","alert","message","Win","winnerText","onTap","returnToMenu","ENTER","dur","durationMs","teamKills","top","perPlayer","topLine","survivalMs","kills","why","entities","entity","Game","AUTO","config","__phaserGame"],"sourceRoot":""}